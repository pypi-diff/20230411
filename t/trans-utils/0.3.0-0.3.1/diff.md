# Comparing `tmp/trans_utils-0.3.0-py3-none-any.whl.zip` & `tmp/trans_utils-0.3.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,8 +1,8 @@
-Zip file size: 139350 bytes, number of entries: 158
+Zip file size: 139348 bytes, number of entries: 158
 -rw-r--r--  2.0 unx       68 b- defN 23-Mar-27 08:56 tutils/__init__.py
 -rw-r--r--  2.0 unx     2281 b- defN 22-Dec-06 07:29 tutils/classify.py
 -rw-r--r--  2.0 unx     3316 b- defN 21-Sep-18 05:14 tutils/functools.py
 -rw-r--r--  2.0 unx     5771 b- defN 21-Oct-19 05:11 tutils/initializer.py
 -rw-r--r--  2.0 unx     3286 b- defN 21-Sep-23 11:39 tutils/tutils.py
 -rw-r--r--  2.0 unx       69 b- defN 22-Oct-14 07:51 tutils/contrib/__init__.py
 -rw-r--r--  2.0 unx     4641 b- defN 23-Apr-09 08:32 tutils/contrib/ddp_demo.py
@@ -115,16 +115,16 @@
 -rw-r--r--  2.0 unx     4189 b- defN 22-Aug-15 06:44 tutils/trainer/learner.py
 -rw-r--r--  2.0 unx     3655 b- defN 22-Oct-29 11:27 tutils/trainer/learner_module.py
 -rw-r--r--  2.0 unx     1075 b- defN 21-Dec-19 11:28 tutils/trainer/monitor.py
 -rw-r--r--  2.0 unx     4192 b- defN 23-Apr-03 10:49 tutils/trainer/recorder.py
 -rw-r--r--  2.0 unx      576 b- defN 21-May-28 02:31 tutils/trainer/save.py
 -rw-r--r--  2.0 unx     1071 b- defN 21-Sep-09 08:06 tutils/trainer/simple_script_helper.py
 -rw-r--r--  2.0 unx      273 b- defN 23-Apr-08 07:49 tutils/trainer/tester_abstract.py
--rw-r--r--  2.0 unx     4184 b- defN 23-Apr-09 08:44 tutils/trainer/trainer.py
--rw-r--r--  2.0 unx    15046 b- defN 23-Apr-09 10:50 tutils/trainer/trainer_abstract.py
+-rw-r--r--  2.0 unx     4061 b- defN 23-Apr-09 13:28 tutils/trainer/trainer.py
+-rw-r--r--  2.0 unx    15176 b- defN 23-Apr-11 13:59 tutils/trainer/trainer_abstract.py
 -rw-r--r--  2.0 unx     6926 b- defN 21-Nov-02 06:01 tutils/trainer/trainer_ddp.py
 -rw-r--r--  2.0 unx     2398 b- defN 23-Apr-09 09:09 tutils/trainer/trainer_ddp2.py
 -rw-r--r--  2.0 unx     5611 b- defN 21-Oct-08 04:59 tutils/trainer/tuner_exec.py
 -rw-r--r--  2.0 unx        0 b- defN 21-Oct-26 15:07 tutils/trainer/utils/__init__.py
 -rw-r--r--  2.0 unx     1218 b- defN 21-Oct-28 02:41 tutils/trainer/utils/trainer_utils.py
 -rw-r--r--  2.0 unx      103 b- defN 21-Jun-21 08:10 tutils/tutils/NOTES.md
 -rw-r--r--  2.0 unx      528 b- defN 23-Apr-09 10:07 tutils/tutils/__init__.py
@@ -147,14 +147,14 @@
 -rw-r--r--  2.0 unx       93 b- defN 21-Sep-23 11:51 tutils/tutils/visualizers/__init__.py
 -rw-r--r--  2.0 unx     2254 b- defN 22-Oct-12 08:38 tutils/tutils/visualizers/draw_bar_auto_split.py
 -rw-r--r--  2.0 unx     3093 b- defN 21-Sep-22 03:19 tutils/tutils/visualizers/draw_curves.py
 -rw-r--r--  2.0 unx     1655 b- defN 21-Sep-14 13:23 tutils/tutils/visualizers/plt_print_3d.py
 -rw-r--r--  2.0 unx     1969 b- defN 23-Mar-27 08:54 tutils/tutils/visualizers/print_image.py
 -rw-r--r--  2.0 unx     1949 b- defN 21-May-28 02:31 tutils/tutils/visualizers/print_landmark.py
 -rw-r--r--  2.0 unx     2817 b- defN 21-Nov-21 12:45 tutils/tutils/visualizers/tsne.py
--rw-r--r--  2.0 unx    11599 b- defN 23-Apr-09 11:02 trans_utils-0.3.0.dist-info/LICENSE
--rw-r--r--  2.0 unx      474 b- defN 23-Apr-09 11:02 trans_utils-0.3.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-09 11:02 trans_utils-0.3.0.dist-info/WHEEL
--rw-r--r--  2.0 unx      112 b- defN 23-Apr-09 11:02 trans_utils-0.3.0.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        7 b- defN 23-Apr-09 11:02 trans_utils-0.3.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    14281 b- defN 23-Apr-09 11:02 trans_utils-0.3.0.dist-info/RECORD
-158 files, 380387 bytes uncompressed, 116290 bytes compressed:  69.4%
+-rw-r--r--  2.0 unx    11599 b- defN 23-Apr-11 14:02 trans_utils-0.3.1.dist-info/LICENSE
+-rw-r--r--  2.0 unx      599 b- defN 23-Apr-11 14:02 trans_utils-0.3.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-11 14:02 trans_utils-0.3.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx      112 b- defN 23-Apr-11 14:02 trans_utils-0.3.1.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        7 b- defN 23-Apr-11 14:02 trans_utils-0.3.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    14281 b- defN 23-Apr-11 14:02 trans_utils-0.3.1.dist-info/RECORD
+158 files, 380519 bytes uncompressed, 116288 bytes compressed:  69.4%
```

## zipnote {}

```diff
@@ -450,26 +450,26 @@
 
 Filename: tutils/tutils/visualizers/print_landmark.py
 Comment: 
 
 Filename: tutils/tutils/visualizers/tsne.py
 Comment: 
 
-Filename: trans_utils-0.3.0.dist-info/LICENSE
+Filename: trans_utils-0.3.1.dist-info/LICENSE
 Comment: 
 
-Filename: trans_utils-0.3.0.dist-info/METADATA
+Filename: trans_utils-0.3.1.dist-info/METADATA
 Comment: 
 
-Filename: trans_utils-0.3.0.dist-info/WHEEL
+Filename: trans_utils-0.3.1.dist-info/WHEEL
 Comment: 
 
-Filename: trans_utils-0.3.0.dist-info/entry_points.txt
+Filename: trans_utils-0.3.1.dist-info/entry_points.txt
 Comment: 
 
-Filename: trans_utils-0.3.0.dist-info/top_level.txt
+Filename: trans_utils-0.3.1.dist-info/top_level.txt
 Comment: 
 
-Filename: trans_utils-0.3.0.dist-info/RECORD
+Filename: trans_utils-0.3.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## tutils/trainer/trainer.py

```diff
@@ -43,17 +43,14 @@
             mode:
                 ps:  Parameter Server
                 ddp: Distributed data parallel
         """
         super(Trainer, self).__init__(config, tester, monitor, rank='cuda', world_size=0)
         self.logger = logger
         
-        if self.use_amp:
-            self.scalar = GradScaler()
-            print("Debug settings: use amp=",self.use_amp)
         
         if self.logging_available:
             print("Logger at Process(rank=0)")
             self.recorder = Recorder(reduction=self.recorder_mode)
             self.recorder_test = Recorder(reduction=self.recorder_mode)
             self.logger = None
             self.csvlogger = CSVLogger(tfilename(self.runs_dir, "best_record"))
```

## tutils/trainer/trainer_abstract.py

```diff
@@ -84,14 +84,17 @@
         self.recorder_mode = config['logger'].get("recorder_reduction", "mean")
         self.using_ddp = False
 
         # Warning for deprecated func
         if self.save_latest_only is True:
             print("[Tutils] arg: save_latest_only is deprecated, please use [save_mode: ['all',  'best', 'latest'] ]")
 
+        if self.use_amp:
+            self.scalar = GradScaler()
+            print("Debug settings: use amp=",self.use_amp)
         # if self.rank != 'cuda' and self.world_size > 0:
         #     self.ddp_config = config['training'].get('ddp', dict())
         #     self.master_port = str(self.ddp_config.get('master_port', '25700'))
         #     self.master_addr = self.ddp_config.get('master_addr', 'localhost')
         #     self.dist_url = 'tcp://' + self.master_addr + ":" + self.master_port
         #     torch.distributed.init_process_group(backend="nccl", init_method=self.dist_url,
         #                                          world_size=self.world_size, rank=self.rank)
@@ -217,23 +220,23 @@
         model.train()
         out = {}
         if do_training_log and self.logging_available:
             self.recorder.clear()
             time_record = 0.1111
             self.timer_batch()
 
-        success_count = 0
-        failed_count = 0
+        success_count = 1
+        failed_count = 1
         for load_time, batch_idx, data in tenum(trainloader):
             model.on_before_zero_grad()
             optimizer.zero_grad()
             self.timer_data()
             # training steps
             for k, v in data.items():
-                if type(v) == torch.Tensor:
+                if isinstance(v, torch.Tensor):
                     data[k] = v.to(self.rank)
             time_data_cuda = self.timer_data()
             if self.use_amp:
                 with autocast():
                     self.timer_net()
                     out = model.training_step(data, batch_idx, epoch=epoch)
                     assert isinstance(out, dict)
```

## Comparing `trans_utils-0.3.0.dist-info/LICENSE` & `trans_utils-0.3.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `trans_utils-0.3.0.dist-info/RECORD` & `trans_utils-0.3.1.dist-info/RECORD`

 * *Files 1% similar despite different names*

```diff
@@ -114,16 +114,16 @@
 tutils/trainer/learner.py,sha256=ioJ4N0BNSgLZZODt4jYnti1pL-c3kKTZLOm_uZXs10c,4189
 tutils/trainer/learner_module.py,sha256=ywqIOFWFsB0vBODAswMN7Ct-RllF69OXI9iHUDV9d58,3655
 tutils/trainer/monitor.py,sha256=eVL3J54IMfWX-PjQzVRKhaHuehIfu1h9RCCn-uVtb_U,1075
 tutils/trainer/recorder.py,sha256=HuE3LsUp4rXPUgKfBgKcBWpVPgoNoHUVcjFRvJP-RhU,4192
 tutils/trainer/save.py,sha256=L_29_xs9RurvNTmCqV3r3zvG4QzwGnVpNxeItX3ni8w,576
 tutils/trainer/simple_script_helper.py,sha256=DPoeDiP5-AsjX-QeFBXTBb1M5nxsLtE7Kqdaa4ARBic,1071
 tutils/trainer/tester_abstract.py,sha256=n2qYckLI660CL711cu57LVrdvqsJrZ6J3X3G7gCeeCU,273
-tutils/trainer/trainer.py,sha256=ASk0_gHkZao5i0Zty5oiCqfiaKJb1aFYXJNtB1eWF_E,4184
-tutils/trainer/trainer_abstract.py,sha256=fmMRf7qw-kJ54-x8tXFkUv5rz_YxXBIHIb8q3dJpTTs,15046
+tutils/trainer/trainer.py,sha256=uAo8BsuaE9jvPfo0v98eTz5nSc5VaAqncd2P1cD7Vbg,4061
+tutils/trainer/trainer_abstract.py,sha256=v07VxGPoragVnpwU9HfG5f8bMX_ai-mUB8CtGOrQFBo,15176
 tutils/trainer/trainer_ddp.py,sha256=lVQSG2OsPqY88Q35Yas1lc4ghThzaGUgpy6HfIYUOs4,6926
 tutils/trainer/trainer_ddp2.py,sha256=GQQMPMFZxL34nUzCWNTPGPKxRTQxLVzxfMBLmj-o04o,2398
 tutils/trainer/tuner_exec.py,sha256=XDRZm4o7RuqJG0atDRuYTJ0wv9lyU9WIdMypkWThHMM,5611
 tutils/trainer/utils/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 tutils/trainer/utils/trainer_utils.py,sha256=SpPBIJn-0umi2PapIZlSldFPofdGCSg65xb8ZPPtJDg,1218
 tutils/tutils/NOTES.md,sha256=GbLgIZmFe5f3_h_kpA4uFW6mjd2WTNzQnSqULMjbf3M,103
 tutils/tutils/__init__.py,sha256=4q8BqwzOZ3W0a_Y7BkzMryqYN0kdZMqcm2JsR2R88kw,528
@@ -146,13 +146,13 @@
 tutils/tutils/visualizers/__init__.py,sha256=PnSZfb_KRZfpHuVQ5kvxLJMr8ECi3gLZOonDoUahzjY,93
 tutils/tutils/visualizers/draw_bar_auto_split.py,sha256=1YUjQBw56rYXptlS9A-DTlmqpDXVq2aFY50pS01curc,2254
 tutils/tutils/visualizers/draw_curves.py,sha256=tpZJAtRVXKsStU6EJlXj_p-4YfhEJOBkaEH8_A3FLpQ,3093
 tutils/tutils/visualizers/plt_print_3d.py,sha256=loYLeQ6tG-4yl7Qj2O9OmeModjmbpbY4mndb4ipsqgA,1655
 tutils/tutils/visualizers/print_image.py,sha256=gAQqdFDXhmG4edAkxZvM06cm9_zYlFrNDMl316LTq8g,1969
 tutils/tutils/visualizers/print_landmark.py,sha256=BCPM2XyC0n7nI88g_MVbfZ4NvosqdP44zyh0mdsImIE,1949
 tutils/tutils/visualizers/tsne.py,sha256=jG3iYkSV1y2F_xKdBfpgmCznWHfG6kXqTq8ihdv76hA,2817
-trans_utils-0.3.0.dist-info/LICENSE,sha256=sKhSWis5Xte-iD2VRSR_gCEdgCx0GsRPJkksIjyOJFs,11599
-trans_utils-0.3.0.dist-info/METADATA,sha256=QCLKlAV2-gWJpiOVq3-LYONJES74mvHgK7oYRMAzJLk,474
-trans_utils-0.3.0.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
-trans_utils-0.3.0.dist-info/entry_points.txt,sha256=OWqiUC73x1GjK3GeymbIK4Mo1-Pv83egBnVSQ3qFDNM,112
-trans_utils-0.3.0.dist-info/top_level.txt,sha256=C7j1awDP_zdjrdFOK0kjReESxMSumnDfG2x1_ra_X08,7
-trans_utils-0.3.0.dist-info/RECORD,,
+trans_utils-0.3.1.dist-info/LICENSE,sha256=sKhSWis5Xte-iD2VRSR_gCEdgCx0GsRPJkksIjyOJFs,11599
+trans_utils-0.3.1.dist-info/METADATA,sha256=ywvd9vq0jveHmpN1B5fcCxei8Mys8l9S8s2a8DLILP4,599
+trans_utils-0.3.1.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
+trans_utils-0.3.1.dist-info/entry_points.txt,sha256=OWqiUC73x1GjK3GeymbIK4Mo1-Pv83egBnVSQ3qFDNM,112
+trans_utils-0.3.1.dist-info/top_level.txt,sha256=C7j1awDP_zdjrdFOK0kjReESxMSumnDfG2x1_ra_X08,7
+trans_utils-0.3.1.dist-info/RECORD,,
```

