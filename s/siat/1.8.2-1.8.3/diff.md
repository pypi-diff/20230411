# Comparing `tmp/siat-1.8.2-py3-none-any.whl.zip` & `tmp/siat-1.8.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,114 +1,115 @@
-Zip file size: 1100674 bytes, number of entries: 112
--rw-rw-rw-  2.0 fat      840 b- defN 22-Sep-22 03:36 siat/__init__.py
--rw-rw-rw-  2.0 fat     2130 b- defN 23-Apr-06 11:44 siat/allin.py
--rw-rw-rw-  2.0 fat      747 b- defN 22-Oct-10 12:00 siat/alpha_vantage_test.py
--rw-rw-rw-  2.0 fat    28555 b- defN 23-Feb-08 14:21 siat/assets_liquidity.py
--rw-rw-rw-  2.0 fat     1285 b- defN 21-Nov-29 06:22 siat/assets_liquidity_test.py
--rw-rw-rw-  2.0 fat    10110 b- defN 21-Nov-09 07:59 siat/barrons_scraping_test.py
--rw-rw-rw-  2.0 fat    36597 b- defN 22-Oct-30 14:34 siat/beta_adjustment.py
--rw-rw-rw-  2.0 fat    20433 b- defN 21-Dec-21 12:26 siat/beta_adjustment_china.py
--rw-rw-rw-  2.0 fat     2467 b- defN 21-Nov-23 05:02 siat/beta_adjustment_test.py
--rw-rw-rw-  2.0 fat     6032 b- defN 22-Oct-10 12:01 siat/blockchain.py
--rw-rw-rw-  2.0 fat    98531 b- defN 23-Feb-12 14:52 siat/bond.py
--rw-rw-rw-  2.0 fat    24155 b- defN 23-Feb-12 02:05 siat/bond_base.py
--rw-rw-rw-  2.0 fat     5246 b- defN 22-Jun-26 13:39 siat/bond_test.py
--rw-rw-rw-  2.0 fat    28499 b- defN 23-Mar-03 14:56 siat/capm_beta.py
--rw-rw-rw-  2.0 fat     1745 b- defN 22-Feb-09 12:40 siat/capm_beta_test.py
--rw-rw-rw-  2.0 fat    38116 b- defN 20-Apr-30 11:36 siat/cmat_commons.py
--rw-rw-rw-  2.0 fat    63743 b- defN 23-Apr-07 03:01 siat/common.py
--rw-rw-rw-  2.0 fat    20805 b- defN 23-Apr-08 15:16 siat/compare_cross.py
--rw-rw-rw-  2.0 fat     3473 b- defN 23-Apr-08 15:16 siat/compare_cross_test.py
--rw-rw-rw-  2.0 fat     3061 b- defN 20-Oct-28 13:43 siat/concepts_iwencai.py
--rw-rw-rw-  2.0 fat     4941 b- defN 20-Oct-28 14:21 siat/concepts_kpl.py
--rw-rw-rw-  2.0 fat      690 b- defN 21-Feb-15 16:46 siat/copyrights.py
--rw-rw-rw-  2.0 fat    27351 b- defN 21-Dec-07 09:29 siat/cryptocurrency.py
--rw-rw-rw-  2.0 fat     2669 b- defN 21-Dec-07 14:47 siat/cryptocurrency_test.py
--rw-rw-rw-  2.0 fat    41483 b- defN 20-Aug-13 03:32 siat/derivative.py
--rw-rw-rw-  2.0 fat    73848 b- defN 23-Jan-25 12:07 siat/economy-20230125.py
--rw-rw-rw-  2.0 fat    73720 b- defN 23-Mar-19 01:09 siat/economy.py
--rw-rw-rw-  2.0 fat    13339 b- defN 22-Jul-13 14:51 siat/economy_test.py
--rw-rw-rw-  2.0 fat    18941 b- defN 21-May-17 21:31 siat/esg.py
--rw-rw-rw-  2.0 fat     2944 b- defN 20-Sep-30 07:04 siat/esg_test.py
--rw-rw-rw-  2.0 fat    47177 b- defN 22-Nov-15 12:07 siat/fama_french.py
--rw-rw-rw-  2.0 fat     4678 b- defN 21-Nov-20 07:13 siat/fama_french_test.py
--rw-rw-rw-  2.0 fat    40695 b- defN 21-May-16 12:48 siat/financial_base.py
--rw-rw-rw-  2.0 fat    21528 b- defN 21-Jul-18 11:42 siat/financial_statements.py
--rw-rw-rw-  2.0 fat      716 b- defN 21-May-19 05:32 siat/financial_statements_test.py
--rw-rw-rw-  2.0 fat    76676 b- defN 22-Nov-27 02:21 siat/financials.py
--rw-rw-rw-  2.0 fat   105509 b- defN 23-Apr-08 16:27 siat/financials_china.py
--rw-rw-rw-  2.0 fat    57998 b- defN 23-Feb-27 05:23 siat/financials_china2.py
--rw-rw-rw-  2.0 fat     2722 b- defN 22-May-23 09:18 siat/financials_china2_test.py
--rw-rw-rw-  2.0 fat     3507 b- defN 22-May-21 16:15 siat/financials_china2_test2.py
--rw-rw-rw-  2.0 fat     3118 b- defN 22-May-22 12:59 siat/financials_china2_test3.py
--rw-rw-rw-  2.0 fat    17549 b- defN 23-Apr-08 16:32 siat/financials_china_test.py
--rw-rw-rw-  2.0 fat    23829 b- defN 22-Jul-02 16:07 siat/financials_test.py
--rw-rw-rw-  2.0 fat     1201 b- defN 21-Nov-24 03:16 siat/fred_test.py
--rw-rw-rw-  2.0 fat    24637 b- defN 20-Oct-19 12:31 siat/fund.py
--rw-rw-rw-  2.0 fat    66934 b- defN 23-Feb-15 05:50 siat/fund_china.py
--rw-rw-rw-  2.0 fat     6649 b- defN 22-Apr-14 12:20 siat/fund_china_test.py
--rw-rw-rw-  2.0 fat     1116 b- defN 20-Oct-19 12:29 siat/fund_test.py
--rw-rw-rw-  2.0 fat    16442 b- defN 23-Jan-20 15:20 siat/future_china.py
--rw-rw-rw-  2.0 fat     1163 b- defN 22-Feb-04 16:59 siat/future_china_test.py
--rw-rw-rw-  2.0 fat     2402 b- defN 21-Nov-24 02:14 siat/global_index_test.py
--rw-rw-rw-  2.0 fat    63490 b- defN 23-Mar-14 03:03 siat/grafix.py
--rw-rw-rw-  2.0 fat     3150 b- defN 22-Jun-25 09:45 siat/grafix_test.py
--rw-rw-rw-  2.0 fat    30544 b- defN 23-Feb-07 11:26 siat/holding_risk.py
--rw-rw-rw-  2.0 fat      474 b- defN 22-Apr-18 13:14 siat/holding_risk_test.py
--rw-rw-rw-  2.0 fat     3936 b- defN 21-Dec-20 12:37 siat/local_debug_test.py
--rw-rw-rw-  2.0 fat    31158 b- defN 22-Dec-19 07:40 siat/market_china.py
--rw-rw-rw-  2.0 fat    92545 b- defN 23-Apr-08 12:57 siat/markowitz.py
--rw-rw-rw-  2.0 fat     1593 b- defN 22-Jul-02 14:37 siat/markowitz_ccb_test.py
--rw-rw-rw-  2.0 fat     4032 b- defN 21-Dec-02 16:51 siat/markowitz_ef_test.py
--rw-rw-rw-  2.0 fat    33046 b- defN 21-Nov-30 12:09 siat/markowitz_old.py
--rw-rw-rw-  2.0 fat     5818 b- defN 21-Dec-05 17:36 siat/markowitz_test.py
--rw-rw-rw-  2.0 fat    86874 b- defN 22-Oct-10 12:10 siat/ml_cases.py
--rw-rw-rw-  2.0 fat     1673 b- defN 22-Oct-10 12:14 siat/ml_cases_example1.py
--rw-rw-rw-  2.0 fat    92393 b- defN 23-Mar-05 06:28 siat/option_china.py
--rw-rw-rw-  2.0 fat    16355 b- defN 22-Feb-05 14:06 siat/option_china_test.py
--rw-rw-rw-  2.0 fat    69625 b- defN 23-Mar-04 14:28 siat/option_pricing.py
--rw-rw-rw-  2.0 fat     2203 b- defN 21-Nov-21 10:40 siat/option_pricing_test.py
--rw-rw-rw-  2.0 fat     5908 b- defN 21-Nov-22 09:45 siat/option_sina_api_test.py
--rw-rw-rw-  2.0 fat     2610 b- defN 21-Nov-05 03:17 siat/proxy_test.py
--rw-rw-rw-  2.0 fat     1552 b- defN 21-Nov-08 07:54 siat/quandl_test.py
--rw-rw-rw-  2.0 fat    49073 b- defN 23-Apr-07 02:58 siat/risk_adjusted_return.py
--rw-rw-rw-  2.0 fat     3416 b- defN 22-Feb-08 13:55 siat/risk_adjusted_return_test.py
--rw-rw-rw-  2.0 fat    75061 b- defN 23-Feb-08 02:59 siat/risk_evaluation.py
--rw-rw-rw-  2.0 fat     3731 b- defN 21-Nov-23 05:24 siat/risk_evaluation_test.py
--rw-rw-rw-  2.0 fat    12304 b- defN 21-May-16 12:52 siat/risk_free_rate.py
--rw-rw-rw-  2.0 fat     4285 b- defN 21-Feb-07 14:07 siat/risk_free_rate_test.py
--rw-rw-rw-  2.0 fat    93536 b- defN 23-Apr-05 10:51 siat/sector_china.py
--rw-rw-rw-  2.0 fat     4210 b- defN 21-Apr-12 14:26 siat/sector_china_test.py
--rw-rw-rw-  2.0 fat    29148 b- defN 20-Aug-13 03:41 siat/security_price.py
--rw-rw-rw-  2.0 fat    71984 b- defN 23-Mar-22 15:31 siat/security_prices.py
--rw-rw-rw-  2.0 fat    10779 b- defN 22-Apr-15 14:56 siat/security_prices_test.py
--rw-rw-rw-  2.0 fat     1335 b- defN 20-Aug-13 05:31 siat/setup.py
--rw-rw-rw-  2.0 fat     1418 b- defN 22-Nov-17 01:20 siat/shenwan index history test.py
--rw-rw-rw-  2.0 fat   117254 b- defN 23-Apr-07 03:21 siat/stock.py
--rw-rw-rw-  2.0 fat    31655 b- defN 22-Oct-10 12:18 siat/stock_advice_linear.py
--rw-rw-rw-  2.0 fat     1312 b- defN 21-Feb-16 03:29 siat/stock_base.py
--rw-rw-rw-  2.0 fat    68123 b- defN 23-Apr-04 07:09 siat/stock_china.py
--rw-rw-rw-  2.0 fat     1276 b- defN 21-May-17 02:23 siat/stock_china_test.py
--rw-rw-rw-  2.0 fat  1242926 b- defN 21-Nov-07 12:36 siat/stock_info.pickle
--rw-rw-rw-  2.0 fat     6122 b- defN 21-Nov-08 02:51 siat/stock_info_test.py
--rw-rw-rw-  2.0 fat     1014 b- defN 20-Oct-21 16:54 siat/stock_list_china_test.py
--rw-rw-rw-  2.0 fat    36738 b- defN 22-Oct-10 12:19 siat/stock_prices_kneighbors.py
--rw-rw-rw-  2.0 fat    13991 b- defN 22-Oct-10 13:02 siat/stock_prices_linear.py
--rw-rw-rw-  2.0 fat    25017 b- defN 20-Aug-13 04:56 siat/stock_profile.py
--rw-rw-rw-  2.0 fat    72626 b- defN 23-Feb-02 12:43 siat/stock_technical.py
--rw-rw-rw-  2.0 fat    19475 b- defN 22-Aug-02 15:06 siat/stock_test.py
--rw-rw-rw-  2.0 fat     1571 b- defN 22-Oct-09 14:52 siat/temp.py
--rw-rw-rw-  2.0 fat    14492 b- defN 23-Apr-06 08:44 siat/transaction.py
--rw-rw-rw-  2.0 fat    18580 b- defN 22-Jun-28 06:08 siat/transaction_test.py
--rw-rw-rw-  2.0 fat   117953 b- defN 23-Jan-17 15:22 siat/translate-20230125.py
--rw-rw-rw-  2.0 fat   118133 b- defN 23-Feb-06 05:45 siat/translate-20230206.py
--rw-rw-rw-  2.0 fat   121657 b- defN 23-Feb-14 15:59 siat/translate-20230215.py
--rw-rw-rw-  2.0 fat   124748 b- defN 23-Apr-04 06:59 siat/translate.py
--rw-rw-rw-  2.0 fat     3936 b- defN 21-Dec-20 12:37 siat/universal_test.py
--rw-rw-rw-  2.0 fat    51268 b- defN 23-Mar-31 05:22 siat/valuation_china.py
--rw-rw-rw-  2.0 fat     1571 b- defN 22-Oct-09 14:52 siat/valuation_market_china_test.py
--rw-rw-rw-  2.0 fat    14859 b- defN 23-Mar-08 12:59 siat/var_model_validation.py
--rw-rw-rw-  2.0 fat     1399 b- defN 23-Apr-08 16:33 siat-1.8.2.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Apr-08 16:33 siat-1.8.2.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        5 b- defN 23-Apr-08 16:33 siat-1.8.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     8926 b- defN 23-Apr-08 16:33 siat-1.8.2.dist-info/RECORD
-112 files, 4328720 bytes uncompressed, 1087064 bytes compressed:  74.9%
+Zip file size: 1104380 bytes, number of entries: 113
+-rw-rw-rw-  2.0 fat      840 b- defN 23-Apr-10 11:29 siat/__init__.py
+-rw-rw-rw-  2.0 fat     2130 b- defN 23-Apr-10 11:29 siat/allin.py
+-rw-rw-rw-  2.0 fat      747 b- defN 23-Apr-10 11:29 siat/alpha_vantage_test.py
+-rw-rw-rw-  2.0 fat    28555 b- defN 23-Apr-10 11:29 siat/assets_liquidity.py
+-rw-rw-rw-  2.0 fat     1285 b- defN 23-Apr-10 11:29 siat/assets_liquidity_test.py
+-rw-rw-rw-  2.0 fat    10110 b- defN 23-Apr-10 11:29 siat/barrons_scraping_test.py
+-rw-rw-rw-  2.0 fat    36597 b- defN 23-Apr-10 11:29 siat/beta_adjustment.py
+-rw-rw-rw-  2.0 fat    20433 b- defN 23-Apr-10 11:29 siat/beta_adjustment_china.py
+-rw-rw-rw-  2.0 fat     2467 b- defN 23-Apr-10 11:29 siat/beta_adjustment_test.py
+-rw-rw-rw-  2.0 fat     6032 b- defN 23-Apr-10 11:29 siat/blockchain.py
+-rw-rw-rw-  2.0 fat    98531 b- defN 23-Apr-10 11:29 siat/bond.py
+-rw-rw-rw-  2.0 fat    24155 b- defN 23-Apr-10 11:29 siat/bond_base.py
+-rw-rw-rw-  2.0 fat     5246 b- defN 23-Apr-10 11:29 siat/bond_test.py
+-rw-rw-rw-  2.0 fat    28499 b- defN 23-Apr-10 11:29 siat/capm_beta.py
+-rw-rw-rw-  2.0 fat     1745 b- defN 23-Apr-10 11:29 siat/capm_beta_test.py
+-rw-rw-rw-  2.0 fat    38116 b- defN 23-Apr-10 11:29 siat/cmat_commons.py
+-rw-rw-rw-  2.0 fat    63743 b- defN 23-Apr-10 11:29 siat/common.py
+-rw-rw-rw-  2.0 fat    20806 b- defN 23-Apr-11 14:17 siat/compare_cross.py
+-rw-rw-rw-  2.0 fat     3473 b- defN 23-Apr-10 11:29 siat/compare_cross_test.py
+-rw-rw-rw-  2.0 fat     3061 b- defN 23-Apr-10 11:29 siat/concepts_iwencai.py
+-rw-rw-rw-  2.0 fat     4941 b- defN 23-Apr-10 11:29 siat/concepts_kpl.py
+-rw-rw-rw-  2.0 fat      690 b- defN 23-Apr-10 11:29 siat/copyrights.py
+-rw-rw-rw-  2.0 fat    27351 b- defN 23-Apr-10 11:29 siat/cryptocurrency.py
+-rw-rw-rw-  2.0 fat     2669 b- defN 23-Apr-10 11:29 siat/cryptocurrency_test.py
+-rw-rw-rw-  2.0 fat    41483 b- defN 23-Apr-10 11:29 siat/derivative.py
+-rw-rw-rw-  2.0 fat    73848 b- defN 23-Apr-10 11:29 siat/economy-20230125.py
+-rw-rw-rw-  2.0 fat    73720 b- defN 23-Apr-10 11:29 siat/economy.py
+-rw-rw-rw-  2.0 fat    13339 b- defN 23-Apr-10 11:29 siat/economy_test.py
+-rw-rw-rw-  2.0 fat    18941 b- defN 23-Apr-10 11:29 siat/esg.py
+-rw-rw-rw-  2.0 fat     2944 b- defN 23-Apr-10 11:29 siat/esg_test.py
+-rw-rw-rw-  2.0 fat    47177 b- defN 23-Apr-10 11:29 siat/fama_french.py
+-rw-rw-rw-  2.0 fat     4678 b- defN 23-Apr-10 11:29 siat/fama_french_test.py
+-rw-rw-rw-  2.0 fat    40695 b- defN 23-Apr-10 11:29 siat/financial_base.py
+-rw-rw-rw-  2.0 fat    21528 b- defN 23-Apr-10 11:29 siat/financial_statements.py
+-rw-rw-rw-  2.0 fat      716 b- defN 23-Apr-10 11:29 siat/financial_statements_test.py
+-rw-rw-rw-  2.0 fat    76676 b- defN 23-Apr-10 11:29 siat/financials.py
+-rw-rw-rw-  2.0 fat   105509 b- defN 23-Apr-10 11:29 siat/financials_china.py
+-rw-rw-rw-  2.0 fat    57998 b- defN 23-Apr-10 11:29 siat/financials_china2.py
+-rw-rw-rw-  2.0 fat     2722 b- defN 23-Apr-10 11:29 siat/financials_china2_test.py
+-rw-rw-rw-  2.0 fat     3507 b- defN 23-Apr-10 11:29 siat/financials_china2_test2.py
+-rw-rw-rw-  2.0 fat     3118 b- defN 23-Apr-10 11:29 siat/financials_china2_test3.py
+-rw-rw-rw-  2.0 fat    17549 b- defN 23-Apr-10 11:29 siat/financials_china_test.py
+-rw-rw-rw-  2.0 fat    23829 b- defN 23-Apr-10 11:29 siat/financials_test.py
+-rw-rw-rw-  2.0 fat     1201 b- defN 23-Apr-10 11:29 siat/fred_test.py
+-rw-rw-rw-  2.0 fat    24637 b- defN 23-Apr-10 11:29 siat/fund.py
+-rw-rw-rw-  2.0 fat    66934 b- defN 23-Apr-10 11:29 siat/fund_china.py
+-rw-rw-rw-  2.0 fat     6649 b- defN 23-Apr-10 11:29 siat/fund_china_test.py
+-rw-rw-rw-  2.0 fat     1116 b- defN 23-Apr-10 11:29 siat/fund_test.py
+-rw-rw-rw-  2.0 fat    16442 b- defN 23-Apr-10 11:29 siat/future_china.py
+-rw-rw-rw-  2.0 fat     1163 b- defN 23-Apr-10 11:29 siat/future_china_test.py
+-rw-rw-rw-  2.0 fat     2402 b- defN 23-Apr-10 11:29 siat/global_index_test.py
+-rw-rw-rw-  2.0 fat    63490 b- defN 23-Apr-10 11:29 siat/grafix.py
+-rw-rw-rw-  2.0 fat     3150 b- defN 23-Apr-10 11:29 siat/grafix_test.py
+-rw-rw-rw-  2.0 fat    30544 b- defN 23-Apr-10 11:29 siat/holding_risk.py
+-rw-rw-rw-  2.0 fat      474 b- defN 23-Apr-10 11:29 siat/holding_risk_test.py
+-rw-rw-rw-  2.0 fat     3936 b- defN 23-Apr-10 11:29 siat/local_debug_test.py
+-rw-rw-rw-  2.0 fat    31158 b- defN 23-Apr-10 11:29 siat/market_china.py
+-rw-rw-rw-  2.0 fat    95641 b- defN 23-Apr-10 13:16 siat/markowitz.py
+-rw-rw-rw-  2.0 fat     1593 b- defN 23-Apr-10 11:29 siat/markowitz_ccb_test.py
+-rw-rw-rw-  2.0 fat     4032 b- defN 23-Apr-10 11:29 siat/markowitz_ef_test.py
+-rw-rw-rw-  2.0 fat    33046 b- defN 23-Apr-10 11:29 siat/markowitz_old.py
+-rw-rw-rw-  2.0 fat     5818 b- defN 23-Apr-10 11:29 siat/markowitz_test.py
+-rw-rw-rw-  2.0 fat     2193 b- defN 23-Apr-11 06:52 siat/markowitz_test2.py
+-rw-rw-rw-  2.0 fat    86874 b- defN 23-Apr-10 11:29 siat/ml_cases.py
+-rw-rw-rw-  2.0 fat     1673 b- defN 23-Apr-10 11:29 siat/ml_cases_example1.py
+-rw-rw-rw-  2.0 fat    92393 b- defN 23-Apr-10 11:29 siat/option_china.py
+-rw-rw-rw-  2.0 fat    16355 b- defN 23-Apr-10 11:29 siat/option_china_test.py
+-rw-rw-rw-  2.0 fat    69625 b- defN 23-Apr-10 11:29 siat/option_pricing.py
+-rw-rw-rw-  2.0 fat     2203 b- defN 23-Apr-10 11:29 siat/option_pricing_test.py
+-rw-rw-rw-  2.0 fat     5908 b- defN 23-Apr-10 11:29 siat/option_sina_api_test.py
+-rw-rw-rw-  2.0 fat     2610 b- defN 23-Apr-10 11:29 siat/proxy_test.py
+-rw-rw-rw-  2.0 fat     1552 b- defN 23-Apr-10 11:29 siat/quandl_test.py
+-rw-rw-rw-  2.0 fat    49073 b- defN 23-Apr-10 11:29 siat/risk_adjusted_return.py
+-rw-rw-rw-  2.0 fat     3416 b- defN 23-Apr-10 11:29 siat/risk_adjusted_return_test.py
+-rw-rw-rw-  2.0 fat    75061 b- defN 23-Apr-10 11:29 siat/risk_evaluation.py
+-rw-rw-rw-  2.0 fat     3731 b- defN 23-Apr-10 11:29 siat/risk_evaluation_test.py
+-rw-rw-rw-  2.0 fat    12304 b- defN 23-Apr-10 11:29 siat/risk_free_rate.py
+-rw-rw-rw-  2.0 fat     4285 b- defN 23-Apr-10 11:29 siat/risk_free_rate_test.py
+-rw-rw-rw-  2.0 fat    99793 b- defN 23-Apr-11 14:03 siat/sector_china.py
+-rw-rw-rw-  2.0 fat     5843 b- defN 23-Apr-11 14:17 siat/sector_china_test.py
+-rw-rw-rw-  2.0 fat    29148 b- defN 23-Apr-10 11:29 siat/security_price.py
+-rw-rw-rw-  2.0 fat    71984 b- defN 23-Apr-10 11:29 siat/security_prices.py
+-rw-rw-rw-  2.0 fat    10779 b- defN 23-Apr-10 11:29 siat/security_prices_test.py
+-rw-rw-rw-  2.0 fat     1335 b- defN 23-Apr-10 11:29 siat/setup.py
+-rw-rw-rw-  2.0 fat     1418 b- defN 23-Apr-10 11:29 siat/shenwan index history test.py
+-rw-rw-rw-  2.0 fat   117254 b- defN 23-Apr-10 11:29 siat/stock.py
+-rw-rw-rw-  2.0 fat    31655 b- defN 23-Apr-10 11:29 siat/stock_advice_linear.py
+-rw-rw-rw-  2.0 fat     1312 b- defN 23-Apr-10 11:29 siat/stock_base.py
+-rw-rw-rw-  2.0 fat    68123 b- defN 23-Apr-10 11:29 siat/stock_china.py
+-rw-rw-rw-  2.0 fat     1276 b- defN 23-Apr-10 11:29 siat/stock_china_test.py
+-rw-rw-rw-  2.0 fat  1242926 b- defN 23-Apr-10 11:29 siat/stock_info.pickle
+-rw-rw-rw-  2.0 fat     6122 b- defN 23-Apr-10 11:29 siat/stock_info_test.py
+-rw-rw-rw-  2.0 fat     1014 b- defN 23-Apr-10 11:29 siat/stock_list_china_test.py
+-rw-rw-rw-  2.0 fat    36738 b- defN 23-Apr-10 11:29 siat/stock_prices_kneighbors.py
+-rw-rw-rw-  2.0 fat    13991 b- defN 23-Apr-10 11:29 siat/stock_prices_linear.py
+-rw-rw-rw-  2.0 fat    25017 b- defN 23-Apr-10 11:29 siat/stock_profile.py
+-rw-rw-rw-  2.0 fat    72626 b- defN 23-Apr-10 11:29 siat/stock_technical.py
+-rw-rw-rw-  2.0 fat    19475 b- defN 23-Apr-10 11:29 siat/stock_test.py
+-rw-rw-rw-  2.0 fat     1571 b- defN 23-Apr-10 11:29 siat/temp.py
+-rw-rw-rw-  2.0 fat    14492 b- defN 23-Apr-10 11:29 siat/transaction.py
+-rw-rw-rw-  2.0 fat    18580 b- defN 23-Apr-10 11:29 siat/transaction_test.py
+-rw-rw-rw-  2.0 fat   117953 b- defN 23-Apr-10 11:29 siat/translate-20230125.py
+-rw-rw-rw-  2.0 fat   118133 b- defN 23-Apr-10 11:29 siat/translate-20230206.py
+-rw-rw-rw-  2.0 fat   121657 b- defN 23-Apr-10 11:29 siat/translate-20230215.py
+-rw-rw-rw-  2.0 fat   124748 b- defN 23-Apr-10 11:29 siat/translate.py
+-rw-rw-rw-  2.0 fat     3936 b- defN 23-Apr-10 11:29 siat/universal_test.py
+-rw-rw-rw-  2.0 fat    51268 b- defN 23-Apr-10 11:29 siat/valuation_china.py
+-rw-rw-rw-  2.0 fat     1571 b- defN 23-Apr-10 11:29 siat/valuation_market_china_test.py
+-rw-rw-rw-  2.0 fat    14859 b- defN 23-Apr-10 11:29 siat/var_model_validation.py
+-rw-rw-rw-  2.0 fat     1399 b- defN 23-Apr-11 14:18 siat-1.8.3.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Apr-11 14:18 siat-1.8.3.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        5 b- defN 23-Apr-11 14:18 siat-1.8.3.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     9006 b- defN 23-Apr-11 14:18 siat-1.8.3.dist-info/RECORD
+113 files, 4341980 bytes uncompressed, 1090648 bytes compressed:  74.9%
```

## zipnote {}

```diff
@@ -180,14 +180,17 @@
 
 Filename: siat/markowitz_old.py
 Comment: 
 
 Filename: siat/markowitz_test.py
 Comment: 
 
+Filename: siat/markowitz_test2.py
+Comment: 
+
 Filename: siat/ml_cases.py
 Comment: 
 
 Filename: siat/ml_cases_example1.py
 Comment: 
 
 Filename: siat/option_china.py
@@ -318,20 +321,20 @@
 
 Filename: siat/valuation_market_china_test.py
 Comment: 
 
 Filename: siat/var_model_validation.py
 Comment: 
 
-Filename: siat-1.8.2.dist-info/METADATA
+Filename: siat-1.8.3.dist-info/METADATA
 Comment: 
 
-Filename: siat-1.8.2.dist-info/WHEEL
+Filename: siat-1.8.3.dist-info/WHEEL
 Comment: 
 
-Filename: siat-1.8.2.dist-info/top_level.txt
+Filename: siat-1.8.3.dist-info/top_level.txt
 Comment: 
 
-Filename: siat-1.8.2.dist-info/RECORD
+Filename: siat-1.8.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## siat/compare_cross.py

```diff
@@ -417,15 +417,15 @@
                    title_txt=title_txt,data_label=False)
 
     if printout:
         
         dfcols=list(df2)
         for c in dfcols:
             ccn=codetranslate(c)+'('+c+')'
-            df.rename(columns={c:ccn},inplace=True)
+            df2.rename(columns={c:ccn},inplace=True)
         
         if sortby=='tpw_mean':
             sortby_txt='按推荐标记+近期优先加权平均值降序排列'
         elif sortby=='min':
             sortby_txt='按推荐标记+最小值降序排列'
         elif sortby=='mean':
             sortby_txt='按推荐标记+平均值降序排列'
```

## siat/markowitz.py

```diff
@@ -246,32 +246,32 @@
     # 解构投资组合
     scope,_,tickerlist,sharelist0=decompose_portfolio(portfolio)
     pname=portfolio_name(portfolio)
 
     #如果持仓份额总数不为1，则将其转换为总份额为1
     import numpy as np
     totalshares=np.sum(sharelist0)
-    if abs(totalshares - 1) >= 0.000001:
-        print("\n  #Warning(portfolio_cumret): total weights is",totalshares,", it requires 1.0 here")
-        print("  Automatically converted into total weights 1")
+    if abs(totalshares - 1) >= 0.00001:
+        print("\n  #Warning(portfolio_cumret): total weights is",totalshares,"\b, expecting 1.0 here")
+        print("  Action: automatically converted into total weights 1.0")
         sharelist=list(sharelist0/totalshares) 
     else:
         sharelist=sharelist0
 
     #..........................................................................    
     # 计算历史数据的开始日期
     start=get_start_date(thedate,pastyears)
     
     #一次性获得无风险利率，传递给后续函数，避免后续每次获取，耗费时间  
     if RF:
         rf_df=get_rf_daily(start,thedate,scope,rate_period,rate_type)
         #结果字段中，RF是日利率百分比，rf_daily是日利率数值
         if rf_df is None:
             #print("  #Error(portfolio_cumret): failed to retrieve risk-free interest rate in",scope)
-            print("  Warning: all subsequent portfolio optimizations cannot proceed")
+            print("  #Warning: all subsequent portfolio optimizations cannot proceed")
             print("  Solution1: try again after until success to include risk-free interest rate in calculation")
             print("  Solution2: use RF=False in script command to ignore risk-free interest rate in calculation")
             return None
     else:
         rf_df=None
 
     #..........................................................................
@@ -292,15 +292,15 @@
         prices=get_prices_simple(tickerlist,start,thedate)
     else:
         with HiddenPrints():
             prices=get_prices_simple(tickerlist,start,thedate)
             ntickers=len(list(prices['Close']))
             nrecords=len(prices)
         #print("  Successfully retrieved",ntickers,"stocks with",nrecords,"record(s) respectively")
-        print("  Successfully retrieved prices of",ntickers,"stocks")
+        print("  Successfully retrieved prices of",ntickers,"stocks for",pname)
         
     if prices is None:
         print("  #Error(portfolio_cumret): failed to get portfolio prices",pname)
         return None
     if len(prices) == 0:
         print("  #Error(portfolio_cumret): retrieved empty prices for",pname)
         return None
@@ -1799,23 +1799,24 @@
     
     pf_info=portfolio_expret(portfolio,'2019-12-31')
     es_treynor=portfolio_es_treynor(pf_info,simulation=50000)
     
     MTR_weights,GMB2_weights,portfolio_returns=portfolio_optimize_treynor(es_treynor)
 
 #==============================================================================
+#==============================================================================
 if __name__=='__main__':
     ratio='sharpe'
     ratio='alpha'
     ratio='treynor'
     simulation=1000
     simulation=50000
 
 def portfolio_optimize_strategy(pf_info,ratio='sharpe',simulation=50000,RF=False, \
-                                graph=True,GMVS=True):
+                                graph=True,MSR_return=False,GMVS=True):
     """
     功能：集成式投资组合优化策略
     注意：实验发现RF对于结果的影响极其微小难以观察，默认设为不使用无风险利率调整收益
     """   
     
     ratio_list=['treynor','sharpe','sortino','alpha']
     if not (ratio in ratio_list):
@@ -1850,14 +1851,30 @@
         titletxt="Investment Portfolio Strategy: Performance Comparison"
         ylabeltxt="Holding Return"
     
     #打印投资组合构造和业绩表现
     hi_name=name_hiret+zhuhe_txt
     lo_name=name_lorisk+zhuhe_txt
     portfolio_expectation(hi_name,pf_info,hiret_weights)
+    
+    if MSR_return:
+        scope,mktidx,tickerlist,_=decompose_portfolio(portfolio)
+        hwdf=pd.DataFrame(hiret_weights)
+        hwdft=hwdf.T
+        hwdft.columns=tickerlist
+        hwdftt=hwdft.T
+        hwdftt.sort_values(by=[0],ascending=False,inplace=True)
+        hwdftt['ticker']=hwdftt.index
+        hwdftt['weight']=hwdftt[0].apply(lambda x:round(x,4))
+        stocks_new=hwdftt.set_index(['ticker'])['weight'].to_dict()
+        pname=portfolio_name(portfolio)
+        
+        Market={'Market':(scope,mktidx,pname)}
+        portfolio_new=dict(Market,**stocks_new)
+        
     if GMVS:
         portfolio_expectation(lo_name,pf_info,lorisk_weights)
 
     #现有投资组合的排名
     ranks=portfolio_ranks(portfolio_returns,pname)
 
     #绘制投资组合策略业绩比较曲线：最多显示4条曲线，否则黑白打印时无法区分
@@ -1868,22 +1885,25 @@
         else:
             break
     name_list=[pname,hi_name,lo_name,p]
     
     if graph:
         portfolio_expret_plot(portfolio_returns,name_list,titletxt=titletxt,ylabeltxt=ylabeltxt)
     
-    return 
-    
+    if MSR_return:
+        return portfolio_new
+    else:
+        return
     
 #==============================================================================
 #==============================================================================
 #==============================================================================
 #==============================================================================
 #==============================================================================
+#==============================================================================
 
 def translate_tickerlist(tickerlist):
     newlist=[]
     for t in tickerlist:
         name=codetranslate(t)
         newlist=newlist+[name]
         
@@ -2202,12 +2222,80 @@
     plt.xlabel(footnote1+footnote2+footnote3+footnote4,fontxlabel)
     #plt.xticks(rotation=45)
     plt.show()
     
     return df_coor
 
 #==============================================================================
+if __name__ =="__main__":
+    portfolio={'Market':('US','^GSPC','Test 1'),'EDU':0.4,'TAL':0.3,'TEDU':0.2}
+
+def describe_portfolio(portfolio):
+    """
+    功能：描述投资组合的信息
+    输入：投资组合
+    输出：市场，市场指数，股票代码列表和份额列表
+    """
+    
+    scope,mktidx,tickerlist,sharelist=decompose_portfolio(portfolio)
+    pname=portfolio_name(portfolio)
+    
+    print("*** 投资组合信息:",pname)
+    print("\n所在市场:",ectranslate(scope))
+    print("市场指数:",codetranslate(mktidx)+'('+mktidx+')')
+    print("成分股及其份额：")    
+
+    num=len(tickerlist)
+    #seqlist=[]
+    tickerlist1=[]
+    sharelist1=[]
+    for t in range(num):
+        #seqlist=seqlist+[t+1]
+        tickerlist1=tickerlist1+[codetranslate(tickerlist[t])+'('+tickerlist[t]+')']
+        sharelist1=sharelist1+[str(round(sharelist[t],2))+'%']
+
+    import pandas as pd
+    #df=pd.DataFrame({'序号':seqlist,'成分股':tickerlist1,'份额':sharelist1})    
+    df=pd.DataFrame({'成分股':tickerlist1,'份额':sharelist1})    
+    df.index=df.index+1
+    
+    alignlist=['center','left','right']
+    print(df.to_markdown(index=True,tablefmt='plain',colalign=alignlist))
+
+    return
+
+#==============================================================================    
+def portfolio_drop(portfolio,last=0,droplist=[],new_name=''):
+    """
+    功能：删除最后几个成分股
+    """
+    scope,mktidx,tickerlist,sharelist=decompose_portfolio(portfolio)  
+    pname=portfolio_name(portfolio)
+    
+    if not (last ==0):
+        for i in range(last):
+            #print(i)
+            tmp=tickerlist.pop()
+            tmp=sharelist.pop()
+
+    if not (droplist==[]):
+        for d in droplist:
+            pos=tickerlist.index(d)
+            tmp=tickerlist.pop(pos)
+            tmp=sharelist.pop(pos)
+        
+    stocks_new=dict(zip(tickerlist,sharelist))
+    
+    if new_name=='':
+        new_name=pname
+        
+    Market={'Market':(scope,mktidx,new_name)}
+    portfolio_new=dict(Market,**stocks_new)
+    
+    return portfolio_new
+
+#==============================================================================
 #==============================================================================
 #==============================================================================
 #==============================================================================
```

## siat/sector_china.py

```diff
@@ -1210,15 +1210,15 @@
     功能：遍历某类申万指数，下载数据
     itype: F表征指数，I行业指数，S风格指数
     period="day"; choice of {"day", "week", "month"}
     industry_list: 允许选择部分行业
     """
     
     #检查itype的合理性
-    typelist=['F','I','S','A']
+    typelist=['F','I','T','3','S','A']
     if not (itype in typelist):
         print("  #Error(get_industry_sw): unsupported industry category",itype)
         print("  Supported industry category",typelist)
         print("  F: Featured, I-Industry, S-Styled, A-All (more time))")
         return None
     
     #获得指数代码
@@ -1417,67 +1417,109 @@
     end='2022-10-31'
     idf,idfall=calc_industry_sw(df,start,end)
     
 #==============================================================================
 #==============================================================================
 if __name__=='__main__':
     measure='Exp Ret%'
+    industries=[]
     graph=True
     axisamp=0.8
-    
-def rank_industry_sw(idf,measure='Exp Ret%',graph=True,axisamp=0.8,px=False):
+    px=False
+    maxitems=32
+    printout=False
+    
+    industries=['801770','801720','医药生物']
+    
+def rank_industry_sw(idf,measure='Exp Ret%',industries=[], \
+                     graph=True,axisamp=0.8,px=False,maxitems=32, \
+                         printout=False):
     """
     功能：遍历某类申万指数的某项业绩指标，汇集排序
     绘图：水平柱状图
+    graph=True：是否绘图，一幅图最多绘制maxitems个项目
+    axisamp=0.9：调节水平柱子伸缩比例，数值越大越收缩，数值越小越放大，有时也需要负的数值
+    px=False：默认不使用plotly express
+    printout=False：是否打印结果清单
     """
-  
+    import pandas as pd
+    import datetime as dt
+    
+    idf['Date']= pd.to_datetime(idf.index) 
+    idf['end'] = idf['Date'].dt.strftime('%Y-%m-%d')    
+    
     #获得指标数据
     try:
-        gdf=idf[['ticker',measure,'start']]
+        gdf=idf[['ticker',measure,'start','end']]
         num1=len(gdf)
     except:
         print("  #Error(rank_industry_sw): unsupported measurement",measure)
         return None
 
     gdf.dropna(inplace=True)
     num2=len(gdf)
     if num2==0:
         print("  #Error(rank_industry_sw): no data found for",measure)
         return None
 
     if num2 < num1:
-        print("  #Warning(rank_industry_sw):",num1-num2,"industries removed since no data found for",measure)
+        print("  #Warning(rank_industry_sw):",num1-num2,"industries removed as no enough data found for",measure)
         
     gdf[measure]=gdf[measure].apply(lambda x: round(x,1))
     istart=gdf['start'].values[0]
     idate=gdf.index.values[0]
     idate=pd.to_datetime(idate)
     iend=idate.strftime('%Y-%m-%d')
 
     gdf['name']=gdf['ticker'].apply(lambda x: industry_sw_name(x))
     gdf.set_index('name',inplace=True)
     gdf.sort_values(by=measure,ascending=True,inplace=True)
-
-    if graph:
-        colname=measure
+    
+    if len(industries) > 0:
+        gdf1a=gdf[gdf.index.isin(industries)]
+        gdf1b=gdf[gdf.ticker.isin(industries)]
+        gdf1=pd.concat([gdf1a,gdf1b])
+        gdf1.sort_values(by=measure,ascending=True,inplace=True)
+    else:
+        gdf1=gdf
+    
+    if printout or graph:
         titletxt="行业板块分析：最新业绩排名"
         import datetime; today=datetime.date.today()
         footnote0=ectranslate(measure)+' -->\n\n'
         footnote1='申万行业分类，'+iend+'快照'
         footnote2='观察期：'+istart+'至'+iend+'，'
         footnote3="数据来源: 申万宏源, "+str(today)+'统计'
         footnote=footnote0+footnote1+'\n'+footnote2+footnote3
-        if not px:
-            footnote=footnote0+footnote1+'\n'+footnote2+footnote3
-            plot_barh(gdf,colname,titletxt,footnote,axisamp=axisamp)
-        else: #使用plotly_express
-            titletxt="行业板块业绩排名："+ectranslate(measure)
-            footnote=footnote1+'。'+footnote2+footnote3
-            plot_barh2(gdf,colname,titletxt,footnote)
+    
+    if printout or (len(gdf1) > maxitems):
+        gdf2=gdf1.sort_values(by=measure,ascending=False)
+        gdf2.reset_index(inplace=True)
+        gdf2.index=gdf2.index+1
+        gdf2.columns=['行业名称','行业代码',ectranslate(measure),'开始日期','结束日期']
+        
+        print("***",titletxt,'\n')
+        alignlist=['center']+['left']*(len(list(gdf2))-1)
+        print(gdf2.to_markdown(index=True,tablefmt='plain',colalign=alignlist))
+        
 
+    if graph:
+        if (len(gdf1) <= maxitems):
+            colname=measure
+            if not px:
+                footnote=footnote0+footnote1+'\n'+footnote2+footnote3
+                plot_barh(gdf1,colname,titletxt,footnote,axisamp=axisamp)
+            else: #使用plotly_express
+                titletxt="行业板块业绩排名："+ectranslate(measure)
+                footnote=footnote1+'。'+footnote2+footnote3
+                plot_barh2(gdf1,colname,titletxt,footnote)
+        else:
+            print("\n  #Sorry, there are too much items to be illustrated")
+            print("  Solution: select some of them and use the industries=[] option")
+            
     return gdf
     
 if __name__=='__main__':
     measure='Exp Ret%'
     axisamp=0.8
     
     gdf=analyze_industry_sw(idf,measure='Exp Ret%',axisamp=0.8)
@@ -1495,15 +1537,15 @@
     start='2020-11-1'
     end='2022-10-31'
     itype='I'
     period="day"
     graph=True
 
 def compare_mindustry_sw(industry_list,measure,start,end, \
-                         itype='I',period="day",graph=True):
+                         itype='I',period="day",graph=True,printout=False,sortby='tpw_mean'):
     """
     功能：比较多个行业industry_list某个指标measure在时间段start/end的时间序列趋势
     industry_list: 至少有两项，若太多了则生成的曲线过于密集
     特点：完整过程
     """ 
     """
     #检查行业代码的个数不少于两个
@@ -1567,44 +1609,71 @@
     iend=idate.strftime('%Y-%m-%d')
 
     #截取绘图区间
     result,istartpd,iendpd=check_period(istart,iend)
     dfs1=dfs[(dfs.index >= istartpd) & (dfs.index <= iendpd)]
     
     y_label=measure
+    title_txt="行业板块分析：市场业绩趋势与评价"
     import datetime; today = datetime.date.today()
     if graph:
         colname=measure
-        title_txt="行业板块分析：市场发展趋势"
+        
         import datetime; today=datetime.date.today()
         footnote1='\n申万行业分类，观察期：'+istart+'至'+iend+'\n'
         footnote2="数据来源: 申万宏源, "+str(today)+'统计'
         footnote=footnote1+footnote2
 
         draw_lines(dfs1,y_label,x_label=footnote, \
                    axhline_value=0,axhline_label='', \
                    title_txt=title_txt, \
                    data_label=False,resample_freq='H',smooth=True)
+
+    if printout:
+        df2=dfs1
+        dfcols=list(df2)
+        for c in dfcols:
+            ccn=codetranslate(c)+'('+c+')'
+            df2.rename(columns={c:ccn},inplace=True)
+        
+        if sortby=='tpw_mean':
+            sortby_txt='按推荐标记+近期优先加权平均值降序排列'
+        elif sortby=='min':
+            sortby_txt='按推荐标记+最小值降序排列'
+        elif sortby=='mean':
+            sortby_txt='按推荐标记+平均值降序排列'
+        elif sortby=='median':
+            sortby_txt='按推荐标记+中位数值降序排列'
+        else:
+            pass
+        
+        title_txt='*** '+title_txt+'：'+y_label+'，'+sortby_txt
+        additional_note="*** 注：列表仅显示有星号标记或特定数量的证券。"
+        footnote='比较期间：'+start+'至'+end
+        ds=descriptive_statistics(df2,title_txt,additional_note+footnote,decimals=4, \
+                               sortby=sortby,recommend_only=False)
     
     return dfs
     
 if __name__=='__main__':
     mdf=compare_mindustry_sw(industry_list,measure,start,end)
 
 #==============================================================================
 if __name__=='__main__':
     industry_list=['801050','801080']
     measure='Exp Ret%'
-    start='2020-11-1'
-    end='2022-10-31'
+    start='2023-1-1'
+    end='2023-4-11'
     period="day"
     graph=True
+    printout=False
+    sortby='tpw_mean'
 
 def compare_mindustry_sw2(industry_list,measure,start,end, \
-                         period="day",graph=True):
+                         period="day",graph=True,printout=False,sortby='tpw_mean'):
     """
     功能：比较多个行业industry_list某个指标measure在时间段start/end的时间序列趋势
     industry_list: 至少有两项，若太多了则生成的曲线过于密集
     特点：完整过程，无需规定申万行业类别；多个行业，单一指标
     """ 
     """
     #检查行业代码的个数不少于两个
@@ -1667,27 +1736,56 @@
     iend=idate.strftime('%Y-%m-%d')
 
     #截取绘图区间
     result,istartpd,iendpd=check_period(istart,iend)
     dfs1=dfs[(dfs.index >= istartpd) & (dfs.index <= iendpd)]
     
     y_label=measure
+    title_txt="行业(板块)分析：市场业绩趋势与评价"
     import datetime; today = datetime.date.today()
     if graph:
         colname=measure
         title_txt="行业(板块)分析：市场业绩趋势"
         import datetime; today=datetime.date.today()
         footnote1='\n申万行业分类，观察期：'+istart+'至'+iend+'\n'
         footnote2="数据来源: 申万宏源, "+str(today)+'统计'
         footnote=footnote1+footnote2
 
         draw_lines(dfs1,y_label,x_label=footnote, \
                    axhline_value=0,axhline_label='', \
                    title_txt=title_txt, \
                    data_label=False,resample_freq='H',smooth=True)
+
+    if printout:
+        df2=dfs1
+        dfcols=list(df2)
+        for c in dfcols:
+            cname=codetranslate(c)
+            if cname == c:
+                ccn=c
+            else:
+                ccn=cname+'('+c+')'
+                df2.rename(columns={c:ccn},inplace=True)
+        
+        if sortby=='tpw_mean':
+            sortby_txt='按推荐标记+近期优先加权平均值降序排列'
+        elif sortby=='min':
+            sortby_txt='按推荐标记+最小值降序排列'
+        elif sortby=='mean':
+            sortby_txt='按推荐标记+平均值降序排列'
+        elif sortby=='median':
+            sortby_txt='按推荐标记+中位数值降序排列'
+        else:
+            pass
+        
+        title_txt='*** '+title_txt+'：'+y_label+'，'+sortby_txt
+        additional_note="*** 注：列表仅显示有星号标记或特定数量的证券。"
+        footnote='比较期间：'+start+'至'+end
+        ds=descriptive_statistics(df2,title_txt,additional_note+footnote,decimals=4, \
+                               sortby=sortby,recommend_only=False)
     
     return dfs
     
 if __name__=='__main__':
     mdf=compare_mindustry_sw2(industry_list,measure,start,end)
 
 #==============================================================================
@@ -1977,18 +2075,20 @@
 if __name__=='__main__':
     clist,cdf=industry_stock_sw(industry='801005',top=10)
     clist,cdf=industry_stock_sw(industry='850831',top=-10)
 #==============================================================================
 if __name__ =="__main__":
     
     # 新冠疫情三年
-    start='2020-2-1'; end='2022-12-20'
-    idf,idfall=get_industry_info_sw(start,end)
+    start='2023-1-1'; end='2023-4-10'
+    itype='T'
+    
+    idf,idfall=get_industry_info_sw(start,end,itype='I')
 
-def get_industry_info_sw(start,end):
+def get_industry_info_sw(start,end,itype='I'):
     """
     功能：获得申万行业历史数据
     start: 开始日期
     end: 结束日期
     
     返回：idf, idfall，供进一步分析使用。
     """
@@ -1998,15 +2098,15 @@
     if not result:
         print("  #Error(get_industry_info_sw): invalid date period from",start,'to',end)
         return None,None
     
     print("This may need great great time depending on network/computer speed, take a break ...")
     print("\n*** Step 1:")
     # 获取行业历史数据，本步骤所需时间较长
-    df=get_industry_sw('I')
+    df=get_industry_sw(itype=itype)
     
     print("\n*** Step 2:")
     # 计算基础数据，本步骤所需时间较长
     idf,idfall=calc_industry_sw(df,start,end)
     
     return idf,idfall    
 
@@ -2153,15 +2253,16 @@
     
     df=get_industry_sw('I')
     df=industry_correlation_sw(df,tickers,start,end,info_type='Close')
 
 def cm2inch(x,y):
     return x/2.54,y/2.54
 
-def industry_correlation_sw(df,tickers,start,end,info_type='Close'):
+def industry_correlation_sw(df,tickers,start,end, \
+                            info_type='Close',corr_size=6,star_size=5):
     """
     功能：股票/指数收盘价之间的相关性
     info_type='Close': 默认Close, 还可为Open/High/Low/Volume
     """
     # 检查行业个数
     if not isinstance(tickers,list) or len(tickers) < 2:
         print("  #Error(industry_correlation_sw): number of industries too few",tickers)
@@ -2227,15 +2328,15 @@
     mask2 = mask
     mask = (np.flipud(mask)-1)*(-1)
     mask = np.rot90(mask,k = -1)
     
     im1 = sns.heatmap(df_coor,annot=True,cmap="YlGnBu"
                         , mask=mask#构造mask，去除重复数据显示
                         ,vmax=1,vmin=-1
-                        , fmt='.2f',ax = ax1,annot_kws={"size": 6})
+                        , fmt='.2f',ax = ax1,annot_kws={"size":corr_size})
     
     ax1.tick_params(axis = 'both', length=0)
     
     #计算相关性显著性并显示
     from scipy.stats import pearsonr
     rlist = []
     plist = []
@@ -2250,15 +2351,15 @@
     xlist = ax1.get_xticks()
     ylist = ax1.get_yticks()
     
     widthx = 0
     widthy = -0.15
     
     # 星号的大小
-    font_dict={'size':5}
+    font_dict={'size':star_size}
     
     for m in ax1.get_xticks():
         for n in ax1.get_yticks():
             pv = (parr[int(m),int(n)])
             rv = (rarr[int(m),int(n)])
             if mask2[int(m),int(n)]<1.:
                 #if abs(rv) > 0.5:
@@ -2275,31 +2376,84 @@
                         ax1.text(n+widthx,m+widthy,'*',ha = 'center',color = 'k',fontdict=font_dict)
                     elif  pv< 0.01 and pv>= 0.001:
                         ax1.text(n+widthx,m+widthy,'**',ha = 'center',color = 'k',fontdict=font_dict)
                     elif  pv< 0.001:
                         ax1.text(n+widthx,m+widthy,'***',ha = 'center',color = 'k',fontdict=font_dict)
     
     plt.title("行业板块"+info_type_cn+"之间的相关性")
-    plt.tick_params(labelsize=6)
+    plt.tick_params(labelsize=corr_size)
     
     footnote1="\n显著性数值：***非常显著(<0.001)，**很显著(<0.01)，*显著(<0.05)，其余为不显著"
     footnote2="\n系数绝对值：>=0.8极强相关，0.6-0.8强相关，0.4-0.6相关，0.2-0.4弱相关，否则为极弱(不)相关"
 
     footnote3="\n观察期间: "+start+'至'+end
     import datetime as dt; stoday=dt.date.today()    
     footnote4="；来源：Sina/EM，"+str(stoday)+"；基于申万行业分类"
     
-    fontxlabel={'size':6}
+    fontxlabel={'size':corr_size}
     plt.xlabel(footnote1+footnote2+footnote3+footnote4,fontxlabel)
     plt.show()
     
     return df_coor
 
 #==============================================================================
 #==============================================================================
+if __name__=='__main__':
+    industries=['煤炭','医药生物','801750']
+    top=10
+    printout=True
+
+def mixed_industry_stocks(industries=['煤炭','医药生物'],top=10,printout=True):
+    """
+    功能：将不同行业指数(industries)中的前top个(按指数内权重降序)成分股合成为字典，等权重
+    """
+    
+    # 将行业列表转换为行业代码列表
+    industries1=[]
+    for i in industries:
+        if i.isdigit():
+            industries1=industries1+[i]
+        else:
+            industries1=industries1+[industry_sw_code(i)]
+            
+    # 抓取行业内成分股。合并
+    import pandas as pd
+    df=pd.DataFrame()
+    for i in industries1:
+        _,dft=industry_stock_sw(industry=i,top=top,printout=False)
+        dft['行业代码']=i
+        dft['行业名称']=industry_sw_name(i)
+        
+        if len(df)==0:
+            df=dft
+        else:
+            df=pd.concat([df,dft])
+            
+    # 去掉重复的股票（假设可能有一只股票被计入多个指数）
+    df.drop_duplicates(subset=['证券代码'], keep='first', inplace=True)
+    df['初始权重']=round(1.0 / len(df),4)
+    df.reset_index(drop=True,inplace=True)
+    df['序号']=df.index+1
+    
+    df_print=df[['序号','证券名称','证券代码','初始权重','行业名称','行业代码']]
+    
+    if printout:
+        alignlist=['center']+['center']*(len(list(df_print))-1)
+        
+        print("\n*** 混合行业投资组合的成分股：初始等权重\n")
+        print(df_print.to_markdown(index=False,tablefmt='plain',colalign=alignlist))
+        import datetime; today=datetime.date.today()
+        print("\n*** 数据来源：申万宏源，统计日期："+str(today))
+    
+    # 生成成分股字典
+    stock_dict=df.set_index(['证券代码'])['初始权重'].to_dict()
+
+    return stock_dict    
+#==============================================================================
+#==============================================================================
 #==============================================================================
 #==============================================================================
 
 
 
 #==============================================================================
```

## siat/sector_china_test.py

```diff
@@ -1,13 +1,66 @@
 # -*- coding: utf-8 -*-
 
-
 import os; os.chdir("S:\siat")
 from siat.sector_china import *
 
+#==============================================================================
+
+# 设定观察期：近三年
+start='2020-1-1'; end='2022-12-31'
+
+# 收集行业市场业绩数据：一级行业，本案例重点
+idf1,idfall1=get_industry_info_sw(start,end,itype='I')
+
+# 投资收益率（持有收益率）
+df1=rank_industry_sw(idf1,
+                     measure='Exp Ret%',
+                     graph=True,
+                     axisamp=0.9,
+                     printout=True,
+                    )
+
+industry_list=['801730',
+               '801950',
+               '801210',
+               '801050',
+               '801030',
+               '801120',
+               '801230',
+               '801880',
+               '801740',
+               '801890',
+               '801150',
+               '801160',
+               '801040',
+               '801140',
+               '801080',
+              ]
+
+mdf=compare_mindustry_sw(industry_list,
+                         measure='Exp Ret%',
+                         start=start,end=end,
+                         itype='I',#检查范围是一级行业
+                         graph=False,
+                         printout=True,
+                        )
+
+mdf2=compare_mindustry_sw2(industry_list,
+                         measure='Exp Ret%',
+                         start=start,end=end,
+                         #itype='I',#检查范围是一级行业
+                         graph=False,
+                         printout=True,
+                        )
+
+
+
+
+
+#==============================================================================
 df=sector_position_china('000661',"gn_swym")
 
 df=sector_position_china('000661',"new_swzz")
 df=sector_position_china('000661',"hangye_ZC27")
```

## Comparing `siat-1.8.2.dist-info/METADATA` & `siat-1.8.3.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: siat
-Version: 1.8.2
+Version: 1.8.3
 Summary: Securities Investment Analysis Tools (siat)
 Home-page: https://pypi.org/project/siat/
 Author: Prof. WANG Dehong, Business School, BFSU (北京外国语大学 国际商学院 王德宏 教授)
 Author-email: wdehong2000@163.com
 License: Copyright (C) WANG Dehong, 2023. For educational purpose only!
 Platform: UNKNOWN
 Requires-Dist: pandas-datareader
```

## Comparing `siat-1.8.2.dist-info/RECORD` & `siat-1.8.3.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -11,15 +11,15 @@
 siat/bond.py,sha256=gYaS9pDBnYRsJCXNqx6lj1mfF8j-7TV1O5ZAwDhcWB0,98531
 siat/bond_base.py,sha256=mY1TscUH2kWzsR3Cnh5ea0Xu7-Nc8ZyFupraRipi4BM,24155
 siat/bond_test.py,sha256=yUOFw7ddGU-kb1rJdnsjkJWziDNgUR7OLDA7F7Ub91A,5246
 siat/capm_beta.py,sha256=L40UbrSU4QQ5CxmEu8CpLT5WptsOUOfDRF7Pxdw6HZs,28499
 siat/capm_beta_test.py,sha256=ImR0c5mc4hIl714XmHztdl7qg8v1E2lycKyiqnFj6qs,1745
 siat/cmat_commons.py,sha256=Nj9Kf0alywaztVoMVeVVL_EZk5jRERJy8R8kBw88_Tg,38116
 siat/common.py,sha256=3qyrC3lAxD-nZ8nXW8rzZi9luUmgNV-pY1dj7Mz88OQ,63743
-siat/compare_cross.py,sha256=vQOrtb3n5yIGSQwTiOakNiU_vR-ksgeBXajV5SirJko,20805
+siat/compare_cross.py,sha256=XXLLBFz66vkrup50ehyP7jR5IyHUB3zqEJGCzWibVYw,20806
 siat/compare_cross_test.py,sha256=xra5XYmQGEtfIZL2h-GssdH2hLdFIhG3eoCrkDrL3gY,3473
 siat/concepts_iwencai.py,sha256=m1YEDtECRT6FqtzlKm91pt2I9d3Z_XoP59BtWdRdu8I,3061
 siat/concepts_kpl.py,sha256=SJ9UaJp5i79EXKZ3dPa_vBEoG_zgl1Ig5rZAm-ubgM4,4941
 siat/copyrights.py,sha256=YMLjZb328YpFMR-s_GUu0HBgeGce3pV7DgRut8S3I7w,690
 siat/cryptocurrency.py,sha256=SKh_S85cqd2tRgKBKls1Fpd6HdFd9JfmUTCa2e3mpsE,27351
 siat/cryptocurrency_test.py,sha256=3AikTNJ7j-HwLGLIYEfyXZ3bLVuLeru9mwiwHQi2SdA,2669
 siat/derivative.py,sha256=qV8n09799eqLc26ojR6vN5n_X-xd7rGwdYjgq-wBih8,41483
@@ -51,19 +51,20 @@
 siat/global_index_test.py,sha256=hnFp3wqqzzL-kAP8mgxDZ54Bd5Ijf6ENi5YJlGBgcXw,2402
 siat/grafix.py,sha256=dRPQM6ZjGWrQqa2u4h0GZpQptK-1bUZR5HTaeSslZM4,63490
 siat/grafix_test.py,sha256=kXvcpLgQNO7wd30g_bWljLj5UH7bIVI0_dUtXbfiKR0,3150
 siat/holding_risk.py,sha256=108tiI7DDl8uUZkyUiq6Y-McKeim1mxYsgqgk7CcXw8,30544
 siat/holding_risk_test.py,sha256=FRlw_9wFG98BYcg_cSj95HX5WZ1TvkGaOUdXD7-V86s,474
 siat/local_debug_test.py,sha256=CDAOffW1Rvs-TcNN5giWVvHMlch1w4dp-w5SIV9jXL0,3936
 siat/market_china.py,sha256=2_ov1KQwRtHQ6PXNO1TS4-wUPhBuoWla326g0x_xUgQ,31158
-siat/markowitz.py,sha256=T_gvMtqe8V3TgQqRuzjkrVMOJYwSbRqRHJAU18kOiDg,92545
+siat/markowitz.py,sha256=g3P-UripHV_VwtQetdGaPtfmRsFUxQICqmtF4Pp6C3k,95641
 siat/markowitz_ccb_test.py,sha256=xBkkoaNHdq9KSUrNuHGgKTdNYUvgi84kNYcf719eoyE,1593
 siat/markowitz_ef_test.py,sha256=wjNlICkgRIqnonPeSIHo4Mu2GRtb9dr21wDt2kMNEcI,4032
 siat/markowitz_old.py,sha256=Lf7O_4QWT8RsdkHiUyc_7kKY3eZjKDtFR89Fz3pwYnY,33046
 siat/markowitz_test.py,sha256=fDXoPp6DrKeneYjd0lbb0KfYUJj-VcOvVaPlfsIOstw,5818
+siat/markowitz_test2.py,sha256=FcVZqYU5va4567WGUVUJ7cMQdVbBGxeBAz82Y3BhCTI,2193
 siat/ml_cases.py,sha256=FYDk0O7l9hhHlbrlOVGgbH-h2DA503lhKFi9XugH1f0,86874
 siat/ml_cases_example1.py,sha256=xRGb3YTQEDTOnaWNzZN_myU5umQnA2RdMNiPrxTmn9c,1673
 siat/option_china.py,sha256=NHonANLpJdQTs6EjQwXtyhpdKYiGocYQ2vElW_Wlur0,92393
 siat/option_china_test.py,sha256=UQ-YUHUjoGBQyanLcM-yzqeEIUQP_gCQIeT0W6rnUnA,16355
 siat/option_pricing.py,sha256=ZvOziCkXODUjqSw2Q7Ux_gepw9UQaGMgvbI_YuceyX8,69625
 siat/option_pricing_test.py,sha256=eeorV5Ja5vjlRXnP6fWJHetGU5Vb8SnLopkC6RV3GfA,2203
 siat/option_sina_api_test.py,sha256=dn-k_wrQnAaNKHoROvWJEc7lqlU0bwiV2Aa4usWAFGM,5908
@@ -71,16 +72,16 @@
 siat/quandl_test.py,sha256=EcPoXnLuqzPl5dKyVEZi3j3PJZFpsnU_iNPhLWC9p-A,1552
 siat/risk_adjusted_return.py,sha256=8vyjOCap9xEvWIpJnBEsDm8Ba3CD9QrEXy2qFG6zvVk,49073
 siat/risk_adjusted_return_test.py,sha256=m_VHL5AtT74cJv5i7taTeTfnkX48y0AFJk5phawyYWg,3416
 siat/risk_evaluation.py,sha256=lCDqCaSEppH0MFPFg-P14IYcF3IJqILbPfDmzf_AfcY,75061
 siat/risk_evaluation_test.py,sha256=YEXM96gKzTfwN4U61AS4Rr1tV7KgUvn4rRC6f3iMw9s,3731
 siat/risk_free_rate.py,sha256=r62zCl1qbI4lJU17GsgM-OmVx9oo3dltXeZVCNd6Uxg,12304
 siat/risk_free_rate_test.py,sha256=CpmhUf8aEAEZeNu4gvWP2Mz2dLoIgBX5bI41vfUBEr8,4285
-siat/sector_china.py,sha256=kcAgZig4MW-k6eJX-0B1uh2yhAvzzWsPKgqQdztyynI,93536
-siat/sector_china_test.py,sha256=tvFQYptmj7jq6H5kNaRJtcP5Wgb-eWvaoSl33Y47ZsM,4210
+siat/sector_china.py,sha256=xhwTpupB-QrBHVrk_GZD00w3U3WPcnsqIYKhdHG8kRQ,99793
+siat/sector_china_test.py,sha256=1wq7ef8Bb_L8F0h0W6FvyBrIcBTEbrTV7hljtpj49U4,5843
 siat/security_price.py,sha256=ibrdUJyt_n0c8oKRbVStE1_ptmWkzy4YIHjpc_fGiPQ,29148
 siat/security_prices.py,sha256=Xl7EHz16qCUIzuPGpEi-g-tLGQKk3MqHmic556-Vs7U,71984
 siat/security_prices_test.py,sha256=OEphoJ87NPKoNow1QA8EU_5MUYrJF-qKoWKNapVfZNI,10779
 siat/setup.py,sha256=up65rQGLmTBkhtaMLowjoQXYmIsnycnm4g1SYmeQS6o,1335
 siat/shenwan index history test.py,sha256=JCVAzOSEldHalhSFa3pqD8JI_8_djPMQOxpkuYU-Esg,1418
 siat/stock.py,sha256=kW_R_CW9WbR0bzwwUlFwvWh0oJE3zA8gfKw_AJUWfCo,117254
 siat/stock_advice_linear.py,sha256=-twT7IGP-NEplkL1WPSACcNJjggRB2j4mlAQCkzOAuo,31655
@@ -102,11 +103,11 @@
 siat/translate-20230206.py,sha256=-vtI125WyaJhmPotOpDAmclt_XnYVaWU9ByLWZ6FyYE,118133
 siat/translate-20230215.py,sha256=TJgtPE3n8IjljmZ4Pefy8dmHoNdFF-1zpML6BhA9FKE,121657
 siat/translate.py,sha256=-7-R7pLutkOVur5O0ihj3-_XyoWRF2VAJRorIsiZJVQ,124748
 siat/universal_test.py,sha256=CDAOffW1Rvs-TcNN5giWVvHMlch1w4dp-w5SIV9jXL0,3936
 siat/valuation_china.py,sha256=J78FTnwyzOjNENq30MXaQdby6EtcBZi3AMeUKhGtuok,51268
 siat/valuation_market_china_test.py,sha256=gbJ0ioauuo4koTPH6WKUkqcXiQPafnbhU5eKJ6lpdLA,1571
 siat/var_model_validation.py,sha256=zB_Skk_tmzIR15l6oAW3am4HBGVIG-eZ8gJhCdXZ8Qw,14859
-siat-1.8.2.dist-info/METADATA,sha256=U7W2Dip8PtbXg5Ln0l-a1dbZkzYd1Unn6sNmcqxQLS0,1399
-siat-1.8.2.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-siat-1.8.2.dist-info/top_level.txt,sha256=r1cVyL7AIKqeAmEJjNR8FMT20OmEzufDstC2gv3NvEY,5
-siat-1.8.2.dist-info/RECORD,,
+siat-1.8.3.dist-info/METADATA,sha256=9-DknbuicolL6WjI6XgaguZ1zcuo1zmHm0ke1xjqJWo,1399
+siat-1.8.3.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
+siat-1.8.3.dist-info/top_level.txt,sha256=r1cVyL7AIKqeAmEJjNR8FMT20OmEzufDstC2gv3NvEY,5
+siat-1.8.3.dist-info/RECORD,,
```

