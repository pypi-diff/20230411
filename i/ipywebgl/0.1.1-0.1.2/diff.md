# Comparing `tmp/ipywebgl-0.1.1.tar.gz` & `tmp/ipywebgl-0.1.2.tar.gz`

## Comparing `ipywebgl-0.1.1.tar` & `ipywebgl-0.1.2.tar`

### file list

```diff
@@ -1,82 +1,96 @@
--rw-r--r--   0        0        0       46 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/.eslintignore
--rw-r--r--   0        0        0      834 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/.eslintrc.js
--rw-r--r--   0        0        0      114 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/.npmignore
--rw-r--r--   0        0        0       54 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/.prettierignore
--rw-r--r--   0        0        0       29 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/.prettierrc
--rw-r--r--   0        0        0      615 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/MANIFEST.in
--rw-r--r--   0        0        0      190 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/babel.config.js
--rw-r--r--   0        0        0      205 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/dev_requirements.txt
--rw-r--r--   0        0        0      182 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/install.json
--rw-r--r--   0        0        0       67 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl.json
--rw-r--r--   0        0        0      511 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/jest.config.js
--rw-r--r--   0        0        0   626961 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/package-lock.json
--rw-r--r--   0        0        0     3016 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/package.json
--rw-r--r--   0        0        0      149 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/readthedocs.yml
--rw-r--r--   0        0        0       94 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/setup.py
--rw-r--r--   0        0        0      586 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/tbump.toml
--rw-r--r--   0        0        0      101 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/tsconfig.eslint.json
--rw-r--r--   0        0        0      578 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/tsconfig.json
--rw-r--r--   0        0        0     2278 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/webpack.config.js
--rw-r--r--   0        0        0      235 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/css/widget.css
--rw-r--r--   0        0        0      630 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/Makefile
--rw-r--r--   0        0        0      181 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/environment.yml
--rwxr-xr-x   0        0        0      816 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/make.bat
--rw-r--r--   0        0        0     1210 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/api.rst
--rw-r--r--   0        0        0     6548 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/conf.py
--rw-r--r--   0        0        0      854 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/develop-install.rst
--rw-r--r--   0        0        0      632 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/index.rst
--rw-r--r--   0        0        0     1042 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/installing.rst
--rw-r--r--   0        0        0     1581 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/introduction.rst
--rw-r--r--   0        0        0      125 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/_static/helper.js
--rw-r--r--   0        0        0       53 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/examples/3d_camera.nblink
--rw-r--r--   0        0        0      211 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/examples/index.rst
--rw-r--r--   0        0        0       60 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/examples/indexed_vertices.nblink
--rw-r--r--   0        0        0       56 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/examples/introduction.nblink
--rw-r--r--   0        0        0       65 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/examples/introduction_extended.nblink
--rw-r--r--   0        0        0       50 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/examples/shadow.nblink
--rw-r--r--   0        0        0       48 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/examples/ssao.nblink
--rw-r--r--   0        0        0       58 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/docs/source/examples/uniform_buffer.nblink
--rw-r--r--   0        0        0     8632 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/examples/3d_camera.ipynb
--rw-r--r--   0        0        0     3433 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/examples/draw_axis.ipynb
--rw-r--r--   0        0        0     5578 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/examples/indexed_vertices.ipynb
--rw-r--r--   0        0        0    13966 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/examples/introduction.ipynb
--rw-r--r--   0        0        0     6369 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/examples/introduction_extended.ipynb
--rw-r--r--   0        0        0    21494 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/examples/shadow.ipynb
--rw-r--r--   0        0        0    73970 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/examples/sky.ipynb
--rw-r--r--   0        0        0    39048 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/examples/ssao.ipynb
--rw-r--r--   0        0        0     5294 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/examples/texture.ipynb
--rw-r--r--   0        0        0     5099 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/examples/uniform_buffer.ipynb
--rw-r--r--   0        0        0     1674 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/__init__.py
--rw-r--r--   0        0        0      258 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/_frontend.py
--rw-r--r--   0        0        0      222 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/_version.py
--rw-r--r--   0        0        0      533 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/arraybuffer.py
--rw-r--r--   0        0        0      810 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/glresource.py
--rw-r--r--   0        0        0    71060 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/glviewer.py
--rw-r--r--   0        0        0    20663 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/build_log.json
--rw-r--r--   0        0        0     3039 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/package.json
--rw-r--r--   0        0        0     1248 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js
--rw-r--r--   0        0        0     1226 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js.map
--rw-r--r--   0        0        0     2427 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js
--rw-r--r--   0        0        0     2628 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js.map
--rw-r--r--   0        0        0    75690 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/static/lib_widgets_js.c62b750c38ea850039b1.js
--rw-r--r--   0        0        0    83728 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/static/lib_widgets_js.c62b750c38ea850039b1.js.map
--rw-r--r--   0        0        0    26426 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/static/remoteEntry.c0177904b39280613847.js
--rw-r--r--   0        0        0    25148 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/static/remoteEntry.c0177904b39280613847.js.map
--rw-r--r--   0        0        0      118 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/labextension/static/style.js
--rw-r--r--   0        0        0      422 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/nbextension/extension.js
--rw-r--r--   0        0        0    33155 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/nbextension/index.js
--rw-r--r--   0        0        0   107140 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/ipywebgl/nbextension/index.js.map
--rw-r--r--   0        0        0      793 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/src/arraybuffer.ts
--rw-r--r--   0        0        0      632 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/src/extension.ts
--rw-r--r--   0        0        0     2590 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/src/glresource.ts
--rw-r--r--   0        0        0    38703 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/src/glviewer.ts
--rw-r--r--   0        0        0      152 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/src/index.ts
--rw-r--r--   0        0        0     7192 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/src/matrix.ts
--rw-r--r--   0        0        0     1157 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/src/plugin.ts
--rw-r--r--   0        0        0      594 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/src/version.ts
--rw-r--r--   0        0        0       62 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/src/widgets.ts
--rw-r--r--   0        0        0     2112 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/.gitignore
--rw-r--r--   0        0        0     1526 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/LICENSE.txt
--rw-r--r--   0        0        0     1990 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/README.md
--rw-r--r--   0        0        0     2260 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/pyproject.toml
--rw-r--r--   0        0        0     4888 2020-02-02 00:00:00.000000 ipywebgl-0.1.1/PKG-INFO
+-rw-r--r--   0        0        0       46 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/.eslintignore
+-rw-r--r--   0        0        0      834 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/.eslintrc.js
+-rw-r--r--   0        0        0      114 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/.npmignore
+-rw-r--r--   0        0        0       54 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/.prettierignore
+-rw-r--r--   0        0        0       29 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/.prettierrc
+-rw-r--r--   0        0        0      615 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/MANIFEST.in
+-rw-r--r--   0        0        0      190 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/babel.config.js
+-rw-r--r--   0        0        0      205 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/dev_requirements.txt
+-rw-r--r--   0        0        0      182 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/install.json
+-rw-r--r--   0        0        0       67 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl.json
+-rw-r--r--   0        0        0      511 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/jest.config.js
+-rw-r--r--   0        0        0   387684 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/logo.kra
+-rw-r--r--   0        0        0   421627 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/logo.kra~
+-rw-r--r--   0        0        0    96698 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/logo_1024.png
+-rw-r--r--   0        0        0     9645 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/logo_128.png
+-rw-r--r--   0        0        0   232980 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/logo_2048.png
+-rw-r--r--   0        0        0    20785 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/logo_256.png
+-rw-r--r--   0        0        0     1605 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/logo_32.png
+-rw-r--r--   0        0        0    43821 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/logo_512.png
+-rw-r--r--   0        0        0     4553 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/logo_64.png
+-rw-r--r--   0        0        0   626961 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/package-lock.json
+-rw-r--r--   0        0        0     3016 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/package.json
+-rw-r--r--   0        0        0      849 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/readthedocs.yml
+-rw-r--r--   0        0        0       94 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/setup.py
+-rw-r--r--   0        0        0      586 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/tbump.toml
+-rw-r--r--   0        0        0      101 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/tsconfig.eslint.json
+-rw-r--r--   0        0        0      578 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/tsconfig.json
+-rw-r--r--   0        0        0     2278 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/webpack.config.js
+-rw-r--r--   0        0        0      235 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/css/widget.css
+-rw-r--r--   0        0        0      625 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/Makefile
+-rw-r--r--   0        0        0     1210 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/api.rst
+-rw-r--r--   0        0        0     6542 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/conf.py
+-rw-r--r--   0        0        0      854 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/develop-install.rst
+-rw-r--r--   0        0        0      724 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/index.rst
+-rw-r--r--   0        0        0      994 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/installing.rst
+-rw-r--r--   0        0        0     1673 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/introduction.rst
+-rwxr-xr-x   0        0        0      811 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/make.bat
+-rw-r--r--   0        0        0       30 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/requirements.in
+-rw-r--r--   0        0        0     1250 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/requirements.txt
+-rw-r--r--   0        0        0    32633 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/_static/embed-bundle.js
+-rw-r--r--   0        0        0   106338 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/_static/embed-bundle.js.map
+-rw-r--r--   0        0        0      125 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/_static/helper.js
+-rw-r--r--   0        0        0       50 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/examples/3d_camera.nblink
+-rw-r--r--   0        0        0      211 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/examples/index.rst
+-rw-r--r--   0        0        0       57 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/examples/indexed_vertices.nblink
+-rw-r--r--   0        0        0       48 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/examples/instanced.nblink
+-rw-r--r--   0        0        0       53 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/examples/introduction.nblink
+-rw-r--r--   0        0        0       62 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/examples/introduction_extended.nblink
+-rw-r--r--   0        0        0       47 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/examples/shadow.nblink
+-rw-r--r--   0        0        0       45 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/examples/ssao.nblink
+-rw-r--r--   0        0        0       55 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/docs/examples/uniform_buffer.nblink
+-rw-r--r--   0        0        0     8632 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/3d_camera.ipynb
+-rw-r--r--   0        0        0     3433 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/draw_axis.ipynb
+-rw-r--r--   0        0        0     5578 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/indexed_vertices.ipynb
+-rw-r--r--   0        0        0    15740 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/instanced.ipynb
+-rw-r--r--   0        0        0    13966 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/introduction.ipynb
+-rw-r--r--   0        0        0     6369 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/introduction_extended.ipynb
+-rw-r--r--   0        0        0    21494 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/shadow.ipynb
+-rw-r--r--   0        0        0    73970 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/sky.ipynb
+-rw-r--r--   0        0        0    39048 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/ssao.ipynb
+-rw-r--r--   0        0        0     5294 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/texture.ipynb
+-rw-r--r--   0        0        0     5099 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/examples/uniform_buffer.ipynb
+-rw-r--r--   0        0        0     1674 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/__init__.py
+-rw-r--r--   0        0        0      258 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/_frontend.py
+-rw-r--r--   0        0        0      222 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/_version.py
+-rw-r--r--   0        0        0      533 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/arraybuffer.py
+-rw-r--r--   0        0        0      810 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/glresource.py
+-rw-r--r--   0        0        0    73131 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/glviewer.py
+-rw-r--r--   0        0        0    20663 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/build_log.json
+-rw-r--r--   0        0        0     3039 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/package.json
+-rw-r--r--   0        0        0     1248 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js
+-rw-r--r--   0        0        0     1226 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js.map
+-rw-r--r--   0        0        0     2427 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js
+-rw-r--r--   0        0        0     2628 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js.map
+-rw-r--r--   0        0        0    75963 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/static/lib_widgets_js.5f9ed127446bd3a7ccfc.js
+-rw-r--r--   0        0        0    84038 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/static/lib_widgets_js.5f9ed127446bd3a7ccfc.js.map
+-rw-r--r--   0        0        0    26426 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/static/remoteEntry.60241690e1362618887e.js
+-rw-r--r--   0        0        0    25148 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/static/remoteEntry.60241690e1362618887e.js.map
+-rw-r--r--   0        0        0      118 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/labextension/static/style.js
+-rw-r--r--   0        0        0      422 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/nbextension/extension.js
+-rw-r--r--   0        0        0    33276 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/nbextension/index.js
+-rw-r--r--   0        0        0   107531 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/ipywebgl/nbextension/index.js.map
+-rw-r--r--   0        0        0      793 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/src/arraybuffer.ts
+-rw-r--r--   0        0        0      632 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/src/extension.ts
+-rw-r--r--   0        0        0     2590 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/src/glresource.ts
+-rw-r--r--   0        0        0    38918 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/src/glviewer.ts
+-rw-r--r--   0        0        0      152 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/src/index.ts
+-rw-r--r--   0        0        0     7192 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/src/matrix.ts
+-rw-r--r--   0        0        0     1157 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/src/plugin.ts
+-rw-r--r--   0        0        0      594 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/src/version.ts
+-rw-r--r--   0        0        0       62 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/src/widgets.ts
+-rw-r--r--   0        0        0     2112 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/.gitignore
+-rw-r--r--   0        0        0     1526 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/LICENSE.txt
+-rw-r--r--   0        0        0     3711 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/README.md
+-rw-r--r--   0        0        0     2260 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/pyproject.toml
+-rw-r--r--   0        0        0     6585 2020-02-02 00:00:00.000000 ipywebgl-0.1.2/PKG-INFO
```

### Comparing `ipywebgl-0.1.1/.eslintrc.js` & `ipywebgl-0.1.2/.eslintrc.js`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/MANIFEST.in` & `ipywebgl-0.1.2/MANIFEST.in`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/package-lock.json` & `ipywebgl-0.1.2/package-lock.json`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/package.json` & `ipywebgl-0.1.2/package.json`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.96875%*

 * *Differences: {"'version'": "'0.1.2'"}*

```diff
@@ -86,9 +86,9 @@
         "prepack": "yarn run build:lib",
         "watch": "npm-run-all -p watch:*",
         "watch:labextension": "jupyter labextension watch .",
         "watch:lib": "tsc -w",
         "watch:nbextension": "webpack --watch --mode=development"
     },
     "types": "./lib/index.d.ts",
-    "version": "0.1.1"
+    "version": "0.1.2"
 }
```

### Comparing `ipywebgl-0.1.1/tbump.toml` & `ipywebgl-0.1.2/tbump.toml`

 * *Files 2% similar despite different names*

```diff
@@ -4,15 +4,15 @@
 default = ""
 
 [[field]]
 name = "release"
 default = ""
 
 [version]
-current = "0.1.1"
+current = "0.1.2"
 regex = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)((?P<channel>a|b|rc|.dev)(?P<release>\\d+))?"
 
 [git]
 message_template = "Bump to {new_version}"
 tag_template = "v{new_version}"
 
 [[file]]
```

### Comparing `ipywebgl-0.1.1/tsconfig.json` & `ipywebgl-0.1.2/tsconfig.json`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/webpack.config.js` & `ipywebgl-0.1.2/webpack.config.js`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/docs/make.bat` & `ipywebgl-0.1.2/docs/make.bat`

 * *Files 2% similar despite different names*

```diff
@@ -3,15 +3,15 @@
 pushd %~dp0
 
 REM Command file for Sphinx documentation
 
 if "%SPHINXBUILD%" == "" (
 	set SPHINXBUILD=sphinx-build
 )
-set SOURCEDIR=source
+set SOURCEDIR=.
 set BUILDDIR=build
 set SPHINXPROJ=ipywebgl
 
 if "%1" == "" goto help
 
 %SPHINXBUILD% >NUL 2>NUL
 if errorlevel 9009 (
```

### Comparing `ipywebgl-0.1.1/docs/source/api.rst` & `ipywebgl-0.1.2/docs/api.rst`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/docs/source/conf.py` & `ipywebgl-0.1.2/docs/conf.py`

 * *Files 0% similar despite different names*

```diff
@@ -68,15 +68,15 @@
 #
 # The short X.Y version.
 
 
 # get version from python package:
 import os
 here = os.path.dirname(__file__)
-repo = os.path.join(here, '..', '..')
+repo = os.path.join(here, '..')
 _version_py = os.path.join(repo, 'ipywebgl', '_version.py')
 version_ns = {}
 with open(_version_py) as f:
     exec(f.read(), version_ns)
 
 # The short X.Y version.
 version = '%i.%i' % version_ns['version_info'][:2]
```

### Comparing `ipywebgl-0.1.1/docs/source/develop-install.rst` & `ipywebgl-0.1.2/docs/develop-install.rst`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/docs/source/index.rst` & `ipywebgl-0.1.2/docs/index.rst`

 * *Files 23% similar despite different names*

```diff
@@ -1,14 +1,18 @@
 
 ipywebgl
 =====================================
 
 Version: |release|
 
-A Custom Jupyter Widget Library
+.. image:: ../logo_256.png
+   :alt: a WebGL2 wrapper for jupyter lab
+   :align: center
+
+A WebGL2 widget for Jupyter Lab
 
 
 Quickstart
 ----------
 
 To get started with ipywebgl, install with pip::
```

### Comparing `ipywebgl-0.1.1/docs/source/installing.rst` & `ipywebgl-0.1.2/docs/installing.rst`

 * *Files 12% similar despite different names*

```diff
@@ -5,18 +5,14 @@
 ============
 
 
 The simplest way to install ipywebgl is via pip::
 
     pip install ipywebgl
 
-or via conda::
-
-    conda install ipywebgl
-
 
 If you installed via pip, and notebook version < 5.3, you will also have to
 install / configure the front-end extension as well. If you are using classic
 notebook (as opposed to Jupyterlab), run::
 
     jupyter nbextension install [--sys-prefix / --user / --system] --py ipywebgl
```

### Comparing `ipywebgl-0.1.1/docs/source/introduction.rst` & `ipywebgl-0.1.2/docs/introduction.rst`

 * *Files 5% similar despite different names*

```diff
@@ -1,11 +1,15 @@
 =============
 Introduction
 =============
 
+.. image:: ../logo_256.png
+   :alt: a WebGL2 wrapper for jupyter lab
+   :align: center
+
 This module is exposing a part of the WebGL2 context.  Is is assumed that you are familiar with the concepts and commands.
 You can find more information about it here : https://webgl2fundamentals.org/
 
 There is some major differences still :
 
 - All the WebGL2 commands are called on the GLViewer instead of a gl context.
 - All the API is written in *snake_case* instead of *camelCase*, so for example ``gl.drawArrays(...)`` in JavaScript becomes ``widget.draw_arrays(...)`` in Python
```

### Comparing `ipywebgl-0.1.1/examples/3d_camera.ipynb` & `ipywebgl-0.1.2/examples/3d_camera.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/examples/draw_axis.ipynb` & `ipywebgl-0.1.2/examples/draw_axis.ipynb`

 * *Files 7% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9999728732638888%*

 * *Differences: {"'cells'": "{1: {'outputs': {0: {'data': {'application/vnd.jupyter.widget-view+json': "*

 * *            "{'model_id': 'a0965d9ef9a3421890373ad0e395d6f6'}}}}}}"}*

```diff
@@ -15,15 +15,15 @@
             "execution_count": 1,
             "id": "d8dc089e-6f77-45c2-b706-071f5e4d6113",
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "0c01357837234106a4603a62900b1929",
+                            "model_id": "a0965d9ef9a3421890373ad0e395d6f6",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLViewer(camera_pos=[0, 50, 200])"
                         ]
                     },
```

### Comparing `ipywebgl-0.1.1/examples/indexed_vertices.ipynb` & `ipywebgl-0.1.2/examples/indexed_vertices.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/examples/introduction.ipynb` & `ipywebgl-0.1.2/examples/introduction.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/examples/introduction_extended.ipynb` & `ipywebgl-0.1.2/examples/introduction_extended.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/examples/shadow.ipynb` & `ipywebgl-0.1.2/examples/shadow.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/examples/sky.ipynb` & `ipywebgl-0.1.2/examples/sky.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/examples/ssao.ipynb` & `ipywebgl-0.1.2/examples/ssao.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/examples/texture.ipynb` & `ipywebgl-0.1.2/examples/texture.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/examples/uniform_buffer.ipynb` & `ipywebgl-0.1.2/examples/uniform_buffer.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/ipywebgl/__init__.py` & `ipywebgl-0.1.2/ipywebgl/__init__.py`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/ipywebgl/arraybuffer.py` & `ipywebgl-0.1.2/ipywebgl/arraybuffer.py`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/ipywebgl/glresource.py` & `ipywebgl-0.1.2/ipywebgl/glresource.py`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/ipywebgl/glviewer.py` & `ipywebgl-0.1.2/ipywebgl/glviewer.py`

 * *Files 2% similar despite different names*

```diff
@@ -1139,16 +1139,19 @@
     def create_vertex_array_ext(self, program:GLResourceWidget, bindings, indices=None, auto_execute=True) -> GLResourceWidget:
         """extended vertex array function
 
         This creates the vertex array and link all the attributes using the bindings.
         
         The bindings are a list of tuples with
         * [(buffer, "3f32 3f32", "in_vertex", "in_normal"), ...]
+        * or [(buffer, "3f32 3f32", 0, 1), ...]
+        * or [(buffer, "1mat4:1", "in_world"), ...]
         * the buffer is a buffer resource
-        * supported type for buffer definitions : [1, 2, 3, 4][i8, i16, i32, u8, u16, u32, f16, f32]
+        * supported type for buffer definitions : [1, 2, 3, 4][i8, i16, i32, u8, u16, u32, f16, f32, mat4](:[1,2,...])
+        * the optional ':' is used to set the vertexAttribDivisor on that attribute.
 
         Args:
             program (GLResourceWidget): the program to use
             bindings (List of tuple): [(buffer, "3f32 3f32", "in_vertex", "in_normal"), ...]"
             indices (np.array(dtype=u8 or dtype=u16)): the indices buffer to create. Defaults to None.
             auto_execute (bool) : do we execute the commands ?. Defaults to True.
         """
@@ -1159,41 +1162,57 @@
 
             stride = 0
             pointer = {'buffer':buffer, 'pointers':[], 'stride':0}
             attributePointers.append(pointer)
 
             for desciption_index, description_string in enumerate(descriptions.split()):
                 size = description_string[0]
-                attribtype = description_string[1:]
+                attribstrings = description_string[1:].split(':')
+                attribtype = attribstrings[0]
+                attribdivisor = 0
+                if len(attribstrings) == 2:
+                    attribdivisor = int(attribstrings[1])
                 name = binding[2 + desciption_index]
 
                 if size not in ['1', '2', '3', '4']:
                     raise AttributeError("Invalid attribute size")
-                if attribtype not in ['i8', 'i16', 'i32', 'u8', 'u16', 'u32', 'f16', 'f32']:
+                if attribtype not in ['i8', 'i16', 'i32', 'u8', 'u16', 'u32', 'f16', 'f32', 'mat4']:
                     raise AttributeError("Invalid attribute type")
 
-                size = int(size)
-                attribsize = {'i8':1, 'i16':2, 'i32':4, 'u8':1, 'u16':2, 'u32':4, 'f16':2, 'f32':4}[attribtype]
-                attribtype = {'i8':'BYTE', 'i16':'SHORT', 'i32':'INT', 'u8':'UNSIGNED_BYTE', 'u16':'UNSIGNED_SHORT', 'u32':'UNSIGNED_INT', 'f16':'HALF_FLOAT', 'f32':'FLOAT'}[attribtype]
-                pointer['pointers'].append((name, size, attribtype, stride))
-                stride += attribsize * size
+                def _add(stride, size, attribtype, index_offset):
+                    isize = int(size)
+                    attribsize = {'i8':1, 'i16':2, 'i32':4, 'u8':1, 'u16':2, 'u32':4, 'f16':2, 'f32':4}[attribtype]
+                    attribgltype = {'i8':'BYTE', 'i16':'SHORT', 'i32':'INT', 'u8':'UNSIGNED_BYTE', 'u16':'UNSIGNED_SHORT', 'u32':'UNSIGNED_INT', 'f16':'HALF_FLOAT', 'f32':'FLOAT'}[attribtype]
+                    pointer['pointers'].append((name, isize, attribgltype, stride, index_offset, attribdivisor))
+                    return stride + attribsize * isize
+                
+                if attribtype == 'mat4':
+                    stride = _add(stride, '4', 'f32', 0)
+                    stride = _add(stride, '4', 'f32', 1)
+                    stride = _add(stride, '4', 'f32', 2)
+                    stride = _add(stride, '4', 'f32', 3)
+                else:
+                    stride = _add(stride, size, attribtype, 0)
+
             pointer['stride'] = stride
 
         # create the vertex array
         vao = self.create_vertex_array()
         self.bind_vertex_array(vao)
         self.use_program(program)
 
         # bind the attributes
         for attrib in attributePointers:
             self.bind_buffer('ARRAY_BUFFER', attrib['buffer'])
 
             for pointer in attrib['pointers']:
-                self.enable_vertex_attrib_array(pointer[0])
-                self.vertex_attrib_pointer(pointer[0], pointer[1], pointer[2], False, attrib['stride'], pointer[3])
+                self.enable_vertex_attrib_array(pointer[0], pointer[4])
+                self.vertex_attrib_pointer(pointer[0], pointer[1], pointer[2], False, attrib['stride'], pointer[3], pointer[4])
+                if (pointer[5] > 0):
+                    self.vertex_attrib_divisor(pointer[0], pointer[5], pointer[4])
         self.bind_buffer('ARRAY_BUFFER', None)
 
         # check if we need to create indices buffer
         if indices is not None:
             buffer = self.create_buffer()
             self.bind_buffer('ELEMENT_ARRAY_BUFFER', buffer)
             self.buffer_data('ELEMENT_ARRAY_BUFFER', indices, 'STATIC_DRAW', update_info=True)
@@ -1218,136 +1237,150 @@
             uid = vertex_array.uid
         self._commands.append({
             'cmd':'bindVertexArray', 
             'vertex_array':uid
         })
 
 
-    def vertex_attrib_pointer(self, index, size: int, attribtype: str, normalized: bool, stride: int, offset: int):
+    def vertex_attrib_pointer(self, index, size: int, attribtype: str, normalized: bool, stride: int, offset: int, index_offset: int =0):
         """Append a vertexAttribPointer command to the command buffer.
         
         Args:
             index (int or str): The index of the generic vertex attribute to be modified or the name of the attribute to find in the shader.
             size (int): Specifies the number of components per generic vertex attribute. Must be 1, 2, 3, 4.
             attribtype (str): Specifies the data type of each component in the array.
                 Can be one of "BYTE", "UNSIGNED_BYTE", "SHORT", "UNSIGNED_SHORT", "FLOAT", "HALF_FLOAT", "INT", "UNSIGNED_INT".
             normalized (bool): Specifies whether integer data values should be normalized when being casted to a float.
             stride (int): Specifies the byte offset between consecutive generic vertex attributes.
             offset (int): Specifies a offset, in bytes, of the first component in the vertex attribute array.
+            index_offset (int): add an offset to the index (location) found.
         """
         if size < 1 or size > 4:
             raise AttributeError("Invalid size")
         if attribtype not in ["BYTE", "UNSIGNED_BYTE", "SHORT", "UNSIGNED_SHORT", "FLOAT", "HALF_FLOAT", "INT", "UNSIGNED_INT"]:
             raise AttributeError("Invalid attribtype")
         self._commands.append({
             'cmd': 'vertexAttribPointer', 
             'index': index, 
             'size': size, 
             'type': attribtype, 
             'normalized': normalized, 
             'stride': stride, 
-            'offset': offset
+            'offset': offset,
+            'index_offset': index_offset
         })
 
 
-    def vertex_attrib_i_pointer(self, index, size: int, attribtype: str, stride: int, offset: int):
+    def vertex_attrib_i_pointer(self, index, size: int, attribtype: str, stride: int, offset: int, index_offset: int =0):
         """Append a vertexAttribIPointer command to the command buffer.
         
         Args:
             index (int or str): The index of the generic vertex attribute to be modified or the name of the attribute to find in the shader.
             size (int): Specifies the number of components per generic vertex attribute. Must be 1, 2, 3, 4.
             attribtype (str): Specifies the data type of each component in the array.
                 Can be one of "BYTE", "UNSIGNED_BYTE", "SHORT", "UNSIGNED_SHORT", "INT", "UNSIGNED_INT".
             stride (int): Specifies the byte offset between consecutive generic vertex attributes.
             offset (int): Specifies a offset, in bytes, of the first component in the vertex attribute array.
+            index_offset (int): add an offset to the index (location) found.
         """
         if attribtype not in ["BYTE", "UNSIGNED_BYTE", "SHORT", "UNSIGNED_SHORT", "INT", "UNSIGNED_INT"]:
             raise AttributeError("Invalid attribtype")
         self._commands.append({
             'cmd': 'vertexAttribIPointer', 
             'index': index, 
             'size': size, 
             'type': attribtype, 
             'stride': stride, 
-            'offset': offset
+            'offset': offset,
+            'index_offset': index_offset
         })
 
 
-    def enable_vertex_attrib_array(self, index):
+    def enable_vertex_attrib_array(self, index, index_offset: int =0):
         """Append an enableVertexAttribArray command to the command buffer.
 
         Args:
             index (int or str): Specifies the index of the generic vertex attribute to be enabled or the name of the attribute to find in the shader.
+            index_offset (int): add an offset to the index (location) found.
         """
         self._commands.append({
             'cmd': 'enableVertexAttribArray',
-            'index': index
+            'index': index,
+            'index_offset': index_offset
         })
 
 
-    def disable_vertex_attrib_array(self, index):
+    def disable_vertex_attrib_array(self, index, index_offset: int =0):
         """Append an disableVertexAttribArray command to the command buffer.
 
         Args:
             index (int or str): Specifies the index of the generic vertex attribute to be enabled or the name of the attribute to find in the shader.
+            index_offset (int): add an offset to the index (location) found.
         """
         self._commands.append({
             'cmd': 'disableVertexAttribArray',
-            'index': index
+            'index': index,
+            'index_offset': index_offset
         })
 
     
-    def vertex_attrib_divisor(self, index, divisor: int):
+    def vertex_attrib_divisor(self, index, divisor: int, index_offset: int =0):
         """Append an vertexAttribDivisor command to the command buffer.
 
             modifies the rate at which generic vertex attributes advance when rendering multiple instances of primitives with gl.drawArraysInstanced() and gl.drawElementsInstanced().
         Args:
             index (int or str): Specifies the index of the generic vertex attribute to be enabled or the name of the attribute to find in the shader.
             divisor(int): specifying the number of instances that will pass between updates of the generic attribute.
+            index_offset (int): add an offset to the index (location) found.
         """
         self._commands.append({
             'cmd': 'vertexAttribDivisor',
             'index': index,
-            'divisor': divisor
+            'divisor': divisor,
+            'index_offset': index_offset
         })
 
 
-    def vertex_attrib_fv(self, index, value: np.array):
+    def vertex_attrib_fv(self, index, value: np.array, index_offset: int =0):
         """Append an vertexAttrib[1234]fv command to the command buffer.
 
             the type of vertexAttrib function to call will be decided from the shape of the array.
         Args:
             index (int or str): Specifies the index of the generic vertex attribute or the name of the attribute to find in the shader.
             value(np.array(dtype=np.float32)): values to push.
+            index_offset (int): add an offset to the index (location) found.
         """
         meta_data, buffer = array_to_buffer(value)
         meta_data['index'] = len(self._buffers)
         self._buffers.append(buffer)
         self._commands.append({
             'cmd': 'vertexAttrib[1234]fv',
             'index': index,
-            'buffer_metadata':meta_data
+            'buffer_metadata':meta_data,
+            'index_offset': index_offset
         })
 
 
-    def vertex_attrib_i4_fv(self, index, value: np.array):
+    def vertex_attrib_i4_fv(self, index, value: np.array, index_offset: int =0):
         """Append an vertexAttribI4[u]iv command to the command buffer.
 
             the type of vertexAttrib function to call will be decided from the type of the array.
         Args:
             index (int or str): Specifies the index of the generic vertex attribute or the name of the attribute to find in the shader.
             value(np.array(dtype=np.uint32 or dtype=np.int32)): values to push.
+            index_offset (int): add an offset to the index (location) found.
         """
         meta_data, buffer = array_to_buffer(value)
         meta_data['index'] = len(self._buffers)
         self._buffers.append(buffer)
         self._commands.append({
             'cmd': 'vertexAttribI4[u]iv',
             'index': index,
-            'buffer_metadata':meta_data
+            'buffer_metadata':meta_data,
+            'index_offset': index_offset
         })
 
 
     def draw_arrays(self, mode:str, first:int, count:int):
         """Append a drawArrays command to the commands buffer
 
         Args:
```

### Comparing `ipywebgl-0.1.1/ipywebgl/labextension/build_log.json` & `ipywebgl-0.1.2/ipywebgl/labextension/build_log.json`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9999992985409654%*

 * *Differences: {'0': "{'plugins': {1: {'_options': {'shared': {'ipywebgl': {'version': '0.1.1'}}}}}}"}*

```diff
@@ -583,15 +583,15 @@
                             "import": false,
                             "requiredVersion": "^1.33.0",
                             "singleton": true
                         },
                         "ipywebgl": {
                             "import": "E:\\github\\research\\ipywebgl\\lib\\index.js",
                             "singleton": true,
-                            "version": "0.1.0"
+                            "version": "0.1.1"
                         },
                         "react": {
                             "import": false,
                             "requiredVersion": "^17.0.1",
                             "singleton": true
                         },
                         "react-dom": {
```

### Comparing `ipywebgl-0.1.1/ipywebgl/labextension/package.json` & `ipywebgl-0.1.2/ipywebgl/labextension/package.json`

 * *Files 6% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9677734375%*

 * *Differences: {"'jupyterlab'": "{'_build': {'load': 'static\\\\remoteEntry.60241690e1362618887e.js'}}",*

 * * "'version'": "'0.1.1'"}*

```diff
@@ -46,15 +46,15 @@
         "dist/*.js",
         "css/*.css"
     ],
     "homepage": "https://github.com/JeromeEippers/ipywebgl",
     "jupyterlab": {
         "_build": {
             "extension": "./extension",
-            "load": "static\\remoteEntry.c0177904b39280613847.js"
+            "load": "static\\remoteEntry.60241690e1362618887e.js"
         },
         "extension": "lib/plugin",
         "outputDir": "ipywebgl/labextension/",
         "sharedPackages": {
             "@jupyter-widgets/base": {
                 "bundled": false,
                 "singleton": true
@@ -90,9 +90,9 @@
         "prepack": "yarn run build:lib",
         "watch": "npm-run-all -p watch:*",
         "watch:labextension": "jupyter labextension watch .",
         "watch:lib": "tsc -w",
         "watch:nbextension": "webpack --watch --mode=development"
     },
     "types": "./lib/index.d.ts",
-    "version": "0.1.0"
+    "version": "0.1.1"
 }
```

### Comparing `ipywebgl-0.1.1/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js` & `ipywebgl-0.1.2/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js.map` & `ipywebgl-0.1.2/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js.map`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js` & `ipywebgl-0.1.2/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js.map` & `ipywebgl-0.1.2/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js.map`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/ipywebgl/labextension/static/lib_widgets_js.c62b750c38ea850039b1.js` & `ipywebgl-0.1.2/ipywebgl/labextension/static/lib_widgets_js.5f9ed127446bd3a7ccfc.js`

 * *Files 0% similar despite different names*

#### js-beautify {}

```diff
@@ -289,15 +289,15 @@
                             if (gl[key] === value) {
                                 keys.push(key);
                             }
                         }
                         return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;
                     }
                     execute_command(gl, command, converted_buffers) {
-                        //console.log(command);
+                        console.log(command);
                         //console.log(this.bound_buffers);
                         switch (command.cmd) {
                             case 'viewport':
                                 gl.viewport(command.x, command.y, command.width, command.height);
                                 break;
                             case 'enable':
                             case 'disable': {
@@ -805,15 +805,16 @@
                             }
                             break;
                             case 'vertexAttribPointer':
                             case 'vertexAttribIPointer':
                             case 'enableVertexAttribArray':
                             case 'disableVertexAttribArray':
                             case 'vertexAttrib[1234]fv':
-                            case 'vertexAttribI4[u]iv': {
+                            case 'vertexAttribI4[u]iv':
+                            case 'vertexAttribDivisor': {
                                 let index = -1;
                                 if (typeof command.index === 'number') {
                                     index = command.index;
                                 } else {
                                     if (this.bound_program != null) {
                                         const attr = this.bound_program.get('_info').attributes.find((element) => {
                                             return element.name == command.index;
@@ -823,14 +824,15 @@
                                         }
                                     } else {
                                         console.error("a program must be bound to find the attribute");
                                     }
                                 }
                                 let buf = this.bound_buffers['ARRAY_BUFFER'];
                                 if (index >= 0) {
+                                    index += command.index_offset;
                                     if (command.cmd == "vertexAttribIPointer") {
                                         gl.vertexAttribIPointer(index, command.size, gl[command.type], command.stride, command.offset);
                                         if (this.bound_vao != null && buf != null) {
                                             let vao_info = this.bound_vao.get('_info');
                                             const buffer_uid = buf.get('uid');
                                             let binding_info = vao_info.bindings.find((element) => {
                                                 return element.buffer_uid == buffer_uid;
@@ -898,14 +900,16 @@
                                         }
                                     } else if (command.cmd == "vertexAttribI4[u]iv") {
                                         if (command.buffer_metadata.dtype == "uint32") {
                                             gl.vertexAttribI4uiv(index, converted_buffers[command.buffer_metadata.index]);
                                         } else if (command.buffer_metadata.dtype == "int32") {
                                             gl.vertexAttribI4iv(index, converted_buffers[command.buffer_metadata.index]);
                                         }
+                                    } else if (command.cmd == "vertexAttribDivisor") {
+                                        gl.vertexAttribDivisor(index, command.divisor);
                                     }
                                 } else {
                                     console.error(`attribute ${command.index} location not found`);
                                 }
                             }
                             break;
                             // ------------------------------- RENDER --------------------------------------
@@ -1889,15 +1893,15 @@
             /*!**********************!*\
               !*** ./package.json ***!
               \**********************/
             /***/
             ((module) => {
 
                 "use strict";
-                module.exports = JSON.parse('{"name":"ipywebgl","version":"0.1.0","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/JeromeEippers/ipywebgl","bugs":{"url":"https://github.com/JeromeEippers/ipywebgl/issues"},"license":"BSD-3-Clause","author":{"name":"Jerome Eippers","email":"jerome@eippers.be"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/JeromeEippers/ipywebgl"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebgl/labextension","clean:nbextension":"rimraf ipywebgl/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebgl/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}');
+                module.exports = JSON.parse('{"name":"ipywebgl","version":"0.1.1","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/JeromeEippers/ipywebgl","bugs":{"url":"https://github.com/JeromeEippers/ipywebgl/issues"},"license":"BSD-3-Clause","author":{"name":"Jerome Eippers","email":"jerome@eippers.be"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/JeromeEippers/ipywebgl"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebgl/labextension","clean:nbextension":"rimraf ipywebgl/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebgl/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}');
 
                 /***/
             })
 
     }
 ]);
-//# sourceMappingURL=lib_widgets_js.c62b750c38ea850039b1.js.map
+//# sourceMappingURL=lib_widgets_js.5f9ed127446bd3a7ccfc.js.map
```

### Comparing `ipywebgl-0.1.1/ipywebgl/labextension/static/lib_widgets_js.c62b750c38ea850039b1.js.map` & `ipywebgl-0.1.2/ipywebgl/labextension/static/lib_widgets_js.5f9ed127446bd3a7ccfc.js.map`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.8441558441558442%*

 * *Differences: {"'file'": "'lib_widgets_js.5f9ed127446bd3a7ccfc.js'",*

 * * "'mappings'": "';;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;;;;;;;;;;ACnCa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,kBAAkB;AAC3C,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA,6CAA6C,uBAAuB,6QAA6Q,iBAAiB,UAAU;AAC5W;A []*

```diff
@@ -1,10 +1,10 @@
 {
-    "file": "lib_widgets_js.c62b750c38ea850039b1.js",
-    "mappings": ";;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;;;;;;;;;;ACnCa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,kBAAkB;AAC3C,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA,6CAA6C,uBAAuB,6QAA6Q,iBAAiB,UAAU;AAC5W;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,uDAAuD,wCAAwC,YAAY,qCAAqC;AAChJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,IAAI;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;;;;;;;;;;ACxDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,GAAG,eAAe;AAClC,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,sBAAsB,mBAAO,CAAC,2CAAe;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,uBAAuB,mYAAmY;AACvc;AACA;AACA;AACA;AACA,sDAAsD,6BAA6B;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iBAAiB;AACzD;AACA;AACA;AACA;AACA,oGAAoG,0CAA0C;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,gGAAgG;AAClK;AACA;AACA,4DAA4D,6HAA6H;AACzL;AACA;AACA;AACA;AACA;AACA,wCAAwC,kBAAkB;AAC1D;AACA;AACA,0DAA0D,4HAA4H;AACtL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,sCAAsC;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F,oDAAoD;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gBAAgB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,4CAA4C;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mDAAmD;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,+FAA+F,4CAA4C;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,iDAAiD;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,2CAA2C;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG,uCAAuC;AAC/I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,0CAA0C;AACnI;AACA,qDAAqD;AACrD;AACA;AACA,+DAA+D,uIAAuI;AACtM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,0CAA0C;AACnI;AACA,qDAAqD;AACrD;AACA;AACA,+DAA+D,sKAAsK;AACrO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,eAAe;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,qBAAqB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oDAAoD,IAAI;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,gBAAgB;AAChB;;;;;;;;;;;ACt6Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,aAAa,GAAG,eAAe,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,qBAAqB,GAAG,iBAAiB,GAAG,eAAe,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,wBAAwB,GAAG,mBAAmB,GAAG,sCAAsC,GAAG,0BAA0B;AAC/W;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;;AC/Na;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,qCAAY;AACjC,aAAa,mBAAO,CAAC,yCAAc;AACnC;;;;;;;;;;ACdA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,kDAAkD,oBAAoB,8BAA8B,gCAAgC,wBAAwB,KAAK,4BAA4B,wBAAwB,kBAAkB,KAAK,8BAA8B,kBAAkB,KAAK;AACjS;AACA;;;;;;;;;;;;ACNa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B;;AAE/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;;;;;;;;;;AC7FA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;;AClBa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,CAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,cAAc;;AAExG;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,yDAAyD;AACzD,IAAI;;AAEJ;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,6BAA6B;AAClD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA",
+    "file": "lib_widgets_js.5f9ed127446bd3a7ccfc.js",
+    "mappings": ";;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;;;;;;;;;;ACnCa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,kBAAkB;AAC3C,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA,6CAA6C,uBAAuB,6QAA6Q,iBAAiB,UAAU;AAC5W;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,uDAAuD,wCAAwC,YAAY,qCAAqC;AAChJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,IAAI;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;;;;;;;;;;ACxDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,GAAG,eAAe;AAClC,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,sBAAsB,mBAAO,CAAC,2CAAe;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,uBAAuB,mYAAmY;AACvc;AACA;AACA;AACA;AACA,sDAAsD,6BAA6B;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iBAAiB;AACzD;AACA;AACA;AACA;AACA,oGAAoG,0CAA0C;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,gGAAgG;AAClK;AACA;AACA,4DAA4D,6HAA6H;AACzL;AACA;AACA;AACA;AACA;AACA,wCAAwC,kBAAkB;AAC1D;AACA;AACA,0DAA0D,4HAA4H;AACtL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,sCAAsC;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F,oDAAoD;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gBAAgB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,4CAA4C;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mDAAmD;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,+FAA+F,4CAA4C;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,iDAAiD;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,2CAA2C;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG,uCAAuC;AAC/I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,0CAA0C;AACnI;AACA,qDAAqD;AACrD;AACA;AACA,+DAA+D,uIAAuI;AACtM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,0CAA0C;AACnI;AACA,qDAAqD;AACrD;AACA;AACA,+DAA+D,sKAAsK;AACrO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,eAAe;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,qBAAqB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oDAAoD,IAAI;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,gBAAgB;AAChB;;;;;;;;;;;AC36Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,aAAa,GAAG,eAAe,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,qBAAqB,GAAG,iBAAiB,GAAG,eAAe,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,wBAAwB,GAAG,mBAAmB,GAAG,sCAAsC,GAAG,0BAA0B;AAC/W;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;;AC/Na;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,qCAAY;AACjC,aAAa,mBAAO,CAAC,yCAAc;AACnC;;;;;;;;;;ACdA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,kDAAkD,oBAAoB,8BAA8B,gCAAgC,wBAAwB,KAAK,4BAA4B,wBAAwB,kBAAkB,KAAK,8BAA8B,kBAAkB,KAAK;AACjS;AACA;;;;;;;;;;;;ACNa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B;;AAE/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;;;;;;;;;;AC7FA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;;AClBa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,CAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,cAAc;;AAExG;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,yDAAyD;AACzD,IAAI;;AAEJ;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,6BAA6B;AAClD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA",
     "names": [],
     "sourceRoot": "",
     "sources": [
         "webpack://ipywebgl/./lib/arraybuffer.js",
         "webpack://ipywebgl/./lib/glresource.js",
         "webpack://ipywebgl/./lib/glviewer.js",
         "webpack://ipywebgl/./lib/matrix.js",
@@ -14,15 +14,15 @@
         "webpack://ipywebgl/./node_modules/css-loader/dist/runtime/api.js",
         "webpack://ipywebgl/./css/widget.css?a195",
         "webpack://ipywebgl/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"
     ],
     "sourcesContent": [
         "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.buffer_to_array = void 0;\r\nfunction buffer_to_array(dtype, buffer) {\r\n    switch (dtype) {\r\n        case 'int8':\r\n            return new Int8Array(buffer);\r\n            break;\r\n        case 'uint8':\r\n            return new Uint8Array(buffer);\r\n            break;\r\n        case 'int16':\r\n            return new Int16Array(buffer);\r\n            break;\r\n        case 'uint16':\r\n            return new Uint16Array(buffer);\r\n            break;\r\n        case 'int32':\r\n            return new Int32Array(buffer);\r\n            break;\r\n        case 'uint32':\r\n            return new Uint32Array(buffer);\r\n            break;\r\n        case 'float32':\r\n            return new Float32Array(buffer);\r\n            break;\r\n        case 'float64':\r\n            return new Float64Array(buffer);\r\n            break;\r\n        default:\r\n            throw 'Unknown dtype ' + dtype;\r\n            break;\r\n    }\r\n}\r\nexports.buffer_to_array = buffer_to_array;\r\n//# sourceMappingURL=arraybuffer.js.map",
         "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GLResourceView = exports.GLResource = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst version_1 = require(\"./version\");\r\n// Import the CSS\r\nrequire(\"../css/widget.css\");\r\nclass GLResource extends base_1.DOMWidgetModel {\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: 'GLResource', _model_module: version_1.MODULE_NAME, _model_module_version: version_1.MODULE_VERSION, _view_name: 'GLResourceView', _view_module: version_1.MODULE_NAME, _view_module_version: version_1.MODULE_VERSION, _context: null, _gl_ptr: null, _info: { type: 'not set' }, uid: 0 });\r\n    }\r\n    initialize(attributes, options) {\r\n        super.initialize(attributes, options);\r\n        this.get('_context').register_resource(this);\r\n    }\r\n}\r\nexports.GLResource = GLResource;\r\nGLResource.serializers = Object.assign(Object.assign({}, base_1.DOMWidgetModel.serializers), { _context: { deserialize: base_1.unpack_models } });\r\nclass GLResourceView extends base_1.DOMWidgetView {\r\n    render() {\r\n        const root = this.el;\r\n        const jsonDisplay = document.createElement(\"div\");\r\n        jsonDisplay.classList.add(\"ipywebgl-json-display\");\r\n        const jsonKey = document.createElement(\"div\");\r\n        jsonKey.classList.add(\"ipywebgl-json-key\");\r\n        jsonKey.textContent = \"uid:\";\r\n        const jsonValue = document.createElement(\"div\");\r\n        jsonValue.classList.add(\"ipywebgl-json-value\");\r\n        jsonValue.textContent = this.model.get('uid');\r\n        jsonDisplay.appendChild(jsonKey);\r\n        jsonDisplay.appendChild(jsonValue);\r\n        this.displayJson(this.model.get('_info'), jsonDisplay);\r\n        root.appendChild(jsonDisplay);\r\n    }\r\n    displayJson(json, parent) {\r\n        for (const key in json) {\r\n            const jsonKey = document.createElement(\"div\");\r\n            jsonKey.classList.add(\"ipywebgl-json-key\");\r\n            jsonKey.textContent = `${key}:`;\r\n            const jsonValue = document.createElement(\"div\");\r\n            jsonValue.classList.add(\"ipywebgl-json-value\");\r\n            if (typeof json[key] === \"object\") {\r\n                const nestedJsonDisplay = document.createElement(\"div\");\r\n                nestedJsonDisplay.classList.add(\"ipywebgl-json-display\");\r\n                this.displayJson(json[key], nestedJsonDisplay);\r\n                jsonValue.appendChild(nestedJsonDisplay);\r\n            }\r\n            else {\r\n                jsonValue.textContent = json[key];\r\n            }\r\n            parent.appendChild(jsonKey);\r\n            parent.appendChild(jsonValue);\r\n        }\r\n    }\r\n}\r\nexports.GLResourceView = GLResourceView;\r\n//# sourceMappingURL=glresource.js.map",
-        "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GLViewer = exports.GLModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst version_1 = require(\"./version\");\r\nconst matrix_1 = require(\"./matrix\");\r\nconst arraybuffer_1 = require(\"./arraybuffer\");\r\nclass GLModel extends base_1.DOMWidgetModel {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.resources = [];\r\n        this.bound_buffers = {};\r\n        this.commands = [];\r\n        this.buffers = [];\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: 'GLModel', _model_module: version_1.MODULE_NAME, _model_module_version: version_1.MODULE_VERSION, _view_name: 'GLViewer', _view_module: version_1.MODULE_NAME, _view_module_version: version_1.MODULE_VERSION, shader_matrix_major: 'row_major', width: 700, height: 500, camera_pos: [0, 50, 200], camera_yaw: 0, camera_pitch: 0, mouse_speed: 1, move_speed: 1, move_keys: 'wasd' });\r\n    }\r\n    initialize(attributes, options) {\r\n        super.initialize(attributes, options);\r\n        this.canvas = document.createElement('canvas');\r\n        this.ctx = this.canvas.getContext(\"webgl2\", { preserveDrawingBuffer: true });\r\n        if (this.ctx == null) {\r\n            console.error('could not create a webgl2 context, this is not supported in your browser');\r\n        }\r\n        else {\r\n            const gl = this.ctx;\r\n            this.view_block = gl.createBuffer();\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n            gl.bufferData(gl.UNIFORM_BUFFER, 256, gl.DYNAMIC_DRAW);\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n            gl.bindBufferBase(gl.UNIFORM_BUFFER, 0, this.view_block);\r\n            //extensions to activate\r\n            gl.getExtension(\"EXT_color_buffer_float\");\r\n        }\r\n        this.resizeCanvas();\r\n        this.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n        this.on_some_change(['camera_pos', 'camera_yaw', 'camera_pitch'], this.run_commands, this);\r\n        this.on('msg:custom', this.handle_custom_messages, this);\r\n        this.camera_matrix = matrix_1.m4Translation(0, 50, 200);\r\n        this.view_matrix = matrix_1.m4inverse(this.camera_matrix);\r\n    }\r\n    resizeCanvas() {\r\n        this.canvas.setAttribute('width', this.get('width'));\r\n        this.canvas.setAttribute('height', this.get('height'));\r\n        if (this.ctx != null) {\r\n            this.ctx.viewport(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n        }\r\n        this.projection_matrix = matrix_1.m4ProjectionMatrix(50.0, this.get('width') / this.get('height'), 1.0, 5000.0);\r\n    }\r\n    handle_custom_messages(command, buffers) {\r\n        if (command.clear == true) {\r\n            this.commands = [];\r\n            this.buffers = [];\r\n        }\r\n        let commands = command.commands;\r\n        let converted_buffers = [];\r\n        commands.forEach((element) => {\r\n            if (element.hasOwnProperty('buffer_metadata')) {\r\n                const converted = arraybuffer_1.buffer_to_array(element.buffer_metadata.dtype, buffers[element.buffer_metadata.index].buffer);\r\n                converted_buffers.push(converted);\r\n            }\r\n        });\r\n        if (command.only_once == true) {\r\n            this.execute_commands(commands, converted_buffers);\r\n        }\r\n        else {\r\n            let buffer_id_offset = this.buffers.length;\r\n            this.buffers = this.buffers.concat(converted_buffers);\r\n            commands.forEach((element) => {\r\n                if (element.hasOwnProperty('buffer_metadata')) {\r\n                    element.buffer_metadata.index += buffer_id_offset;\r\n                }\r\n            });\r\n            this.commands = this.commands.concat(commands);\r\n        }\r\n        this.run_commands();\r\n    }\r\n    update_camera() {\r\n        let pos = this.get('camera_pos');\r\n        let yaw = this.get('camera_yaw') * Math.PI / 180.0;\r\n        let pitch = this.get('camera_pitch') * Math.PI / 180.0;\r\n        this.camera_matrix = matrix_1.m4Translation(pos[0], pos[1], pos[2]);\r\n        this.camera_matrix = matrix_1.m4dot(this.camera_matrix, matrix_1.m4Yrotation(yaw));\r\n        this.camera_matrix = matrix_1.m4dot(this.camera_matrix, matrix_1.m4Xrotation(pitch));\r\n        this.view_matrix = matrix_1.m4inverse(this.camera_matrix);\r\n        this.view_proj_matrix = matrix_1.m4dot(this.projection_matrix, this.view_matrix);\r\n    }\r\n    run_commands() {\r\n        this.execute_commands(this.commands, this.buffers);\r\n    }\r\n    execute_commands(commands, converted_buffers) {\r\n        if (this.ctx == null)\r\n            return;\r\n        const gl = this.ctx;\r\n        this.update_camera();\r\n        // update the uniform Block\r\n        let cm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.camera_matrix) : this.camera_matrix;\r\n        const cm_f32 = new Float32Array(cm);\r\n        let vm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.view_matrix) : this.view_matrix;\r\n        const vm_f32 = new Float32Array(vm);\r\n        let pm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.projection_matrix) : this.projection_matrix;\r\n        const pm_f32 = new Float32Array(pm);\r\n        let vpm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.view_proj_matrix) : this.view_proj_matrix;\r\n        const vpm_f32 = new Float32Array(vpm);\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 0, cm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 64, vm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 128, pm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 192, vpm_f32, 0);\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n        commands.forEach((command) => {\r\n            this.execute_command(gl, command, converted_buffers);\r\n        });\r\n    }\r\n    glEnumToString(gl, value) {\r\n        const keys = [];\r\n        for (const key in gl) {\r\n            if (gl[key] === value) {\r\n                keys.push(key);\r\n            }\r\n        }\r\n        return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;\r\n    }\r\n    execute_command(gl, command, converted_buffers) {\r\n        //console.log(command);\r\n        //console.log(this.bound_buffers);\r\n        switch (command.cmd) {\r\n            case 'viewport':\r\n                gl.viewport(command.x, command.y, command.width, command.height);\r\n                break;\r\n            case 'enable':\r\n            case 'disable':\r\n                {\r\n                    let cap = 0;\r\n                    if (command.blend)\r\n                        cap |= gl.BLEND;\r\n                    if (command.depth_test)\r\n                        cap |= gl.DEPTH_TEST;\r\n                    if (command.dither)\r\n                        cap |= gl.DITHER;\r\n                    if (command.polygon_offset_fill)\r\n                        cap |= gl.POLYGON_OFFSET_FILL;\r\n                    if (command.sample_alpha_to_coverage)\r\n                        cap |= gl.SAMPLE_ALPHA_TO_COVERAGE;\r\n                    if (command.sample_coverage)\r\n                        cap |= gl.SAMPLE_COVERAGE;\r\n                    if (command.scissor_test)\r\n                        cap |= gl.SCISSOR_TEST;\r\n                    if (command.stencil_test)\r\n                        cap |= gl.STENCIL_TEST;\r\n                    if (command.rasterizer_discard)\r\n                        cap |= gl.RASTERIZER_DISCARD;\r\n                    if (command.cull_face)\r\n                        cap |= gl.CULL_FACE;\r\n                    if (command.cmd == 'enable') {\r\n                        gl.enable(cap);\r\n                    }\r\n                    else {\r\n                        gl.disable(cap);\r\n                    }\r\n                }\r\n                break;\r\n            case 'clearColor':\r\n                gl.clearColor(command.r, command.g, command.b, command.a);\r\n                break;\r\n            case 'clear':\r\n                {\r\n                    let bits = 0;\r\n                    if (command.depth)\r\n                        bits |= gl.DEPTH_BUFFER_BIT;\r\n                    if (command.color)\r\n                        bits |= gl.COLOR_BUFFER_BIT;\r\n                    if (command.stencil)\r\n                        bits |= gl.STENCIL_BUFFER_BIT;\r\n                    gl.clear(bits);\r\n                }\r\n                break;\r\n            case 'frontFace':\r\n                {\r\n                    gl.frontFace(gl[command.mode]);\r\n                }\r\n                break;\r\n            case 'cullFace':\r\n                {\r\n                    gl.cullFace(gl[command.mode]);\r\n                }\r\n                break;\r\n            // ------------------------------- DEPTH --------------------------------------\r\n            case 'depthFunc':\r\n                {\r\n                    gl.depthFunc(gl[command.func]);\r\n                }\r\n                break;\r\n            case 'depthMask':\r\n                {\r\n                    gl.depthMask(command.flag);\r\n                }\r\n                break;\r\n            case 'depthRange':\r\n                {\r\n                    gl.depthRange(command.z_near, command.z_far);\r\n                }\r\n                break;\r\n            // ------------------------------- COLOR --------------------------------------\r\n            case 'blendColor':\r\n                gl.blendColor(command.r, command.g, command.b, command.a);\r\n                break;\r\n            case 'blendEquation':\r\n                gl.blendEquation(gl[command.mode]);\r\n                break;\r\n            case 'blendEquationSeparate':\r\n                gl.blendEquationSeparate(gl[command.mode_rgb], gl[command.mode_alpha]);\r\n                break;\r\n            case 'blendFunc':\r\n                gl.blendFunc(gl[command.s_factor], gl[command.d_factor]);\r\n                break;\r\n            case 'blend_func_separate':\r\n                gl.blendFuncSeparate(gl[command.src_rgb], gl[command.dst_rgb], gl[command.src_alpha], gl[command.dst_alpha]);\r\n                break;\r\n            // ------------------------------- TEXTURE --------------------------------------\r\n            case 'createTexture':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createTexture();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'texture' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindTexture':\r\n                {\r\n                    if (command.texture > -1) {\r\n                        const texture = this.get_resource(command.texture).get('_gl_ptr');\r\n                        gl.bindTexture(gl[command.target], texture);\r\n                    }\r\n                    else {\r\n                        gl.bindTexture(gl[command.target], null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'activeTexture':\r\n                gl.activeTexture(gl.TEXTURE0 + command.texture);\r\n                break;\r\n            case 'generateMipmap':\r\n                gl.generateMipmap(gl[command.target]);\r\n                break;\r\n            case 'texImage2D':\r\n                if (command.hasOwnProperty('buffer_metadata')) {\r\n                    gl.texImage2D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.border, gl[command.format], gl[command.data_type], converted_buffers[command.buffer_metadata.index]);\r\n                }\r\n                else {\r\n                    gl.texImage2D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.border, gl[command.format], gl[command.data_type], null);\r\n                }\r\n                break;\r\n            case 'texStorage2D':\r\n                {\r\n                    gl.texStorage2D(gl[command.target], command.levels, gl[command.internal_format], command.width, command.height);\r\n                }\r\n                break;\r\n            case 'texImage3D':\r\n                if (command.hasOwnProperty('buffer_metadata')) {\r\n                    gl.texImage3D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.depth, command.border, gl[command.format], gl[command.data_type], converted_buffers[command.buffer_metadata.index]);\r\n                }\r\n                else {\r\n                    gl.texImage3D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.depth, command.border, gl[command.format], gl[command.data_type], null);\r\n                }\r\n                break;\r\n            case 'texStorage3D':\r\n                {\r\n                    gl.texStorage3D(gl[command.target], command.levels, gl[command.internal_format], command.width, command.height, command.depth);\r\n                }\r\n                break;\r\n            case 'texParameteri':\r\n                gl.texParameteri(gl[command.target], gl[command.pname], command.param);\r\n                break;\r\n            case 'texParameterf':\r\n                gl.texParameterf(gl[command.target], gl[command.pname], command.param);\r\n                break;\r\n            case 'texParameter_str':\r\n                gl.texParameteri(gl[command.target], gl[command.pname], gl[command.param]);\r\n                break;\r\n            case 'pixelStorei':\r\n                {\r\n                    if (command.pname == 'UNPACK_COLORSPACE_CONVERSION_WEBGL') {\r\n                        gl.pixelStorei(gl[command.pname], gl[command.param]);\r\n                    }\r\n                    else {\r\n                        gl.pixelStorei(gl[command.pname], command.param);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- SHADERS --------------------------------------\r\n            case 'createShader':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createShader(gl[command.type]);\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: command.type });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'shaderSource':\r\n                {\r\n                    const res = this.get_resource(command.shader);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.shaderSource(ptr, command.source);\r\n                }\r\n                break;\r\n            case 'compileShader':\r\n                {\r\n                    const res = this.get_resource(command.shader);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.compileShader(ptr);\r\n                    let resinfo = res.get('_info');\r\n                    if (!gl.getShaderParameter(ptr, gl.COMPILE_STATUS)) {\r\n                        let info = gl.getShaderInfoLog(ptr);\r\n                        resinfo.message = info;\r\n                    }\r\n                    else {\r\n                        resinfo.message = 'compiled';\r\n                    }\r\n                    res.set('_info', resinfo);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            // ------------------------------- PROGRAMS --------------------------------------\r\n            case 'createProgram':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createProgram();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Program' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'attachShader':\r\n                {\r\n                    const prog = this.get_resource(command.program).get('_gl_ptr');\r\n                    const shader = this.get_resource(command.shader).get('_gl_ptr');\r\n                    gl.attachShader(prog, shader);\r\n                }\r\n                break;\r\n            case 'bindAttribLocation':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.bindAttribLocation(ptr, command.index, command.name);\r\n                }\r\n                break;\r\n            case 'linkProgram':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.linkProgram(ptr);\r\n                    gl.validateProgram(ptr);\r\n                    let resinfo = res.get('_info');\r\n                    if (!gl.getProgramParameter(ptr, gl.LINK_STATUS)) {\r\n                        let info = gl.getShaderInfoLog(ptr);\r\n                        resinfo.message = info;\r\n                    }\r\n                    else {\r\n                        //bind our viewBlock\r\n                        let viewBlockIndex = gl.getUniformBlockIndex(ptr, 'ViewBlock');\r\n                        if (viewBlockIndex < 4294967295) {\r\n                            gl.uniformBlockBinding(ptr, viewBlockIndex, 0);\r\n                        }\r\n                        resinfo.message = 'linked';\r\n                        resinfo.uniforms_blocks = [];\r\n                        resinfo.uniforms = [];\r\n                        const numUniforms = gl.getProgramParameter(ptr, gl.ACTIVE_UNIFORMS);\r\n                        const indices = [...Array(numUniforms).keys()];\r\n                        const blockIndices = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_BLOCK_INDEX);\r\n                        const offsets = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_OFFSET);\r\n                        for (let i = 0; i < numUniforms; ++i) {\r\n                            const info = gl.getActiveUniform(ptr, i);\r\n                            if (info) {\r\n                                // regroup the blocks\r\n                                if (blockIndices[i] > -1) {\r\n                                    let uniform_block = resinfo.uniforms_blocks.find((element) => { return element.index == blockIndices[i]; });\r\n                                    if (uniform_block == undefined) {\r\n                                        uniform_block = {\r\n                                            index: blockIndices[i],\r\n                                            name: gl.getActiveUniformBlockName(ptr, blockIndices[i]),\r\n                                            size: gl.getActiveUniformBlockParameter(ptr, blockIndices[i], gl.UNIFORM_BLOCK_DATA_SIZE),\r\n                                            uniforms: []\r\n                                        };\r\n                                        resinfo.uniforms_blocks.push(uniform_block);\r\n                                    }\r\n                                    uniform_block.uniforms.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, offset: offsets[i] });\r\n                                }\r\n                                else {\r\n                                    resinfo.uniforms.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, location: gl.getUniformLocation(ptr, info.name) });\r\n                                }\r\n                            }\r\n                        }\r\n                        resinfo.attributes = [];\r\n                        const numAttribute = gl.getProgramParameter(ptr, gl.ACTIVE_ATTRIBUTES);\r\n                        for (let i = 0; i < numAttribute; ++i) {\r\n                            const info = gl.getActiveAttrib(ptr, i);\r\n                            if (info)\r\n                                resinfo.attributes.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, location: gl.getAttribLocation(ptr, info.name) });\r\n                        }\r\n                    }\r\n                    res.set('_info', resinfo);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'useProgram':\r\n                {\r\n                    if (command.program >= 0) {\r\n                        const res = this.get_resource(command.program);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.useProgram(ptr);\r\n                        this.bound_program = res;\r\n                    }\r\n                    else {\r\n                        gl.useProgram(null);\r\n                        this.bound_program = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'uniform':\r\n            case 'uniformMatrix':\r\n                {\r\n                    if (this.bound_program != null) {\r\n                        let resinfo = this.bound_program.get('_info');\r\n                        const uniform = resinfo.uniforms.find((element) => { return element.name == command.name; });\r\n                        if (uniform != undefined) {\r\n                            const location = uniform.location;\r\n                            if (command.cmd == 'uniform') {\r\n                                let shape = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 1];\r\n                                if (command.buffer_metadata.dtype == 'int32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1iv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2iv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3iv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4iv(location, bufarray);\r\n                                }\r\n                                else if (command.buffer_metadata.dtype == 'uint32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1uiv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2uiv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3uiv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4uiv(location, bufarray);\r\n                                }\r\n                                else if (command.buffer_metadata.dtype == 'float32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1fv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2fv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3fv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4fv(location, bufarray);\r\n                                }\r\n                            }\r\n                            else {\r\n                                let a = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 2];\r\n                                let b = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 1];\r\n                                let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                if (a == 2) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix2x3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix2x4fv(location, false, bufarray);\r\n                                }\r\n                                else if (a == 3) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix3x2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix3x4fv(location, false, bufarray);\r\n                                }\r\n                                else if (a == 4) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix4x2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix4x3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix4fv(location, false, bufarray);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 'uniformBlockBinding':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    const uniformblock = res.get('_info').uniforms_blocks.find((element) => { return element.name == command.uniform_block_name; });\r\n                    if (uniformblock != undefined) {\r\n                        gl.uniformBlockBinding(ptr, uniformblock.index, command.uniform_block_binding);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- BUFFERS --------------------------------------\r\n            case 'createBuffer':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createBuffer();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Buffer' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindBuffer':\r\n                {\r\n                    const target = command.target;\r\n                    if (command.buffer >= 0) {\r\n                        const res = this.get_resource(command.buffer);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindBuffer(gl[target], ptr);\r\n                        this.bound_buffers[target] = res;\r\n                    }\r\n                    else {\r\n                        gl.bindBuffer(gl[target], null);\r\n                        this.bound_buffers[target] = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'bindBufferBase':\r\n                {\r\n                    const target = command.target;\r\n                    if (command.buffer >= 0) {\r\n                        const res = this.get_resource(command.buffer);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindBufferBase(gl[target], command.index, ptr);\r\n                    }\r\n                    else {\r\n                        gl.bindBufferBase(gl[target], command.index, null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'bufferData':\r\n                {\r\n                    const target = command.target;\r\n                    const usage = command.usage;\r\n                    if (command.hasOwnProperty('buffer_metadata')) {\r\n                        gl.bufferData(gl[target], converted_buffers[command.buffer_metadata.index], gl[usage]);\r\n                        let buf = this.bound_buffers[target];\r\n                        if (command.update_info && buf != null) {\r\n                            const size = gl.getBufferParameter(gl[target], gl.BUFFER_SIZE);\r\n                            buf.set('_info', { type: \"Buffer\", size: size, target: target });\r\n                            buf.save_changes();\r\n                        }\r\n                    }\r\n                    else {\r\n                        let buf = this.bound_buffers[target];\r\n                        gl.bufferData(gl[target], null, gl[usage]);\r\n                        if (command.update_info && buf != null) {\r\n                            buf.set('_info', { type: \"Buffer\", size: 'Undefined', target: target });\r\n                            buf.save_changes();\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 'createUniformBuffer':\r\n                {\r\n                    let res = this.get_resource(command.buffer);\r\n                    const ptr = gl.createBuffer();\r\n                    let info = { type: 'Buffer' };\r\n                    const prog = this.get_resource(command.program);\r\n                    const uniformblock = prog.get('_info').uniforms_blocks.find((element) => { return element.name == command.block_name; });\r\n                    if (uniformblock != undefined) {\r\n                        gl.bindBuffer(gl.UNIFORM_BUFFER, ptr);\r\n                        gl.bufferData(gl.UNIFORM_BUFFER, uniformblock.size, gl[command.usage]);\r\n                        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n                        this.bound_buffers[\"UNIFORM_BUFFER\"] = null;\r\n                        info[\"size\"] = uniformblock.size;\r\n                        info[\"target\"] = \"UNIFORM_BUFFER\";\r\n                        info[\"uniformblock\"] = uniformblock;\r\n                    }\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', info);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bufferSubData':\r\n            case 'bufferSubDataStr':\r\n                {\r\n                    const target = command.target;\r\n                    let offset = command.dst_byte_offset;\r\n                    if (command.cmd == 'bufferSubDataStr') {\r\n                        offset = 0;\r\n                        let buf = this.bound_buffers[target];\r\n                        if (buf != null) {\r\n                            const uniformblock = buf.get('_info').uniformblock;\r\n                            const uniform = uniformblock.uniforms.find((element) => { return element.name == command.dst_byte_offset; });\r\n                            if (uniform != undefined) {\r\n                                offset = uniform.offset;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (command.hasOwnProperty('buffer_metadata')) {\r\n                        gl.bufferSubData(gl[target], offset, converted_buffers[command.buffer_metadata.index], command.src_offset);\r\n                    }\r\n                    else {\r\n                        gl.bufferSubData(gl[target], offset, command.src_offset);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- VERTEX ARRAYS --------------------------------------\r\n            case 'createVertexArray':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createVertexArray();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Vertex Array Object', bindings: [] });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindVertexArray':\r\n                {\r\n                    if (command.vertex_array >= 0) {\r\n                        const res = this.get_resource(command.vertex_array);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindVertexArray(ptr);\r\n                        this.bound_vao = res;\r\n                    }\r\n                    else {\r\n                        gl.bindVertexArray(null);\r\n                        this.bound_vao = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'vertexAttribPointer':\r\n            case 'vertexAttribIPointer':\r\n            case 'enableVertexAttribArray':\r\n            case 'disableVertexAttribArray':\r\n            case 'vertexAttrib[1234]fv':\r\n            case 'vertexAttribI4[u]iv':\r\n                {\r\n                    let index = -1;\r\n                    if (typeof command.index === 'number') {\r\n                        index = command.index;\r\n                    }\r\n                    else {\r\n                        if (this.bound_program != null) {\r\n                            const attr = this.bound_program.get('_info').attributes.find((element) => { return element.name == command.index; });\r\n                            if (attr != undefined) {\r\n                                index = attr.location;\r\n                            }\r\n                        }\r\n                        else {\r\n                            console.error(\"a program must be bound to find the attribute\");\r\n                        }\r\n                    }\r\n                    let buf = this.bound_buffers['ARRAY_BUFFER'];\r\n                    if (index >= 0) {\r\n                        if (command.cmd == \"vertexAttribIPointer\") {\r\n                            gl.vertexAttribIPointer(index, command.size, gl[command.type], command.stride, command.offset);\r\n                            if (this.bound_vao != null && buf != null) {\r\n                                let vao_info = this.bound_vao.get('_info');\r\n                                const buffer_uid = buf.get('uid');\r\n                                let binding_info = vao_info.bindings.find((element) => { return element.buffer_uid == buffer_uid; });\r\n                                if (binding_info == undefined) {\r\n                                    binding_info = { buffer_uid: buffer_uid, attributes: [] };\r\n                                    vao_info.bindings.push(binding_info);\r\n                                }\r\n                                binding_info.attributes.push({ pointer: \"vertexAttribIPointer\", index: index, size: command.size, type: command.type, stride: command.stride, offset: command.offset });\r\n                                this.bound_vao.set('_info', vao_info);\r\n                                this.bound_vao.save_changes();\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribPointer\") {\r\n                            gl.vertexAttribPointer(index, command.size, gl[command.type], command.normalized, command.stride, command.offset);\r\n                            if (this.bound_vao != null && buf != null) {\r\n                                let vao_info = this.bound_vao.get('_info');\r\n                                const buffer_uid = buf.get('uid');\r\n                                let binding_info = vao_info.bindings.find((element) => { return element.buffer_uid == buffer_uid; });\r\n                                if (binding_info == undefined) {\r\n                                    binding_info = { buffer_uid: buffer_uid, attributes: [] };\r\n                                    vao_info.bindings.push(binding_info);\r\n                                }\r\n                                binding_info.attributes.push({ pointer: \"vertexAttribPointer\", index: index, size: command.size, type: command.type, normalized: command.normalized, stride: command.stride, offset: command.offset });\r\n                                this.bound_vao.set('_info', vao_info);\r\n                                this.bound_vao.save_changes();\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"enableVertexAttribArray\") {\r\n                            gl.enableVertexAttribArray(index);\r\n                        }\r\n                        else if (command.cmd == \"disableVertexAttribArray\") {\r\n                            gl.disableVertexAttribArray(index);\r\n                        }\r\n                        else if (command.cmd == \"vertexAttrib[1234]fv\") {\r\n                            if (command.buffer_metadata.shape[0] == 1) {\r\n                                gl.vertexAttrib1fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            else if (command.buffer_metadata.shape[0] == 2) {\r\n                                gl.vertexAttrib2fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            if (command.buffer_metadata.shape[0] == 3) {\r\n                                gl.vertexAttrib3fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            if (command.buffer_metadata.shape[0] == 4) {\r\n                                gl.vertexAttrib4fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribI4[u]iv\") {\r\n                            if (command.buffer_metadata.dtype == \"uint32\") {\r\n                                gl.vertexAttribI4uiv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            else if (command.buffer_metadata.dtype == \"int32\") {\r\n                                gl.vertexAttribI4iv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        console.error(`attribute ${command.index} location not found`);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- RENDER --------------------------------------\r\n            case 'drawArrays':\r\n                {\r\n                    gl.drawArrays(gl[command.mode], command.first, command.count);\r\n                }\r\n                break;\r\n            case 'drawArraysInstanced':\r\n                {\r\n                    gl.drawArraysInstanced(gl[command.mode], command.first, command.count, command.instance_count);\r\n                }\r\n                break;\r\n            case 'drawElements':\r\n                {\r\n                    gl.drawElements(gl[command.mode], command.count, gl[command.type], command.offset);\r\n                }\r\n                break;\r\n            case 'drawElementsInstanced':\r\n                {\r\n                    gl.drawElementsInstanced(gl[command.mode], command.count, gl[command.type], command.offset, command.instance_count);\r\n                }\r\n                break;\r\n            // ------------------------------- FRAMEBUFFER --------------------------------------\r\n            case 'createFramebuffer':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createFramebuffer();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Framebuffer' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindFramebuffer':\r\n                {\r\n                    if (command.framebuffer >= 0) {\r\n                        let res = this.get_resource(command.framebuffer);\r\n                        gl.bindFramebuffer(gl[command.target], res.get('_gl_ptr'));\r\n                    }\r\n                    else {\r\n                        gl.bindFramebuffer(gl[command.target], null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'framebufferTexture2D':\r\n                {\r\n                    let res = this.get_resource(command.texture);\r\n                    gl.framebufferTexture2D(gl[command.target], gl[command.attachement], gl[command.textarget], res.get('_gl_ptr'), command.level);\r\n                }\r\n                break;\r\n            case 'drawBuffers':\r\n                {\r\n                    const buffers = command.buffers.map((element) => { return gl[element]; });\r\n                    gl.drawBuffers(buffers);\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    register_resource(resource) {\r\n        if (resource.get('uid') != this.resources.length) {\r\n            console.error('uid not matching what we have internally');\r\n        }\r\n        this.resources.push(resource);\r\n    }\r\n    get_resource(index) {\r\n        return this.resources[index];\r\n    }\r\n}\r\nexports.GLModel = GLModel;\r\nGLModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);\r\nclass GLViewer extends base_1.DOMWidgetView {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.is_mouse_down = false;\r\n        this.move_direction = [false, false, false, false];\r\n        this.will_redraw = false;\r\n    }\r\n    render() {\r\n        this.el.appendChild(this.model.canvas);\r\n        this.resizeCanvas();\r\n        this.model.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n        this.el.addEventListener('mousemove', {\r\n            handleEvent: this.onMouseMove.bind(this)\r\n        });\r\n        this.el.addEventListener('mousedown', {\r\n            handleEvent: this.onMouseDown.bind(this)\r\n        });\r\n        this.el.addEventListener('mouseup', {\r\n            handleEvent: this.onMouseUp.bind(this)\r\n        });\r\n        this.el.addEventListener('mouseout', {\r\n            handleEvent: this.onMouseOut.bind(this)\r\n        });\r\n        this.el.addEventListener('keydown', {\r\n            handleEvent: this.onKeyDown.bind(this)\r\n        });\r\n        this.el.addEventListener('keyup', {\r\n            handleEvent: this.onKeyUp.bind(this)\r\n        });\r\n        this.el.setAttribute('tabindex', '0');\r\n    }\r\n    resizeCanvas() {\r\n        this.el.setAttribute('width', this.model.get('width'));\r\n        this.el.setAttribute('height', this.model.get('height'));\r\n        this.model.resizeCanvas();\r\n    }\r\n    redraw() {\r\n        this.will_redraw = false;\r\n        // update movement if needed\r\n        if (this.move_direction[0] || this.move_direction[1] || this.move_direction[2] || this.move_direction[3]) {\r\n            let speed = this.model.get('move_speed');\r\n            let forward_axis = matrix_1.m4getColumnK(this.model.camera_matrix);\r\n            let side_axis = matrix_1.m4getColumnI(this.model.camera_matrix);\r\n            let camera_pos = this.model.get('camera_pos');\r\n            if (this.move_direction[0]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(forward_axis, -speed));\r\n            }\r\n            if (this.move_direction[2]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(forward_axis, speed));\r\n            }\r\n            if (this.move_direction[1]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(side_axis, -speed));\r\n            }\r\n            if (this.move_direction[3]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(side_axis, speed));\r\n            }\r\n            this.model.set('camera_pos', camera_pos);\r\n            this.touch();\r\n            // request a new frame if we are moving\r\n            this.requestRedraw();\r\n        }\r\n        // re draw\r\n        this.model.run_commands();\r\n    }\r\n    requestRedraw() {\r\n        if (this.will_redraw == false) {\r\n            this.will_redraw = true;\r\n            requestAnimationFrame(this.redraw.bind(this));\r\n        }\r\n    }\r\n    onMouseMove(event) {\r\n        //this.model.send({ event: 'mouse_move', ...this.getCoordinates(event) }, {});\r\n        if (this.is_mouse_down) {\r\n            let speed = this.model.get('mouse_speed');\r\n            this.model.set('camera_yaw', this.model.get('camera_yaw') - (event.movementX) * 0.2 * speed);\r\n            this.model.set('camera_pitch', this.model.get('camera_pitch') - (event.movementY) * 0.2 * speed);\r\n            this.touch();\r\n            this.requestRedraw();\r\n        }\r\n    }\r\n    onMouseDown(event) {\r\n        this.is_mouse_down = true;\r\n        this.model.canvas.focus();\r\n    }\r\n    onMouseUp(event) {\r\n        this.is_mouse_down = false;\r\n    }\r\n    onMouseOut(event) {\r\n        this.is_mouse_down = false;\r\n        this.move_direction = [false, false, false, false];\r\n    }\r\n    onKeyDown(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        let keys = this.model.get('move_keys');\r\n        if (event.repeat == false) {\r\n            if (event.key == keys[0]) {\r\n                this.move_direction[0] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[1]) {\r\n                this.move_direction[1] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[2]) {\r\n                this.move_direction[2] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[3]) {\r\n                this.move_direction[3] = true;\r\n                this.requestRedraw();\r\n            }\r\n        }\r\n    }\r\n    onKeyUp(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        let keys = this.model.get('move_keys');\r\n        if (event.key == keys[0]) {\r\n            this.move_direction[0] = false;\r\n        }\r\n        else if (event.key == keys[1]) {\r\n            this.move_direction[1] = false;\r\n        }\r\n        else if (event.key == keys[2]) {\r\n            this.move_direction[2] = false;\r\n        }\r\n        else if (event.key == keys[3]) {\r\n            this.move_direction[3] = false;\r\n        }\r\n    }\r\n    getCoordinates(event) {\r\n        const rect = this.el.getBoundingClientRect();\r\n        const x = (this.model.get('width') * (event.clientX - rect.left)) / rect.width;\r\n        const y = (this.model.get('height') * (event.clientY - rect.top)) / rect.height;\r\n        return { x, y };\r\n    }\r\n}\r\nexports.GLViewer = GLViewer;\r\n//# sourceMappingURL=glviewer.js.map",
+        "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GLViewer = exports.GLModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst version_1 = require(\"./version\");\r\nconst matrix_1 = require(\"./matrix\");\r\nconst arraybuffer_1 = require(\"./arraybuffer\");\r\nclass GLModel extends base_1.DOMWidgetModel {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.resources = [];\r\n        this.bound_buffers = {};\r\n        this.commands = [];\r\n        this.buffers = [];\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: 'GLModel', _model_module: version_1.MODULE_NAME, _model_module_version: version_1.MODULE_VERSION, _view_name: 'GLViewer', _view_module: version_1.MODULE_NAME, _view_module_version: version_1.MODULE_VERSION, shader_matrix_major: 'row_major', width: 700, height: 500, camera_pos: [0, 50, 200], camera_yaw: 0, camera_pitch: 0, mouse_speed: 1, move_speed: 1, move_keys: 'wasd' });\r\n    }\r\n    initialize(attributes, options) {\r\n        super.initialize(attributes, options);\r\n        this.canvas = document.createElement('canvas');\r\n        this.ctx = this.canvas.getContext(\"webgl2\", { preserveDrawingBuffer: true });\r\n        if (this.ctx == null) {\r\n            console.error('could not create a webgl2 context, this is not supported in your browser');\r\n        }\r\n        else {\r\n            const gl = this.ctx;\r\n            this.view_block = gl.createBuffer();\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n            gl.bufferData(gl.UNIFORM_BUFFER, 256, gl.DYNAMIC_DRAW);\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n            gl.bindBufferBase(gl.UNIFORM_BUFFER, 0, this.view_block);\r\n            //extensions to activate\r\n            gl.getExtension(\"EXT_color_buffer_float\");\r\n        }\r\n        this.resizeCanvas();\r\n        this.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n        this.on_some_change(['camera_pos', 'camera_yaw', 'camera_pitch'], this.run_commands, this);\r\n        this.on('msg:custom', this.handle_custom_messages, this);\r\n        this.camera_matrix = matrix_1.m4Translation(0, 50, 200);\r\n        this.view_matrix = matrix_1.m4inverse(this.camera_matrix);\r\n    }\r\n    resizeCanvas() {\r\n        this.canvas.setAttribute('width', this.get('width'));\r\n        this.canvas.setAttribute('height', this.get('height'));\r\n        if (this.ctx != null) {\r\n            this.ctx.viewport(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n        }\r\n        this.projection_matrix = matrix_1.m4ProjectionMatrix(50.0, this.get('width') / this.get('height'), 1.0, 5000.0);\r\n    }\r\n    handle_custom_messages(command, buffers) {\r\n        if (command.clear == true) {\r\n            this.commands = [];\r\n            this.buffers = [];\r\n        }\r\n        let commands = command.commands;\r\n        let converted_buffers = [];\r\n        commands.forEach((element) => {\r\n            if (element.hasOwnProperty('buffer_metadata')) {\r\n                const converted = arraybuffer_1.buffer_to_array(element.buffer_metadata.dtype, buffers[element.buffer_metadata.index].buffer);\r\n                converted_buffers.push(converted);\r\n            }\r\n        });\r\n        if (command.only_once == true) {\r\n            this.execute_commands(commands, converted_buffers);\r\n        }\r\n        else {\r\n            let buffer_id_offset = this.buffers.length;\r\n            this.buffers = this.buffers.concat(converted_buffers);\r\n            commands.forEach((element) => {\r\n                if (element.hasOwnProperty('buffer_metadata')) {\r\n                    element.buffer_metadata.index += buffer_id_offset;\r\n                }\r\n            });\r\n            this.commands = this.commands.concat(commands);\r\n        }\r\n        this.run_commands();\r\n    }\r\n    update_camera() {\r\n        let pos = this.get('camera_pos');\r\n        let yaw = this.get('camera_yaw') * Math.PI / 180.0;\r\n        let pitch = this.get('camera_pitch') * Math.PI / 180.0;\r\n        this.camera_matrix = matrix_1.m4Translation(pos[0], pos[1], pos[2]);\r\n        this.camera_matrix = matrix_1.m4dot(this.camera_matrix, matrix_1.m4Yrotation(yaw));\r\n        this.camera_matrix = matrix_1.m4dot(this.camera_matrix, matrix_1.m4Xrotation(pitch));\r\n        this.view_matrix = matrix_1.m4inverse(this.camera_matrix);\r\n        this.view_proj_matrix = matrix_1.m4dot(this.projection_matrix, this.view_matrix);\r\n    }\r\n    run_commands() {\r\n        this.execute_commands(this.commands, this.buffers);\r\n    }\r\n    execute_commands(commands, converted_buffers) {\r\n        if (this.ctx == null)\r\n            return;\r\n        const gl = this.ctx;\r\n        this.update_camera();\r\n        // update the uniform Block\r\n        let cm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.camera_matrix) : this.camera_matrix;\r\n        const cm_f32 = new Float32Array(cm);\r\n        let vm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.view_matrix) : this.view_matrix;\r\n        const vm_f32 = new Float32Array(vm);\r\n        let pm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.projection_matrix) : this.projection_matrix;\r\n        const pm_f32 = new Float32Array(pm);\r\n        let vpm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.view_proj_matrix) : this.view_proj_matrix;\r\n        const vpm_f32 = new Float32Array(vpm);\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 0, cm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 64, vm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 128, pm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 192, vpm_f32, 0);\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n        commands.forEach((command) => {\r\n            this.execute_command(gl, command, converted_buffers);\r\n        });\r\n    }\r\n    glEnumToString(gl, value) {\r\n        const keys = [];\r\n        for (const key in gl) {\r\n            if (gl[key] === value) {\r\n                keys.push(key);\r\n            }\r\n        }\r\n        return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;\r\n    }\r\n    execute_command(gl, command, converted_buffers) {\r\n        console.log(command);\r\n        //console.log(this.bound_buffers);\r\n        switch (command.cmd) {\r\n            case 'viewport':\r\n                gl.viewport(command.x, command.y, command.width, command.height);\r\n                break;\r\n            case 'enable':\r\n            case 'disable':\r\n                {\r\n                    let cap = 0;\r\n                    if (command.blend)\r\n                        cap |= gl.BLEND;\r\n                    if (command.depth_test)\r\n                        cap |= gl.DEPTH_TEST;\r\n                    if (command.dither)\r\n                        cap |= gl.DITHER;\r\n                    if (command.polygon_offset_fill)\r\n                        cap |= gl.POLYGON_OFFSET_FILL;\r\n                    if (command.sample_alpha_to_coverage)\r\n                        cap |= gl.SAMPLE_ALPHA_TO_COVERAGE;\r\n                    if (command.sample_coverage)\r\n                        cap |= gl.SAMPLE_COVERAGE;\r\n                    if (command.scissor_test)\r\n                        cap |= gl.SCISSOR_TEST;\r\n                    if (command.stencil_test)\r\n                        cap |= gl.STENCIL_TEST;\r\n                    if (command.rasterizer_discard)\r\n                        cap |= gl.RASTERIZER_DISCARD;\r\n                    if (command.cull_face)\r\n                        cap |= gl.CULL_FACE;\r\n                    if (command.cmd == 'enable') {\r\n                        gl.enable(cap);\r\n                    }\r\n                    else {\r\n                        gl.disable(cap);\r\n                    }\r\n                }\r\n                break;\r\n            case 'clearColor':\r\n                gl.clearColor(command.r, command.g, command.b, command.a);\r\n                break;\r\n            case 'clear':\r\n                {\r\n                    let bits = 0;\r\n                    if (command.depth)\r\n                        bits |= gl.DEPTH_BUFFER_BIT;\r\n                    if (command.color)\r\n                        bits |= gl.COLOR_BUFFER_BIT;\r\n                    if (command.stencil)\r\n                        bits |= gl.STENCIL_BUFFER_BIT;\r\n                    gl.clear(bits);\r\n                }\r\n                break;\r\n            case 'frontFace':\r\n                {\r\n                    gl.frontFace(gl[command.mode]);\r\n                }\r\n                break;\r\n            case 'cullFace':\r\n                {\r\n                    gl.cullFace(gl[command.mode]);\r\n                }\r\n                break;\r\n            // ------------------------------- DEPTH --------------------------------------\r\n            case 'depthFunc':\r\n                {\r\n                    gl.depthFunc(gl[command.func]);\r\n                }\r\n                break;\r\n            case 'depthMask':\r\n                {\r\n                    gl.depthMask(command.flag);\r\n                }\r\n                break;\r\n            case 'depthRange':\r\n                {\r\n                    gl.depthRange(command.z_near, command.z_far);\r\n                }\r\n                break;\r\n            // ------------------------------- COLOR --------------------------------------\r\n            case 'blendColor':\r\n                gl.blendColor(command.r, command.g, command.b, command.a);\r\n                break;\r\n            case 'blendEquation':\r\n                gl.blendEquation(gl[command.mode]);\r\n                break;\r\n            case 'blendEquationSeparate':\r\n                gl.blendEquationSeparate(gl[command.mode_rgb], gl[command.mode_alpha]);\r\n                break;\r\n            case 'blendFunc':\r\n                gl.blendFunc(gl[command.s_factor], gl[command.d_factor]);\r\n                break;\r\n            case 'blend_func_separate':\r\n                gl.blendFuncSeparate(gl[command.src_rgb], gl[command.dst_rgb], gl[command.src_alpha], gl[command.dst_alpha]);\r\n                break;\r\n            // ------------------------------- TEXTURE --------------------------------------\r\n            case 'createTexture':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createTexture();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'texture' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindTexture':\r\n                {\r\n                    if (command.texture > -1) {\r\n                        const texture = this.get_resource(command.texture).get('_gl_ptr');\r\n                        gl.bindTexture(gl[command.target], texture);\r\n                    }\r\n                    else {\r\n                        gl.bindTexture(gl[command.target], null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'activeTexture':\r\n                gl.activeTexture(gl.TEXTURE0 + command.texture);\r\n                break;\r\n            case 'generateMipmap':\r\n                gl.generateMipmap(gl[command.target]);\r\n                break;\r\n            case 'texImage2D':\r\n                if (command.hasOwnProperty('buffer_metadata')) {\r\n                    gl.texImage2D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.border, gl[command.format], gl[command.data_type], converted_buffers[command.buffer_metadata.index]);\r\n                }\r\n                else {\r\n                    gl.texImage2D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.border, gl[command.format], gl[command.data_type], null);\r\n                }\r\n                break;\r\n            case 'texStorage2D':\r\n                {\r\n                    gl.texStorage2D(gl[command.target], command.levels, gl[command.internal_format], command.width, command.height);\r\n                }\r\n                break;\r\n            case 'texImage3D':\r\n                if (command.hasOwnProperty('buffer_metadata')) {\r\n                    gl.texImage3D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.depth, command.border, gl[command.format], gl[command.data_type], converted_buffers[command.buffer_metadata.index]);\r\n                }\r\n                else {\r\n                    gl.texImage3D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.depth, command.border, gl[command.format], gl[command.data_type], null);\r\n                }\r\n                break;\r\n            case 'texStorage3D':\r\n                {\r\n                    gl.texStorage3D(gl[command.target], command.levels, gl[command.internal_format], command.width, command.height, command.depth);\r\n                }\r\n                break;\r\n            case 'texParameteri':\r\n                gl.texParameteri(gl[command.target], gl[command.pname], command.param);\r\n                break;\r\n            case 'texParameterf':\r\n                gl.texParameterf(gl[command.target], gl[command.pname], command.param);\r\n                break;\r\n            case 'texParameter_str':\r\n                gl.texParameteri(gl[command.target], gl[command.pname], gl[command.param]);\r\n                break;\r\n            case 'pixelStorei':\r\n                {\r\n                    if (command.pname == 'UNPACK_COLORSPACE_CONVERSION_WEBGL') {\r\n                        gl.pixelStorei(gl[command.pname], gl[command.param]);\r\n                    }\r\n                    else {\r\n                        gl.pixelStorei(gl[command.pname], command.param);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- SHADERS --------------------------------------\r\n            case 'createShader':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createShader(gl[command.type]);\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: command.type });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'shaderSource':\r\n                {\r\n                    const res = this.get_resource(command.shader);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.shaderSource(ptr, command.source);\r\n                }\r\n                break;\r\n            case 'compileShader':\r\n                {\r\n                    const res = this.get_resource(command.shader);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.compileShader(ptr);\r\n                    let resinfo = res.get('_info');\r\n                    if (!gl.getShaderParameter(ptr, gl.COMPILE_STATUS)) {\r\n                        let info = gl.getShaderInfoLog(ptr);\r\n                        resinfo.message = info;\r\n                    }\r\n                    else {\r\n                        resinfo.message = 'compiled';\r\n                    }\r\n                    res.set('_info', resinfo);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            // ------------------------------- PROGRAMS --------------------------------------\r\n            case 'createProgram':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createProgram();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Program' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'attachShader':\r\n                {\r\n                    const prog = this.get_resource(command.program).get('_gl_ptr');\r\n                    const shader = this.get_resource(command.shader).get('_gl_ptr');\r\n                    gl.attachShader(prog, shader);\r\n                }\r\n                break;\r\n            case 'bindAttribLocation':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.bindAttribLocation(ptr, command.index, command.name);\r\n                }\r\n                break;\r\n            case 'linkProgram':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.linkProgram(ptr);\r\n                    gl.validateProgram(ptr);\r\n                    let resinfo = res.get('_info');\r\n                    if (!gl.getProgramParameter(ptr, gl.LINK_STATUS)) {\r\n                        let info = gl.getShaderInfoLog(ptr);\r\n                        resinfo.message = info;\r\n                    }\r\n                    else {\r\n                        //bind our viewBlock\r\n                        let viewBlockIndex = gl.getUniformBlockIndex(ptr, 'ViewBlock');\r\n                        if (viewBlockIndex < 4294967295) {\r\n                            gl.uniformBlockBinding(ptr, viewBlockIndex, 0);\r\n                        }\r\n                        resinfo.message = 'linked';\r\n                        resinfo.uniforms_blocks = [];\r\n                        resinfo.uniforms = [];\r\n                        const numUniforms = gl.getProgramParameter(ptr, gl.ACTIVE_UNIFORMS);\r\n                        const indices = [...Array(numUniforms).keys()];\r\n                        const blockIndices = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_BLOCK_INDEX);\r\n                        const offsets = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_OFFSET);\r\n                        for (let i = 0; i < numUniforms; ++i) {\r\n                            const info = gl.getActiveUniform(ptr, i);\r\n                            if (info) {\r\n                                // regroup the blocks\r\n                                if (blockIndices[i] > -1) {\r\n                                    let uniform_block = resinfo.uniforms_blocks.find((element) => { return element.index == blockIndices[i]; });\r\n                                    if (uniform_block == undefined) {\r\n                                        uniform_block = {\r\n                                            index: blockIndices[i],\r\n                                            name: gl.getActiveUniformBlockName(ptr, blockIndices[i]),\r\n                                            size: gl.getActiveUniformBlockParameter(ptr, blockIndices[i], gl.UNIFORM_BLOCK_DATA_SIZE),\r\n                                            uniforms: []\r\n                                        };\r\n                                        resinfo.uniforms_blocks.push(uniform_block);\r\n                                    }\r\n                                    uniform_block.uniforms.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, offset: offsets[i] });\r\n                                }\r\n                                else {\r\n                                    resinfo.uniforms.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, location: gl.getUniformLocation(ptr, info.name) });\r\n                                }\r\n                            }\r\n                        }\r\n                        resinfo.attributes = [];\r\n                        const numAttribute = gl.getProgramParameter(ptr, gl.ACTIVE_ATTRIBUTES);\r\n                        for (let i = 0; i < numAttribute; ++i) {\r\n                            const info = gl.getActiveAttrib(ptr, i);\r\n                            if (info)\r\n                                resinfo.attributes.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, location: gl.getAttribLocation(ptr, info.name) });\r\n                        }\r\n                    }\r\n                    res.set('_info', resinfo);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'useProgram':\r\n                {\r\n                    if (command.program >= 0) {\r\n                        const res = this.get_resource(command.program);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.useProgram(ptr);\r\n                        this.bound_program = res;\r\n                    }\r\n                    else {\r\n                        gl.useProgram(null);\r\n                        this.bound_program = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'uniform':\r\n            case 'uniformMatrix':\r\n                {\r\n                    if (this.bound_program != null) {\r\n                        let resinfo = this.bound_program.get('_info');\r\n                        const uniform = resinfo.uniforms.find((element) => { return element.name == command.name; });\r\n                        if (uniform != undefined) {\r\n                            const location = uniform.location;\r\n                            if (command.cmd == 'uniform') {\r\n                                let shape = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 1];\r\n                                if (command.buffer_metadata.dtype == 'int32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1iv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2iv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3iv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4iv(location, bufarray);\r\n                                }\r\n                                else if (command.buffer_metadata.dtype == 'uint32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1uiv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2uiv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3uiv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4uiv(location, bufarray);\r\n                                }\r\n                                else if (command.buffer_metadata.dtype == 'float32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1fv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2fv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3fv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4fv(location, bufarray);\r\n                                }\r\n                            }\r\n                            else {\r\n                                let a = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 2];\r\n                                let b = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 1];\r\n                                let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                if (a == 2) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix2x3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix2x4fv(location, false, bufarray);\r\n                                }\r\n                                else if (a == 3) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix3x2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix3x4fv(location, false, bufarray);\r\n                                }\r\n                                else if (a == 4) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix4x2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix4x3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix4fv(location, false, bufarray);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 'uniformBlockBinding':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    const uniformblock = res.get('_info').uniforms_blocks.find((element) => { return element.name == command.uniform_block_name; });\r\n                    if (uniformblock != undefined) {\r\n                        gl.uniformBlockBinding(ptr, uniformblock.index, command.uniform_block_binding);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- BUFFERS --------------------------------------\r\n            case 'createBuffer':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createBuffer();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Buffer' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindBuffer':\r\n                {\r\n                    const target = command.target;\r\n                    if (command.buffer >= 0) {\r\n                        const res = this.get_resource(command.buffer);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindBuffer(gl[target], ptr);\r\n                        this.bound_buffers[target] = res;\r\n                    }\r\n                    else {\r\n                        gl.bindBuffer(gl[target], null);\r\n                        this.bound_buffers[target] = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'bindBufferBase':\r\n                {\r\n                    const target = command.target;\r\n                    if (command.buffer >= 0) {\r\n                        const res = this.get_resource(command.buffer);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindBufferBase(gl[target], command.index, ptr);\r\n                    }\r\n                    else {\r\n                        gl.bindBufferBase(gl[target], command.index, null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'bufferData':\r\n                {\r\n                    const target = command.target;\r\n                    const usage = command.usage;\r\n                    if (command.hasOwnProperty('buffer_metadata')) {\r\n                        gl.bufferData(gl[target], converted_buffers[command.buffer_metadata.index], gl[usage]);\r\n                        let buf = this.bound_buffers[target];\r\n                        if (command.update_info && buf != null) {\r\n                            const size = gl.getBufferParameter(gl[target], gl.BUFFER_SIZE);\r\n                            buf.set('_info', { type: \"Buffer\", size: size, target: target });\r\n                            buf.save_changes();\r\n                        }\r\n                    }\r\n                    else {\r\n                        let buf = this.bound_buffers[target];\r\n                        gl.bufferData(gl[target], null, gl[usage]);\r\n                        if (command.update_info && buf != null) {\r\n                            buf.set('_info', { type: \"Buffer\", size: 'Undefined', target: target });\r\n                            buf.save_changes();\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 'createUniformBuffer':\r\n                {\r\n                    let res = this.get_resource(command.buffer);\r\n                    const ptr = gl.createBuffer();\r\n                    let info = { type: 'Buffer' };\r\n                    const prog = this.get_resource(command.program);\r\n                    const uniformblock = prog.get('_info').uniforms_blocks.find((element) => { return element.name == command.block_name; });\r\n                    if (uniformblock != undefined) {\r\n                        gl.bindBuffer(gl.UNIFORM_BUFFER, ptr);\r\n                        gl.bufferData(gl.UNIFORM_BUFFER, uniformblock.size, gl[command.usage]);\r\n                        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n                        this.bound_buffers[\"UNIFORM_BUFFER\"] = null;\r\n                        info[\"size\"] = uniformblock.size;\r\n                        info[\"target\"] = \"UNIFORM_BUFFER\";\r\n                        info[\"uniformblock\"] = uniformblock;\r\n                    }\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', info);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bufferSubData':\r\n            case 'bufferSubDataStr':\r\n                {\r\n                    const target = command.target;\r\n                    let offset = command.dst_byte_offset;\r\n                    if (command.cmd == 'bufferSubDataStr') {\r\n                        offset = 0;\r\n                        let buf = this.bound_buffers[target];\r\n                        if (buf != null) {\r\n                            const uniformblock = buf.get('_info').uniformblock;\r\n                            const uniform = uniformblock.uniforms.find((element) => { return element.name == command.dst_byte_offset; });\r\n                            if (uniform != undefined) {\r\n                                offset = uniform.offset;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (command.hasOwnProperty('buffer_metadata')) {\r\n                        gl.bufferSubData(gl[target], offset, converted_buffers[command.buffer_metadata.index], command.src_offset);\r\n                    }\r\n                    else {\r\n                        gl.bufferSubData(gl[target], offset, command.src_offset);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- VERTEX ARRAYS --------------------------------------\r\n            case 'createVertexArray':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createVertexArray();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Vertex Array Object', bindings: [] });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindVertexArray':\r\n                {\r\n                    if (command.vertex_array >= 0) {\r\n                        const res = this.get_resource(command.vertex_array);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindVertexArray(ptr);\r\n                        this.bound_vao = res;\r\n                    }\r\n                    else {\r\n                        gl.bindVertexArray(null);\r\n                        this.bound_vao = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'vertexAttribPointer':\r\n            case 'vertexAttribIPointer':\r\n            case 'enableVertexAttribArray':\r\n            case 'disableVertexAttribArray':\r\n            case 'vertexAttrib[1234]fv':\r\n            case 'vertexAttribI4[u]iv':\r\n            case 'vertexAttribDivisor':\r\n                {\r\n                    let index = -1;\r\n                    if (typeof command.index === 'number') {\r\n                        index = command.index;\r\n                    }\r\n                    else {\r\n                        if (this.bound_program != null) {\r\n                            const attr = this.bound_program.get('_info').attributes.find((element) => { return element.name == command.index; });\r\n                            if (attr != undefined) {\r\n                                index = attr.location;\r\n                            }\r\n                        }\r\n                        else {\r\n                            console.error(\"a program must be bound to find the attribute\");\r\n                        }\r\n                    }\r\n                    let buf = this.bound_buffers['ARRAY_BUFFER'];\r\n                    if (index >= 0) {\r\n                        index += command.index_offset;\r\n                        if (command.cmd == \"vertexAttribIPointer\") {\r\n                            gl.vertexAttribIPointer(index, command.size, gl[command.type], command.stride, command.offset);\r\n                            if (this.bound_vao != null && buf != null) {\r\n                                let vao_info = this.bound_vao.get('_info');\r\n                                const buffer_uid = buf.get('uid');\r\n                                let binding_info = vao_info.bindings.find((element) => { return element.buffer_uid == buffer_uid; });\r\n                                if (binding_info == undefined) {\r\n                                    binding_info = { buffer_uid: buffer_uid, attributes: [] };\r\n                                    vao_info.bindings.push(binding_info);\r\n                                }\r\n                                binding_info.attributes.push({ pointer: \"vertexAttribIPointer\", index: index, size: command.size, type: command.type, stride: command.stride, offset: command.offset });\r\n                                this.bound_vao.set('_info', vao_info);\r\n                                this.bound_vao.save_changes();\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribPointer\") {\r\n                            gl.vertexAttribPointer(index, command.size, gl[command.type], command.normalized, command.stride, command.offset);\r\n                            if (this.bound_vao != null && buf != null) {\r\n                                let vao_info = this.bound_vao.get('_info');\r\n                                const buffer_uid = buf.get('uid');\r\n                                let binding_info = vao_info.bindings.find((element) => { return element.buffer_uid == buffer_uid; });\r\n                                if (binding_info == undefined) {\r\n                                    binding_info = { buffer_uid: buffer_uid, attributes: [] };\r\n                                    vao_info.bindings.push(binding_info);\r\n                                }\r\n                                binding_info.attributes.push({ pointer: \"vertexAttribPointer\", index: index, size: command.size, type: command.type, normalized: command.normalized, stride: command.stride, offset: command.offset });\r\n                                this.bound_vao.set('_info', vao_info);\r\n                                this.bound_vao.save_changes();\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"enableVertexAttribArray\") {\r\n                            gl.enableVertexAttribArray(index);\r\n                        }\r\n                        else if (command.cmd == \"disableVertexAttribArray\") {\r\n                            gl.disableVertexAttribArray(index);\r\n                        }\r\n                        else if (command.cmd == \"vertexAttrib[1234]fv\") {\r\n                            if (command.buffer_metadata.shape[0] == 1) {\r\n                                gl.vertexAttrib1fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            else if (command.buffer_metadata.shape[0] == 2) {\r\n                                gl.vertexAttrib2fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            if (command.buffer_metadata.shape[0] == 3) {\r\n                                gl.vertexAttrib3fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            if (command.buffer_metadata.shape[0] == 4) {\r\n                                gl.vertexAttrib4fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribI4[u]iv\") {\r\n                            if (command.buffer_metadata.dtype == \"uint32\") {\r\n                                gl.vertexAttribI4uiv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            else if (command.buffer_metadata.dtype == \"int32\") {\r\n                                gl.vertexAttribI4iv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribDivisor\") {\r\n                            gl.vertexAttribDivisor(index, command.divisor);\r\n                        }\r\n                    }\r\n                    else {\r\n                        console.error(`attribute ${command.index} location not found`);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- RENDER --------------------------------------\r\n            case 'drawArrays':\r\n                {\r\n                    gl.drawArrays(gl[command.mode], command.first, command.count);\r\n                }\r\n                break;\r\n            case 'drawArraysInstanced':\r\n                {\r\n                    gl.drawArraysInstanced(gl[command.mode], command.first, command.count, command.instance_count);\r\n                }\r\n                break;\r\n            case 'drawElements':\r\n                {\r\n                    gl.drawElements(gl[command.mode], command.count, gl[command.type], command.offset);\r\n                }\r\n                break;\r\n            case 'drawElementsInstanced':\r\n                {\r\n                    gl.drawElementsInstanced(gl[command.mode], command.count, gl[command.type], command.offset, command.instance_count);\r\n                }\r\n                break;\r\n            // ------------------------------- FRAMEBUFFER --------------------------------------\r\n            case 'createFramebuffer':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createFramebuffer();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Framebuffer' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindFramebuffer':\r\n                {\r\n                    if (command.framebuffer >= 0) {\r\n                        let res = this.get_resource(command.framebuffer);\r\n                        gl.bindFramebuffer(gl[command.target], res.get('_gl_ptr'));\r\n                    }\r\n                    else {\r\n                        gl.bindFramebuffer(gl[command.target], null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'framebufferTexture2D':\r\n                {\r\n                    let res = this.get_resource(command.texture);\r\n                    gl.framebufferTexture2D(gl[command.target], gl[command.attachement], gl[command.textarget], res.get('_gl_ptr'), command.level);\r\n                }\r\n                break;\r\n            case 'drawBuffers':\r\n                {\r\n                    const buffers = command.buffers.map((element) => { return gl[element]; });\r\n                    gl.drawBuffers(buffers);\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    register_resource(resource) {\r\n        if (resource.get('uid') != this.resources.length) {\r\n            console.error('uid not matching what we have internally');\r\n        }\r\n        this.resources.push(resource);\r\n    }\r\n    get_resource(index) {\r\n        return this.resources[index];\r\n    }\r\n}\r\nexports.GLModel = GLModel;\r\nGLModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);\r\nclass GLViewer extends base_1.DOMWidgetView {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.is_mouse_down = false;\r\n        this.move_direction = [false, false, false, false];\r\n        this.will_redraw = false;\r\n    }\r\n    render() {\r\n        this.el.appendChild(this.model.canvas);\r\n        this.resizeCanvas();\r\n        this.model.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n        this.el.addEventListener('mousemove', {\r\n            handleEvent: this.onMouseMove.bind(this)\r\n        });\r\n        this.el.addEventListener('mousedown', {\r\n            handleEvent: this.onMouseDown.bind(this)\r\n        });\r\n        this.el.addEventListener('mouseup', {\r\n            handleEvent: this.onMouseUp.bind(this)\r\n        });\r\n        this.el.addEventListener('mouseout', {\r\n            handleEvent: this.onMouseOut.bind(this)\r\n        });\r\n        this.el.addEventListener('keydown', {\r\n            handleEvent: this.onKeyDown.bind(this)\r\n        });\r\n        this.el.addEventListener('keyup', {\r\n            handleEvent: this.onKeyUp.bind(this)\r\n        });\r\n        this.el.setAttribute('tabindex', '0');\r\n    }\r\n    resizeCanvas() {\r\n        this.el.setAttribute('width', this.model.get('width'));\r\n        this.el.setAttribute('height', this.model.get('height'));\r\n        this.model.resizeCanvas();\r\n    }\r\n    redraw() {\r\n        this.will_redraw = false;\r\n        // update movement if needed\r\n        if (this.move_direction[0] || this.move_direction[1] || this.move_direction[2] || this.move_direction[3]) {\r\n            let speed = this.model.get('move_speed');\r\n            let forward_axis = matrix_1.m4getColumnK(this.model.camera_matrix);\r\n            let side_axis = matrix_1.m4getColumnI(this.model.camera_matrix);\r\n            let camera_pos = this.model.get('camera_pos');\r\n            if (this.move_direction[0]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(forward_axis, -speed));\r\n            }\r\n            if (this.move_direction[2]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(forward_axis, speed));\r\n            }\r\n            if (this.move_direction[1]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(side_axis, -speed));\r\n            }\r\n            if (this.move_direction[3]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(side_axis, speed));\r\n            }\r\n            this.model.set('camera_pos', camera_pos);\r\n            this.touch();\r\n            // request a new frame if we are moving\r\n            this.requestRedraw();\r\n        }\r\n        // re draw\r\n        this.model.run_commands();\r\n    }\r\n    requestRedraw() {\r\n        if (this.will_redraw == false) {\r\n            this.will_redraw = true;\r\n            requestAnimationFrame(this.redraw.bind(this));\r\n        }\r\n    }\r\n    onMouseMove(event) {\r\n        //this.model.send({ event: 'mouse_move', ...this.getCoordinates(event) }, {});\r\n        if (this.is_mouse_down) {\r\n            let speed = this.model.get('mouse_speed');\r\n            this.model.set('camera_yaw', this.model.get('camera_yaw') - (event.movementX) * 0.2 * speed);\r\n            this.model.set('camera_pitch', this.model.get('camera_pitch') - (event.movementY) * 0.2 * speed);\r\n            this.touch();\r\n            this.requestRedraw();\r\n        }\r\n    }\r\n    onMouseDown(event) {\r\n        this.is_mouse_down = true;\r\n        this.model.canvas.focus();\r\n    }\r\n    onMouseUp(event) {\r\n        this.is_mouse_down = false;\r\n    }\r\n    onMouseOut(event) {\r\n        this.is_mouse_down = false;\r\n        this.move_direction = [false, false, false, false];\r\n    }\r\n    onKeyDown(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        let keys = this.model.get('move_keys');\r\n        if (event.repeat == false) {\r\n            if (event.key == keys[0]) {\r\n                this.move_direction[0] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[1]) {\r\n                this.move_direction[1] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[2]) {\r\n                this.move_direction[2] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[3]) {\r\n                this.move_direction[3] = true;\r\n                this.requestRedraw();\r\n            }\r\n        }\r\n    }\r\n    onKeyUp(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        let keys = this.model.get('move_keys');\r\n        if (event.key == keys[0]) {\r\n            this.move_direction[0] = false;\r\n        }\r\n        else if (event.key == keys[1]) {\r\n            this.move_direction[1] = false;\r\n        }\r\n        else if (event.key == keys[2]) {\r\n            this.move_direction[2] = false;\r\n        }\r\n        else if (event.key == keys[3]) {\r\n            this.move_direction[3] = false;\r\n        }\r\n    }\r\n    getCoordinates(event) {\r\n        const rect = this.el.getBoundingClientRect();\r\n        const x = (this.model.get('width') * (event.clientX - rect.left)) / rect.width;\r\n        const y = (this.model.get('height') * (event.clientY - rect.top)) / rect.height;\r\n        return { x, y };\r\n    }\r\n}\r\nexports.GLViewer = GLViewer;\r\n//# sourceMappingURL=glviewer.js.map",
         "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.m4inverse = exports.m4dot = exports.m4Scale = exports.m4Zrotation = exports.m4Yrotation = exports.m4Xrotation = exports.m4Translation = exports.vec3Scale = exports.vec3Add = exports.m4getColumnK = exports.m4getColumnJ = exports.m4getColumnI = exports.m4getTranslation = exports.m4Transpose = exports.m4OrthographicProjectionMatrix = exports.m4ProjectionMatrix = void 0;\r\nfunction m4ProjectionMatrix(fov_y, aspect_ratio, near, far) {\r\n    const ymax = near * Math.tan(fov_y * Math.PI / 360.0);\r\n    const xmax = ymax * aspect_ratio;\r\n    return frustrum(-xmax, xmax, -ymax, ymax, near, far);\r\n}\r\nexports.m4ProjectionMatrix = m4ProjectionMatrix;\r\nfunction frustrum(left, right, bottom, top, near, far) {\r\n    const A = (right + left) / (right - left);\r\n    const B = (top + bottom) / (top - bottom);\r\n    const C = -(far + near) / (far - near);\r\n    const D = -2. * far * near / (far - near);\r\n    const E = 2. * near / (right - left);\r\n    const F = 2. * near / (top - bottom);\r\n    return [\r\n        E, 0, A, 0,\r\n        0, F, B, 0,\r\n        0, 0, C, D,\r\n        0, 0, -1, 0\r\n    ];\r\n}\r\nfunction m4OrthographicProjectionMatrix(width, height, near, far) {\r\n    const A = 1. / width;\r\n    const B = 1. / height;\r\n    const C = -(far + near) / (far - near);\r\n    const D = -2. / (far - near);\r\n    return [\r\n        A, 0, 0, 0,\r\n        0, B, 0, 0,\r\n        0, 0, D, C,\r\n        0, 0, 0, 1\r\n    ];\r\n}\r\nexports.m4OrthographicProjectionMatrix = m4OrthographicProjectionMatrix;\r\nfunction m4Transpose(m) {\r\n    return [\r\n        m[0], m[4], m[8], m[12],\r\n        m[1], m[5], m[9], m[13],\r\n        m[2], m[6], m[10], m[14],\r\n        m[3], m[7], m[11], m[15],\r\n    ];\r\n}\r\nexports.m4Transpose = m4Transpose;\r\nfunction m4getTranslation(m) {\r\n    return [\r\n        m[3], m[7], m[11]\r\n    ];\r\n}\r\nexports.m4getTranslation = m4getTranslation;\r\nfunction m4getColumnI(m) {\r\n    return [\r\n        m[0], m[4], m[8]\r\n    ];\r\n}\r\nexports.m4getColumnI = m4getColumnI;\r\nfunction m4getColumnJ(m) {\r\n    return [\r\n        m[1], m[5], m[9]\r\n    ];\r\n}\r\nexports.m4getColumnJ = m4getColumnJ;\r\nfunction m4getColumnK(m) {\r\n    return [\r\n        m[2], m[6], m[10]\r\n    ];\r\n}\r\nexports.m4getColumnK = m4getColumnK;\r\nfunction vec3Add(a, b) {\r\n    return [\r\n        a[0] + b[0],\r\n        a[1] + b[1],\r\n        a[2] + b[2]\r\n    ];\r\n}\r\nexports.vec3Add = vec3Add;\r\nfunction vec3Scale(a, scale) {\r\n    return [\r\n        a[0] * scale,\r\n        a[1] * scale,\r\n        a[2] * scale\r\n    ];\r\n}\r\nexports.vec3Scale = vec3Scale;\r\nfunction m4Translation(tx, ty, tz) {\r\n    return [\r\n        1, 0, 0, tx,\r\n        0, 1, 0, ty,\r\n        0, 0, 1, tz,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\nexports.m4Translation = m4Translation;\r\nfunction m4Xrotation(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n    return [\r\n        1, 0, 0, 0,\r\n        0, c, -s, 0,\r\n        0, s, c, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\nexports.m4Xrotation = m4Xrotation;\r\nfunction m4Yrotation(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n    return [\r\n        c, 0, s, 0,\r\n        0, 1, 0, 0,\r\n        -s, 0, c, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\nexports.m4Yrotation = m4Yrotation;\r\nfunction m4Zrotation(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n    return [\r\n        c, -s, 0, 0,\r\n        s, c, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\nexports.m4Zrotation = m4Zrotation;\r\nfunction m4Scale(sx, sy, sz) {\r\n    return [\r\n        sx, 0, 0, 0,\r\n        0, sy, 0, 0,\r\n        0, 0, sz, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\nexports.m4Scale = m4Scale;\r\nfunction m4dot(b, a) {\r\n    return [\r\n        b[0] * a[0] + b[1] * a[4] + b[2] * a[8] + b[3] * a[12],\r\n        b[0] * a[1] + b[1] * a[5] + b[2] * a[9] + b[3] * a[13],\r\n        b[0] * a[2] + b[1] * a[6] + b[2] * a[10] + b[3] * a[14],\r\n        b[0] * a[3] + b[1] * a[7] + b[2] * a[11] + b[3] * a[15],\r\n        b[4] * a[0] + b[5] * a[4] + b[6] * a[8] + b[7] * a[12],\r\n        b[4] * a[1] + b[5] * a[5] + b[6] * a[9] + b[7] * a[13],\r\n        b[4] * a[2] + b[5] * a[6] + b[6] * a[10] + b[7] * a[14],\r\n        b[4] * a[3] + b[5] * a[7] + b[6] * a[11] + b[7] * a[15],\r\n        b[8] * a[0] + b[9] * a[4] + b[10] * a[8] + b[11] * a[12],\r\n        b[8] * a[1] + b[9] * a[5] + b[10] * a[9] + b[11] * a[13],\r\n        b[8] * a[2] + b[9] * a[6] + b[10] * a[10] + b[11] * a[14],\r\n        b[8] * a[3] + b[9] * a[7] + b[10] * a[11] + b[11] * a[15],\r\n        b[12] * a[0] + b[13] * a[4] + b[14] * a[8] + b[15] * a[12],\r\n        b[12] * a[1] + b[13] * a[5] + b[14] * a[9] + b[15] * a[13],\r\n        b[12] * a[2] + b[13] * a[6] + b[14] * a[10] + b[15] * a[14],\r\n        b[12] * a[3] + b[13] * a[7] + b[14] * a[11] + b[15] * a[15],\r\n    ];\r\n}\r\nexports.m4dot = m4dot;\r\nfunction m4inverse(m) {\r\n    var tmp_0 = m[10] * m[15];\r\n    var tmp_1 = m[14] * m[11];\r\n    var tmp_2 = m[6] * m[15];\r\n    var tmp_3 = m[14] * m[7];\r\n    var tmp_4 = m[6] * m[11];\r\n    var tmp_5 = m[10] * m[7];\r\n    var tmp_6 = m[2] * m[15];\r\n    var tmp_7 = m[14] * m[3];\r\n    var tmp_8 = m[2] * m[11];\r\n    var tmp_9 = m[10] * m[3];\r\n    var tmp_10 = m[2] * m[7];\r\n    var tmp_11 = m[6] * m[3];\r\n    var tmp_12 = m[8] * m[13];\r\n    var tmp_13 = m[12] * m[9];\r\n    var tmp_14 = m[4] * m[13];\r\n    var tmp_15 = m[12] * m[5];\r\n    var tmp_16 = m[4] * m[9];\r\n    var tmp_17 = m[8] * m[5];\r\n    var tmp_18 = m[0] * m[13];\r\n    var tmp_19 = m[12] * m[1];\r\n    var tmp_20 = m[0] * m[9];\r\n    var tmp_21 = m[8] * m[1];\r\n    var tmp_22 = m[0] * m[5];\r\n    var tmp_23 = m[4] * m[1];\r\n    var t0 = (tmp_0 * m[5] + tmp_3 * m[9] + tmp_4 * m[13]) -\r\n        (tmp_1 * m[5] + tmp_2 * m[9] + tmp_5 * m[13]);\r\n    var t1 = (tmp_1 * m[1] + tmp_6 * m[9] + tmp_9 * m[13]) -\r\n        (tmp_0 * m[1] + tmp_7 * m[9] + tmp_8 * m[13]);\r\n    var t2 = (tmp_2 * m[1] + tmp_7 * m[5] + tmp_10 * m[13]) -\r\n        (tmp_3 * m[1] + tmp_6 * m[5] + tmp_11 * m[13]);\r\n    var t3 = (tmp_5 * m[1] + tmp_8 * m[5] + tmp_11 * m[9]) -\r\n        (tmp_4 * m[1] + tmp_9 * m[5] + tmp_10 * m[9]);\r\n    var d = 1.0 / (m[0] * t0 + m[4] * t1 + m[8] * t2 + m[12] * t3);\r\n    return [\r\n        d * t0,\r\n        d * t1,\r\n        d * t2,\r\n        d * t3,\r\n        d * ((tmp_1 * m[4] + tmp_2 * m[8] + tmp_5 * m[12]) -\r\n            (tmp_0 * m[4] + tmp_3 * m[8] + tmp_4 * m[12])),\r\n        d * ((tmp_0 * m[0] + tmp_7 * m[8] + tmp_8 * m[12]) -\r\n            (tmp_1 * m[0] + tmp_6 * m[8] + tmp_9 * m[12])),\r\n        d * ((tmp_3 * m[0] + tmp_6 * m[4] + tmp_11 * m[12]) -\r\n            (tmp_2 * m[0] + tmp_7 * m[4] + tmp_10 * m[12])),\r\n        d * ((tmp_4 * m[0] + tmp_9 * m[4] + tmp_10 * m[8]) -\r\n            (tmp_5 * m[0] + tmp_8 * m[4] + tmp_11 * m[8])),\r\n        d * ((tmp_12 * m[7] + tmp_15 * m[11] + tmp_16 * m[15]) -\r\n            (tmp_13 * m[7] + tmp_14 * m[11] + tmp_17 * m[15])),\r\n        d * ((tmp_13 * m[3] + tmp_18 * m[11] + tmp_21 * m[15]) -\r\n            (tmp_12 * m[3] + tmp_19 * m[11] + tmp_20 * m[15])),\r\n        d * ((tmp_14 * m[3] + tmp_19 * m[7] + tmp_22 * m[15]) -\r\n            (tmp_15 * m[3] + tmp_18 * m[7] + tmp_23 * m[15])),\r\n        d * ((tmp_17 * m[3] + tmp_20 * m[7] + tmp_23 * m[11]) -\r\n            (tmp_16 * m[3] + tmp_21 * m[7] + tmp_22 * m[11])),\r\n        d * ((tmp_14 * m[10] + tmp_17 * m[14] + tmp_13 * m[6]) -\r\n            (tmp_16 * m[14] + tmp_12 * m[6] + tmp_15 * m[10])),\r\n        d * ((tmp_20 * m[14] + tmp_12 * m[2] + tmp_19 * m[10]) -\r\n            (tmp_18 * m[10] + tmp_21 * m[14] + tmp_13 * m[2])),\r\n        d * ((tmp_18 * m[6] + tmp_23 * m[14] + tmp_15 * m[2]) -\r\n            (tmp_22 * m[14] + tmp_14 * m[2] + tmp_19 * m[6])),\r\n        d * ((tmp_22 * m[10] + tmp_16 * m[2] + tmp_21 * m[6]) -\r\n            (tmp_20 * m[6] + tmp_23 * m[10] + tmp_17 * m[2])),\r\n    ];\r\n}\r\nexports.m4inverse = m4inverse;\r\n//# sourceMappingURL=matrix.js.map",
         "\"use strict\";\r\n// Copyright (c) Jerome Eippers\r\n// Distributed under the terms of the Modified BSD License.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MODULE_NAME = exports.MODULE_VERSION = void 0;\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-ignore\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst data = require('../package.json');\r\n/**\r\n * The _model_module_version/_view_module_version this package implements.\r\n *\r\n * The html widget manager assumes that this is the same as the npm package\r\n * version number.\r\n */\r\nexports.MODULE_VERSION = data.version;\r\n/*\r\n * The current package name.\r\n */\r\nexports.MODULE_NAME = data.name;\r\n//# sourceMappingURL=version.js.map",
         "\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./glviewer\"), exports);\r\n__exportStar(require(\"./glresource\"), exports);\r\n//# sourceMappingURL=widgets.js.map",
         "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ipywebgl-json-display {\\r\\n  padding: 10px;\\r\\n  font-family: sans-serif;\\r\\n  background-color: #f2f2f2;\\r\\n  margin-left: 20px;\\r\\n}\\r\\n\\r\\n.ipywebgl-json-key {\\r\\n  font-weight: bold;\\r\\n  color: #333;\\r\\n}\\r\\n\\r\\n.ipywebgl-json-value {\\r\\n  color: #555;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
         "\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}",
         "var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};",
         "\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};"
```

### Comparing `ipywebgl-0.1.1/ipywebgl/labextension/static/remoteEntry.c0177904b39280613847.js` & `ipywebgl-0.1.2/ipywebgl/labextension/static/remoteEntry.60241690e1362618887e.js`

 * *Files 0% similar despite different names*

#### js-beautify {}

```diff
@@ -155,15 +155,15 @@
     (() => {
         /******/ // This function allow to reference async chunks
         /******/
         __webpack_require__.u = (chunkId) => {
             /******/ // return url for filenames based on template
             /******/
             return "" + chunkId + "." + {
-                "lib_widgets_js": "c62b750c38ea850039b1",
+                "lib_widgets_js": "5f9ed127446bd3a7ccfc",
                 "lib_index_js": "115506ce89c3f4c34456",
                 "lib_plugin_js": "a4fea4dfcfff14540990"
             } [chunkId] + ".js";
             /******/
         };
         /******/
     })();
@@ -372,15 +372,15 @@
             /******/
             var promises = [];
             /******/
             switch (name) {
                 /******/
                 case "default": {
                     /******/
-                    register("ipywebgl", "0.1.0", () => (Promise.all([__webpack_require__.e("lib_widgets_js"), __webpack_require__.e("lib_index_js")]).then(() => (() => (__webpack_require__( /*! ./lib/index.js */ "./lib/index.js"))))));
+                    register("ipywebgl", "0.1.1", () => (Promise.all([__webpack_require__.e("lib_widgets_js"), __webpack_require__.e("lib_index_js")]).then(() => (() => (__webpack_require__( /*! ./lib/index.js */ "./lib/index.js"))))));
                     /******/
                 }
                 /******/
                 break;
                 /******/
             }
             /******/
@@ -1011,8 +1011,8 @@
     /******/
     var __webpack_exports__ = __webpack_require__("webpack/container/entry/ipywebgl");
     /******/
     (_JUPYTERLAB = typeof _JUPYTERLAB === "undefined" ? {} : _JUPYTERLAB).ipywebgl = __webpack_exports__;
     /******/
     /******/
 })();
-//# sourceMappingURL=remoteEntry.c0177904b39280613847.js.map
+//# sourceMappingURL=remoteEntry.60241690e1362618887e.js.map
```

### Comparing `ipywebgl-0.1.1/ipywebgl/labextension/static/remoteEntry.c0177904b39280613847.js.map` & `ipywebgl-0.1.2/ipywebgl/labextension/static/remoteEntry.60241690e1362618887e.js.map`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9126984126984128%*

 * *Differences: {"'file'": "'remoteEntry.60241690e1362618887e.js'",*

 * * "'sourcesContent'": "{insert: [(4, '// This function allow to reference async "*

 * *                     'chunks\\n__webpack_require__.u = (chunkId) => {\\n\\t// return url for '*

 * *                     'filenames based on template\\n\\treturn "" + chunkId + "." + '*

 * *                     '{"lib_widgets_js":"5f9ed127446bd3a7ccfc","lib_index_js":"115506ce89c3f4c34456","lib_plugin_js":"a4fea4dfcfff14540990"}[chunkId] '*

 * *                     '+ ".js";\\n};\'), (8, \'_ []*

```diff
@@ -1,9 +1,9 @@
 {
-    "file": "remoteEntry.c0177904b39280613847.js",
+    "file": "remoteEntry.60241690e1362618887e.js",
     "mappings": ";;;;;;;;;;;AAAA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;UCjCD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA,8BAA8B,qHAAqH;WACnJ;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCxCA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,oJAAoJ;WACpJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI,aAAa;WACjB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3CA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WCfA;WACA;WACA,WAAW,6BAA6B,iBAAiB,GAAG,qEAAqE;WACjI;WACA;WACA;WACA,qCAAqC,aAAa,EAAE,wDAAwD,2BAA2B,4BAA4B,2BAA2B,+CAA+C,mCAAmC;WAChR;WACA;WACA;WACA,qBAAqB,8BAA8B,SAAS,sDAAsD,gBAAgB,eAAe,KAAK,6DAA6D,SAAS,SAAS,QAAQ,eAAe,KAAK,eAAe,qGAAqG,WAAW,aAAa;WAC7Y;WACA;WACA;WACA,gBAAgB,8BAA8B,qBAAqB,YAAY,sBAAsB,SAAS,iDAAiD,6FAA6F,WAAW,uBAAuB,2BAA2B,wBAAwB,KAAK,oCAAoC,oBAAoB,wBAAwB,oBAAoB,SAAS,KAAK,yBAAyB,KAAK,gCAAgC,yBAAyB,QAAQ,eAAe,KAAK,eAAe,4DAA4D;WACtoB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,CAAC;;WAED;WACA;WACA;WACA,CAAC;WACD;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN,KAAK,WAAW;WAChB,GAAG;WACH;WACA;;;;;WCvKA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,iCAAiC;;WAEjC;WACA;WACA;WACA,KAAK;WACL,eAAe;WACf;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA;;;;;WCrFA;;;;;UEAA;UACA;UACA;UACA",
     "names": [],
     "sourceRoot": "",
     "sources": [
         "webpack://ipywebgl/webpack/container-entry",
         "webpack://ipywebgl/webpack/bootstrap",
         "webpack://ipywebgl/webpack/runtime/define property getters",
@@ -22,19 +22,19 @@
         "webpack://ipywebgl/webpack/after-startup"
     ],
     "sourcesContent": [
         "var moduleMap = {\n\t\"./index\": () => {\n\t\treturn Promise.all([__webpack_require__.e(\"lib_widgets_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => ((__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\")))));\n\t},\n\t\"./extension\": () => {\n\t\treturn Promise.all([__webpack_require__.e(\"lib_widgets_js\"), __webpack_require__.e(\"lib_plugin_js\")]).then(() => (() => ((__webpack_require__(/*! ./lib/plugin */ \"./lib/plugin.js\")))));\n\t}\n};\nvar get = (module, getScope) => {\n\t__webpack_require__.R = getScope;\n\tgetScope = (\n\t\t__webpack_require__.o(moduleMap, module)\n\t\t\t? moduleMap[module]()\n\t\t\t: Promise.resolve().then(() => {\n\t\t\t\tthrow new Error('Module \"' + module + '\" does not exist in container.');\n\t\t\t})\n\t);\n\t__webpack_require__.R = undefined;\n\treturn getScope;\n};\nvar init = (shareScope, initScope) => {\n\tif (!__webpack_require__.S) return;\n\tvar name = \"default\"\n\tvar oldScope = __webpack_require__.S[name];\n\tif(oldScope && oldScope !== shareScope) throw new Error(\"Container initialization failed as it has already been initialized with a different share scope\");\n\t__webpack_require__.S[name] = shareScope;\n\treturn __webpack_require__.I(name, initScope);\n};\n\n// This exports getters to disallow modifications\n__webpack_require__.d(exports, {\n\tget: () => (get),\n\tinit: () => (init)\n});",
         "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n",
         "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};",
         "__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};",
-        "// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"lib_widgets_js\":\"c62b750c38ea850039b1\",\"lib_index_js\":\"115506ce89c3f4c34456\",\"lib_plugin_js\":\"a4fea4dfcfff14540990\"}[chunkId] + \".js\";\n};",
+        "// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"lib_widgets_js\":\"5f9ed127446bd3a7ccfc\",\"lib_index_js\":\"115506ce89c3f4c34456\",\"lib_plugin_js\":\"a4fea4dfcfff14540990\"}[chunkId] + \".js\";\n};",
         "__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();",
         "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))",
         "var inProgress = {};\nvar dataWebpackPrefix = \"ipywebgl:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};",
-        "__webpack_require__.S = {};\nvar initPromises = {};\nvar initTokens = {};\n__webpack_require__.I = (name, initScope) => {\n\tif(!initScope) initScope = [];\n\t// handling circular init calls\n\tvar initToken = initTokens[name];\n\tif(!initToken) initToken = initTokens[name] = {};\n\tif(initScope.indexOf(initToken) >= 0) return;\n\tinitScope.push(initToken);\n\t// only runs once\n\tif(initPromises[name]) return initPromises[name];\n\t// creates a new share scope if needed\n\tif(!__webpack_require__.o(__webpack_require__.S, name)) __webpack_require__.S[name] = {};\n\t// runs all init snippets from all modules reachable\n\tvar scope = __webpack_require__.S[name];\n\tvar warn = (msg) => (typeof console !== \"undefined\" && console.warn && console.warn(msg));\n\tvar uniqueName = \"ipywebgl\";\n\tvar register = (name, version, factory, eager) => {\n\t\tvar versions = scope[name] = scope[name] || {};\n\t\tvar activeVersion = versions[version];\n\t\tif(!activeVersion || (!activeVersion.loaded && (!eager != !activeVersion.eager ? eager : uniqueName > activeVersion.from))) versions[version] = { get: factory, from: uniqueName, eager: !!eager };\n\t};\n\tvar initExternal = (id) => {\n\t\tvar handleError = (err) => (warn(\"Initialization of sharing external failed: \" + err));\n\t\ttry {\n\t\t\tvar module = __webpack_require__(id);\n\t\t\tif(!module) return;\n\t\t\tvar initFn = (module) => (module && module.init && module.init(__webpack_require__.S[name], initScope))\n\t\t\tif(module.then) return promises.push(module.then(initFn, handleError));\n\t\t\tvar initResult = initFn(module);\n\t\t\tif(initResult && initResult.then) return promises.push(initResult['catch'](handleError));\n\t\t} catch(err) { handleError(err); }\n\t}\n\tvar promises = [];\n\tswitch(name) {\n\t\tcase \"default\": {\n\t\t\tregister(\"ipywebgl\", \"0.1.0\", () => (Promise.all([__webpack_require__.e(\"lib_widgets_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => (__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\"))))));\n\t\t}\n\t\tbreak;\n\t}\n\tif(!promises.length) return initPromises[name] = 1;\n\treturn initPromises[name] = Promise.all(promises).then(() => (initPromises[name] = 1));\n};",
+        "__webpack_require__.S = {};\nvar initPromises = {};\nvar initTokens = {};\n__webpack_require__.I = (name, initScope) => {\n\tif(!initScope) initScope = [];\n\t// handling circular init calls\n\tvar initToken = initTokens[name];\n\tif(!initToken) initToken = initTokens[name] = {};\n\tif(initScope.indexOf(initToken) >= 0) return;\n\tinitScope.push(initToken);\n\t// only runs once\n\tif(initPromises[name]) return initPromises[name];\n\t// creates a new share scope if needed\n\tif(!__webpack_require__.o(__webpack_require__.S, name)) __webpack_require__.S[name] = {};\n\t// runs all init snippets from all modules reachable\n\tvar scope = __webpack_require__.S[name];\n\tvar warn = (msg) => (typeof console !== \"undefined\" && console.warn && console.warn(msg));\n\tvar uniqueName = \"ipywebgl\";\n\tvar register = (name, version, factory, eager) => {\n\t\tvar versions = scope[name] = scope[name] || {};\n\t\tvar activeVersion = versions[version];\n\t\tif(!activeVersion || (!activeVersion.loaded && (!eager != !activeVersion.eager ? eager : uniqueName > activeVersion.from))) versions[version] = { get: factory, from: uniqueName, eager: !!eager };\n\t};\n\tvar initExternal = (id) => {\n\t\tvar handleError = (err) => (warn(\"Initialization of sharing external failed: \" + err));\n\t\ttry {\n\t\t\tvar module = __webpack_require__(id);\n\t\t\tif(!module) return;\n\t\t\tvar initFn = (module) => (module && module.init && module.init(__webpack_require__.S[name], initScope))\n\t\t\tif(module.then) return promises.push(module.then(initFn, handleError));\n\t\t\tvar initResult = initFn(module);\n\t\t\tif(initResult && initResult.then) return promises.push(initResult['catch'](handleError));\n\t\t} catch(err) { handleError(err); }\n\t}\n\tvar promises = [];\n\tswitch(name) {\n\t\tcase \"default\": {\n\t\t\tregister(\"ipywebgl\", \"0.1.1\", () => (Promise.all([__webpack_require__.e(\"lib_widgets_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => (__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\"))))));\n\t\t}\n\t\tbreak;\n\t}\n\tif(!promises.length) return initPromises[name] = 1;\n\treturn initPromises[name] = Promise.all(promises).then(() => (initPromises[name] = 1));\n};",
         "var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;",
         "var parseVersion = (str) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar p=p=>{return p.split(\".\").map((p=>{return+p==p?+p:p}))},n=/^([^-+]+)?(?:-([^+]+))?(?:\\+(.+))?$/.exec(str),r=n[1]?p(n[1]):[];return n[2]&&(r.length++,r.push.apply(r,p(n[2]))),n[3]&&(r.push([]),r.push.apply(r,p(n[3]))),r;\n}\nvar versionLt = (a, b) => {\n\t// see webpack/lib/util/semver.js for original code\n\ta=parseVersion(a),b=parseVersion(b);for(var r=0;;){if(r>=a.length)return r<b.length&&\"u\"!=(typeof b[r])[0];var e=a[r],n=(typeof e)[0];if(r>=b.length)return\"u\"==n;var t=b[r],f=(typeof t)[0];if(n!=f)return\"o\"==n&&\"n\"==f||(\"s\"==f||\"u\"==n);if(\"o\"!=n&&\"u\"!=n&&e!=t)return e<t;r++}\n}\nvar rangeToString = (range) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar r=range[0],n=\"\";if(1===range.length)return\"*\";if(r+.5){n+=0==r?\">=\":-1==r?\"<\":1==r?\"^\":2==r?\"~\":r>0?\"=\":\"!=\";for(var e=1,a=1;a<range.length;a++){e--,n+=\"u\"==(typeof(t=range[a]))[0]?\"-\":(e>0?\".\":\"\")+(e=2,t)}return n}var g=[];for(a=1;a<range.length;a++){var t=range[a];g.push(0===t?\"not(\"+o()+\")\":1===t?\"(\"+o()+\" || \"+o()+\")\":2===t?g.pop()+\" \"+g.pop():rangeToString(t))}return o();function o(){return g.pop().replace(/^\\((.+)\\)$/,\"$1\")}\n}\nvar satisfy = (range, version) => {\n\t// see webpack/lib/util/semver.js for original code\n\tif(0 in range){version=parseVersion(version);var e=range[0],r=e<0;r&&(e=-e-1);for(var n=0,i=1,a=!0;;i++,n++){var f,s,g=i<range.length?(typeof range[i])[0]:\"\";if(n>=version.length||\"o\"==(s=(typeof(f=version[n]))[0]))return!a||(\"u\"==g?i>e&&!r:\"\"==g!=r);if(\"u\"==s){if(!a||\"u\"!=g)return!1}else if(a)if(g==s)if(i<=e){if(f!=range[i])return!1}else{if(r?f>range[i]:f<range[i])return!1;f!=range[i]&&(a=!1)}else if(\"s\"!=g&&\"n\"!=g){if(r||i<=e)return!1;a=!1,i--}else{if(i<=e||s<g!=r)return!1;a=!1}else\"s\"!=g&&\"n\"!=g&&(a=!1,i--)}}var t=[],o=t.pop.bind(t);for(n=1;n<range.length;n++){var u=range[n];t.push(1==u?o()|o():2==u?o()&o():u?satisfy(u,version):!o())}return!!o();\n}\nvar ensureExistence = (scopeName, key) => {\n\tvar scope = __webpack_require__.S[scopeName];\n\tif(!scope || !__webpack_require__.o(scope, key)) throw new Error(\"Shared module \" + key + \" doesn't exist in shared scope \" + scopeName);\n\treturn scope;\n};\nvar findVersion = (scope, key) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar findSingletonVersionKey = (scope, key) => {\n\tvar versions = scope[key];\n\treturn Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || (!versions[a].loaded && versionLt(a, b)) ? b : a;\n\t}, 0);\n};\nvar getInvalidSingletonVersionMessage = (scope, key, version, requiredVersion) => {\n\treturn \"Unsatisfied version \" + version + \" from \" + (version && scope[key][version].from) + \" of shared singleton module \" + key + \" (required \" + rangeToString(requiredVersion) + \")\"\n};\nvar getSingleton = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\treturn get(scope[key][version]);\n};\nvar getSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) typeof console !== \"undefined\" && console.warn && console.warn(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar getStrictSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) throw new Error(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar findValidVersion = (scope, key, requiredVersion) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\tif (!satisfy(requiredVersion, b)) return a;\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar getInvalidVersionMessage = (scope, scopeName, key, requiredVersion) => {\n\tvar versions = scope[key];\n\treturn \"No satisfying version (\" + rangeToString(requiredVersion) + \") of shared module \" + key + \" found in shared scope \" + scopeName + \".\\n\" +\n\t\t\"Available versions: \" + Object.keys(versions).map((key) => {\n\t\treturn key + \" from \" + versions[key].from;\n\t}).join(\", \");\n};\nvar getValidVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar entry = findValidVersion(scope, key, requiredVersion);\n\tif(entry) return get(entry);\n\tthrow new Error(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar warnInvalidVersion = (scope, scopeName, key, requiredVersion) => {\n\ttypeof console !== \"undefined\" && console.warn && console.warn(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar get = (entry) => {\n\tentry.loaded = 1;\n\treturn entry.get()\n};\nvar init = (fn) => (function(scopeName, a, b, c) {\n\tvar promise = __webpack_require__.I(scopeName);\n\tif (promise && promise.then) return promise.then(fn.bind(fn, scopeName, __webpack_require__.S[scopeName], a, b, c));\n\treturn fn(scopeName, __webpack_require__.S[scopeName], a, b, c);\n});\n\nvar load = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn get(findVersion(scope, key));\n});\nvar loadFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\treturn scope && __webpack_require__.o(scope, key) ? get(findVersion(scope, key)) : fallback();\n});\nvar loadVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingleton = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getValidVersion(scope, scopeName, key, version);\n});\nvar loadStrictSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar loadVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingletonFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tvar entry = scope && __webpack_require__.o(scope, key) && findValidVersion(scope, key, version);\n\treturn entry ? get(entry) : fallback();\n});\nvar loadStrictSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar installedModules = {};\nvar moduleToHandlerMapping = {\n\t\"webpack/sharing/consume/default/@jupyter-widgets/base\": () => (loadSingletonVersionCheck(\"default\", \"@jupyter-widgets/base\", [,[1,6],[1,5],[1,4],[1,3],[1,2],[1,1,1,10],1,1,1,1,1]))\n};\n// no consumes in initial chunks\nvar chunkMapping = {\n\t\"lib_widgets_js\": [\n\t\t\"webpack/sharing/consume/default/@jupyter-widgets/base\"\n\t]\n};\n__webpack_require__.f.consumes = (chunkId, promises) => {\n\tif(__webpack_require__.o(chunkMapping, chunkId)) {\n\t\tchunkMapping[chunkId].forEach((id) => {\n\t\t\tif(__webpack_require__.o(installedModules, id)) return promises.push(installedModules[id]);\n\t\t\tvar onFactory = (factory) => {\n\t\t\t\tinstalledModules[id] = 0;\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tmodule.exports = factory();\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onError = (error) => {\n\t\t\t\tdelete installedModules[id];\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tvar promise = moduleToHandlerMapping[id]();\n\t\t\t\tif(promise.then) {\n\t\t\t\t\tpromises.push(installedModules[id] = promise.then(onFactory)['catch'](onError));\n\t\t\t\t} else onFactory(promise);\n\t\t\t} catch(e) { onError(e); }\n\t\t});\n\t}\n}",
         "// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"ipywebgl\": 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkipywebgl\"] = self[\"webpackChunkipywebgl\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));",
         "__webpack_require__.nc = undefined;",
         "",
         "// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__(\"webpack/container/entry/ipywebgl\");\n",
         ""
```

### Comparing `ipywebgl-0.1.1/ipywebgl/nbextension/index.js` & `ipywebgl-0.1.2/ipywebgl/nbextension/index.js`

 * *Files 2% similar despite different names*

#### js-beautify {}

```diff
@@ -376,15 +376,15 @@
                     }
                     glEnumToString(e, t) {
                         const r = [];
                         for (const a in e) e[a] === t && r.push(a);
                         return r.length ? r.join(" | ") : `0x${t.toString(16)}`
                     }
                     execute_command(e, t, r) {
-                        switch (t.cmd) {
+                        switch (console.log(t), t.cmd) {
                             case "viewport":
                                 e.viewport(t.x, t.y, t.width, t.height);
                                 break;
                             case "enable":
                             case "disable": {
                                 let r = 0;
                                 t.blend && (r |= e.BLEND), t.depth_test && (r |= e.DEPTH_TEST), t.dither && (r |= e.DITHER), t.polygon_offset_fill && (r |= e.POLYGON_OFFSET_FILL), t.sample_alpha_to_coverage && (r |= e.SAMPLE_ALPHA_TO_COVERAGE), t.sample_coverage && (r |= e.SAMPLE_COVERAGE), t.scissor_test && (r |= e.SCISSOR_TEST), t.stencil_test && (r |= e.STENCIL_TEST), t.rasterizer_discard && (r |= e.RASTERIZER_DISCARD), t.cull_face && (r |= e.CULL_FACE), "enable" == t.cmd ? e.enable(r) : e.disable(r)
@@ -702,24 +702,25 @@
                                 } else e.bindVertexArray(null), this.bound_vao = null;
                                 break;
                             case "vertexAttribPointer":
                             case "vertexAttribIPointer":
                             case "enableVertexAttribArray":
                             case "disableVertexAttribArray":
                             case "vertexAttrib[1234]fv":
-                            case "vertexAttribI4[u]iv": {
+                            case "vertexAttribI4[u]iv":
+                            case "vertexAttribDivisor": {
                                 let a = -1;
                                 if ("number" == typeof t.index) a = t.index;
                                 else if (null != this.bound_program) {
                                     const e = this.bound_program.get("_info").attributes.find((e => e.name == t.index));
                                     null != e && (a = e.location)
                                 } else console.error("a program must be bound to find the attribute");
                                 let i = this.bound_buffers.ARRAY_BUFFER;
                                 if (a >= 0)
-                                    if ("vertexAttribIPointer" == t.cmd) {
+                                    if (a += t.index_offset, "vertexAttribIPointer" == t.cmd) {
                                         if (e.vertexAttribIPointer(a, t.size, e[t.type], t.stride, t.offset), null != this.bound_vao && null != i) {
                                             let e = this.bound_vao.get("_info");
                                             const r = i.get("uid");
                                             let n = e.bindings.find((e => e.buffer_uid == r));
                                             null == n && (n = {
                                                 buffer_uid: r,
                                                 attributes: []
@@ -746,15 +747,15 @@
                                             size: t.size,
                                             type: t.type,
                                             normalized: t.normalized,
                                             stride: t.stride,
                                             offset: t.offset
                                         }), this.bound_vao.set("_info", e), this.bound_vao.save_changes()
                                     }
-                                } else "enableVertexAttribArray" == t.cmd ? e.enableVertexAttribArray(a) : "disableVertexAttribArray" == t.cmd ? e.disableVertexAttribArray(a) : "vertexAttrib[1234]fv" == t.cmd ? (1 == t.buffer_metadata.shape[0] ? e.vertexAttrib1fv(a, r[t.buffer_metadata.index]) : 2 == t.buffer_metadata.shape[0] && e.vertexAttrib2fv(a, r[t.buffer_metadata.index]), 3 == t.buffer_metadata.shape[0] && e.vertexAttrib3fv(a, r[t.buffer_metadata.index]), 4 == t.buffer_metadata.shape[0] && e.vertexAttrib4fv(a, r[t.buffer_metadata.index])) : "vertexAttribI4[u]iv" == t.cmd && ("uint32" == t.buffer_metadata.dtype ? e.vertexAttribI4uiv(a, r[t.buffer_metadata.index]) : "int32" == t.buffer_metadata.dtype && e.vertexAttribI4iv(a, r[t.buffer_metadata.index]));
+                                } else "enableVertexAttribArray" == t.cmd ? e.enableVertexAttribArray(a) : "disableVertexAttribArray" == t.cmd ? e.disableVertexAttribArray(a) : "vertexAttrib[1234]fv" == t.cmd ? (1 == t.buffer_metadata.shape[0] ? e.vertexAttrib1fv(a, r[t.buffer_metadata.index]) : 2 == t.buffer_metadata.shape[0] && e.vertexAttrib2fv(a, r[t.buffer_metadata.index]), 3 == t.buffer_metadata.shape[0] && e.vertexAttrib3fv(a, r[t.buffer_metadata.index]), 4 == t.buffer_metadata.shape[0] && e.vertexAttrib4fv(a, r[t.buffer_metadata.index])) : "vertexAttribI4[u]iv" == t.cmd ? "uint32" == t.buffer_metadata.dtype ? e.vertexAttribI4uiv(a, r[t.buffer_metadata.index]) : "int32" == t.buffer_metadata.dtype && e.vertexAttribI4iv(a, r[t.buffer_metadata.index]) : "vertexAttribDivisor" == t.cmd && e.vertexAttribDivisor(a, t.divisor);
                                 else console.error(`attribute ${t.index} location not found`)
                             }
                             break;
                             case "drawArrays":
                                 e.drawArrays(e[t.mode], t.first, t.count);
                                 break;
                             case "drawArraysInstanced":
@@ -952,21 +953,21 @@
                         p = e[4] * e[9],
                         g = e[8] * e[5],
                         v = e[0] * e[13],
                         x = e[12] * e[1],
                         y = e[0] * e[9],
                         w = e[8] * e[1],
                         E = e[0] * e[5],
-                        k = e[4] * e[1],
-                        M = t * e[5] + i * e[9] + n * e[13] - (r * e[5] + a * e[9] + s * e[13]),
-                        A = r * e[1] + o * e[9] + l * e[13] - (t * e[1] + c * e[9] + u * e[13]),
+                        A = e[4] * e[1],
+                        k = t * e[5] + i * e[9] + n * e[13] - (r * e[5] + a * e[9] + s * e[13]),
+                        M = r * e[1] + o * e[9] + l * e[13] - (t * e[1] + c * e[9] + u * e[13]),
                         O = a * e[1] + c * e[5] + d * e[13] - (i * e[1] + o * e[5] + f * e[13]),
                         S = s * e[1] + u * e[5] + f * e[9] - (n * e[1] + l * e[5] + d * e[9]),
-                        F = 1 / (e[0] * M + e[4] * A + e[8] * O + e[12] * S);
-                    return [F * M, F * A, F * O, F * S, F * (r * e[4] + a * e[8] + s * e[12] - (t * e[4] + i * e[8] + n * e[12])), F * (t * e[0] + c * e[8] + u * e[12] - (r * e[0] + o * e[8] + l * e[12])), F * (i * e[0] + o * e[4] + f * e[12] - (a * e[0] + c * e[4] + d * e[12])), F * (n * e[0] + l * e[4] + d * e[8] - (s * e[0] + u * e[4] + f * e[8])), F * (m * e[7] + b * e[11] + p * e[15] - (_ * e[7] + h * e[11] + g * e[15])), F * (_ * e[3] + v * e[11] + w * e[15] - (m * e[3] + x * e[11] + y * e[15])), F * (h * e[3] + x * e[7] + E * e[15] - (b * e[3] + v * e[7] + k * e[15])), F * (g * e[3] + y * e[7] + k * e[11] - (p * e[3] + w * e[7] + E * e[11])), F * (h * e[10] + g * e[14] + _ * e[6] - (p * e[14] + m * e[6] + b * e[10])), F * (y * e[14] + m * e[2] + x * e[10] - (v * e[10] + w * e[14] + _ * e[2])), F * (v * e[6] + k * e[14] + b * e[2] - (E * e[14] + h * e[2] + x * e[6])), F * (E * e[10] + p * e[2] + w * e[6] - (y * e[6] + k * e[10] + g * e[2]))]
+                        F = 1 / (e[0] * k + e[4] * M + e[8] * O + e[12] * S);
+                    return [F * k, F * M, F * O, F * S, F * (r * e[4] + a * e[8] + s * e[12] - (t * e[4] + i * e[8] + n * e[12])), F * (t * e[0] + c * e[8] + u * e[12] - (r * e[0] + o * e[8] + l * e[12])), F * (i * e[0] + o * e[4] + f * e[12] - (a * e[0] + c * e[4] + d * e[12])), F * (n * e[0] + l * e[4] + d * e[8] - (s * e[0] + u * e[4] + f * e[8])), F * (m * e[7] + b * e[11] + p * e[15] - (_ * e[7] + h * e[11] + g * e[15])), F * (_ * e[3] + v * e[11] + w * e[15] - (m * e[3] + x * e[11] + y * e[15])), F * (h * e[3] + x * e[7] + E * e[15] - (b * e[3] + v * e[7] + A * e[15])), F * (g * e[3] + y * e[7] + A * e[11] - (p * e[3] + w * e[7] + E * e[11])), F * (h * e[10] + g * e[14] + _ * e[6] - (p * e[14] + m * e[6] + b * e[10])), F * (y * e[14] + m * e[2] + x * e[10] - (v * e[10] + w * e[14] + _ * e[2])), F * (v * e[6] + A * e[14] + b * e[2] - (E * e[14] + h * e[2] + x * e[6])), F * (E * e[10] + p * e[2] + w * e[6] - (y * e[6] + A * e[10] + g * e[2]))]
                 }
             },
             412: (e, t, r) => {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }), t.MODULE_NAME = t.MODULE_VERSION = void 0;
@@ -994,15 +995,15 @@
             },
             146: t => {
                 "use strict";
                 t.exports = e
             },
             147: e => {
                 "use strict";
-                e.exports = JSON.parse('{"name":"ipywebgl","version":"0.1.0","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/JeromeEippers/ipywebgl","bugs":{"url":"https://github.com/JeromeEippers/ipywebgl/issues"},"license":"BSD-3-Clause","author":{"name":"Jerome Eippers","email":"jerome@eippers.be"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/JeromeEippers/ipywebgl"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebgl/labextension","clean:nbextension":"rimraf ipywebgl/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebgl/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
+                e.exports = JSON.parse('{"name":"ipywebgl","version":"0.1.1","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/JeromeEippers/ipywebgl","bugs":{"url":"https://github.com/JeromeEippers/ipywebgl/issues"},"license":"BSD-3-Clause","author":{"name":"Jerome Eippers","email":"jerome@eippers.be"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/JeromeEippers/ipywebgl"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebgl/labextension","clean:nbextension":"rimraf ipywebgl/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebgl/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
             }
         },
         r = {};
 
     function a(e) {
         var i = r[e];
         if (void 0 !== i) return i.exports;
```

### Comparing `ipywebgl-0.1.1/ipywebgl/nbextension/index.js.map` & `ipywebgl-0.1.2/ipywebgl/nbextension/index.js.map`

 * *Files 2% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9196476404769559%*

 * *Differences: {"'mappings'": "'iEAEAA,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACC,EAAOC,GAAI,0QAA2Q,KAEpSD,EAAOH,QAAUA,C,uBCEjBG,EAAOH,QAAU,SAAUK,GACzB,IAAIC,EAAO,GAuDX,OArDAA,EAAKC,SAAW,WACd,OAAOC,KAAKC,KAAI,SAAUC,GACxB,IAAIC,EAsDV,SAAgCD,EAAML,GACpC,IAoBiBO,EAEbC,EACAC,EAvBAH,EAAUD,EAAK,IAAM,GAErBK,EAAaL,EAAK,GAEtB,IAAKK,EACH,OAAOJ,EAGT,GAAIN,GAAgC,mBAATW,KAAqB,CAC9C,IAAIC,GAWWL,EAXeG,EAa5BF,EAASG,KAAKE,SAASC,mBAAmBC,KAAKC,UAAUT,MACzDE,EAAO,+DAA+DQ,OAAOT,GAC1E,OAAOS,OAAOR,EAAM,QAdrBS,EAAaR,EAAWS,QAAQf,KAAI,SAAUgB,GAChD,M []*

```diff
@@ -1,10 +1,10 @@
 {
     "file": "index.js",
-    "mappings": "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",
+    "mappings": "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",
     "names": [
         "exports",
         "___CSS_LOADER_API_IMPORT___",
         "push",
         "module",
         "id",
         "useSourceMap",
@@ -239,14 +239,15 @@
         "pm_f32",
         "vpm",
         "vpm_f32",
         "bufferSubData",
         "execute_command",
         "glEnumToString",
         "value",
+        "log",
         "cmd",
         "x",
         "y",
         "cap",
         "blend",
         "BLEND",
         "depth_test",
@@ -419,14 +420,15 @@
         "src_offset",
         "createVertexArray",
         "bindings",
         "vertex_array",
         "bindVertexArray",
         "bound_vao",
         "attr",
+        "index_offset",
         "vertexAttribIPointer",
         "stride",
         "vao_info",
         "buffer_uid",
         "binding_info",
         "pointer",
         "vertexAttribPointer",
@@ -435,14 +437,16 @@
         "disableVertexAttribArray",
         "vertexAttrib1fv",
         "vertexAttrib2fv",
         "vertexAttrib3fv",
         "vertexAttrib4fv",
         "vertexAttribI4uiv",
         "vertexAttribI4iv",
+        "vertexAttribDivisor",
+        "divisor",
         "drawArrays",
         "first",
         "drawArraysInstanced",
         "instance_count",
         "drawElements",
         "drawElementsInstanced",
         "createFramebuffer",
@@ -571,15 +575,15 @@
         "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ipywebgl-json-display {\\r\\n  padding: 10px;\\r\\n  font-family: sans-serif;\\r\\n  background-color: #f2f2f2;\\r\\n  margin-left: 20px;\\r\\n}\\r\\n\\r\\n.ipywebgl-json-key {\\r\\n  font-weight: bold;\\r\\n  color: #333;\\r\\n}\\r\\n\\r\\n.ipywebgl-json-value {\\r\\n  color: #555;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
         "\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}",
         "var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};",
         "\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};",
         "export function buffer_to_array(dtype:String, buffer: any) {\r\n    switch (dtype) {\r\n      case 'int8':\r\n        return new Int8Array(buffer);\r\n        break;\r\n      case 'uint8':\r\n        return new Uint8Array(buffer);\r\n        break;\r\n      case 'int16':\r\n        return new Int16Array(buffer);\r\n        break;\r\n      case 'uint16':\r\n        return new Uint16Array(buffer);\r\n        break;\r\n      case 'int32':\r\n        return new Int32Array(buffer);\r\n        break;\r\n      case 'uint32':\r\n        return new Uint32Array(buffer);\r\n        break;\r\n      case 'float32':\r\n        return new Float32Array(buffer);\r\n        break;\r\n      case 'float64':\r\n        return new Float64Array(buffer);\r\n        break;\r\n      default:\r\n        throw 'Unknown dtype ' + dtype;\r\n        break;\r\n    }\r\n  }",
         "// Copyright (c) Jupyter Development Team.\r\n// Distributed under the terms of the Modified BSD License.\r\n\r\n// Entry point for the notebook bundle containing custom model definitions.\r\n//\r\n// Setup notebook base URL\r\n//\r\n// Some static assets may be required by the custom widget javascript. The base\r\n// url for the notebook is not known at build time and is therefore computed\r\n// dynamically.\r\n// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n(window as any).__webpack_public_path__ =\r\n  document.querySelector('body')!.getAttribute('data-base-url') +\r\n  'nbextensions/ipywebgl';\r\n\r\nexport * from './index';\r\n",
         "import {\r\n    DOMWidgetModel,\r\n    DOMWidgetView,\r\n    ISerializers,\r\n    unpack_models\r\n  } from '@jupyter-widgets/base';\r\n  \r\nimport { MODULE_NAME, MODULE_VERSION } from './version';\r\n\r\n// Import the CSS\r\nimport '../css/widget.css';\r\n\r\nexport class GLResource extends DOMWidgetModel{\r\n    defaults() {\r\n      return {\r\n        ...super.defaults(),\r\n        _model_name: 'GLResource',\r\n        _model_module: MODULE_NAME,\r\n        _model_module_version: MODULE_VERSION,\r\n        _view_name: 'GLResourceView',\r\n        _view_module: MODULE_NAME,\r\n        _view_module_version: MODULE_VERSION,\r\n  \r\n        _context: null,\r\n        _gl_ptr:null,\r\n        _info: {type:'not set'},\r\n  \r\n        uid: 0,\r\n      };\r\n    }\r\n\r\n    static serializers: ISerializers = {\r\n        ...DOMWidgetModel.serializers,\r\n        _context: { deserialize: unpack_models },\r\n      };\r\n    \r\n    initialize(attributes: any, options: any) {\r\n        super.initialize(attributes, options);\r\n        this.get('_context').register_resource(this);\r\n    }\r\n}\r\n  \r\nexport class GLResourceView extends DOMWidgetView {\r\n\r\n    render() {\r\n\r\n      const root = this.el;\r\n      const jsonDisplay = document.createElement(\"div\");\r\n      jsonDisplay.classList.add(\"ipywebgl-json-display\");\r\n  \r\n      const jsonKey = document.createElement(\"div\");\r\n      jsonKey.classList.add(\"ipywebgl-json-key\");\r\n      jsonKey.textContent = \"uid:\";\r\n\r\n      const jsonValue = document.createElement(\"div\");\r\n      jsonValue.classList.add(\"ipywebgl-json-value\");\r\n      jsonValue.textContent = this.model.get('uid');\r\n      jsonDisplay.appendChild(jsonKey);\r\n      jsonDisplay.appendChild(jsonValue);\r\n\r\n      this.displayJson(this.model.get('_info'), jsonDisplay);\r\n      root.appendChild(jsonDisplay);\r\n    }\r\n\r\n    displayJson(json:any, parent:any) {\r\n      for (const key in json) {\r\n        const jsonKey = document.createElement(\"div\");\r\n        jsonKey.classList.add(\"ipywebgl-json-key\");\r\n        jsonKey.textContent = `${key}:`;\r\n\r\n        const jsonValue = document.createElement(\"div\");\r\n        jsonValue.classList.add(\"ipywebgl-json-value\");\r\n\r\n        if (typeof json[key] === \"object\") {\r\n          const nestedJsonDisplay = document.createElement(\"div\");\r\n          nestedJsonDisplay.classList.add(\"ipywebgl-json-display\");\r\n\r\n          this.displayJson(json[key], nestedJsonDisplay);\r\n          jsonValue.appendChild(nestedJsonDisplay);\r\n        } else {\r\n          jsonValue.textContent = json[key];\r\n        }\r\n\r\n        parent.appendChild(jsonKey);\r\n        parent.appendChild(jsonValue);\r\n      }\r\n    }\r\n\r\n    \r\n}\r\n\r\n  ",
-        "import {\r\n  DOMWidgetModel,\r\n  DOMWidgetView,\r\n  ISerializers,\r\n} from '@jupyter-widgets/base';\r\n\r\nimport { MODULE_NAME, MODULE_VERSION } from './version';\r\n\r\nimport { m4dot, m4getColumnI, m4getColumnK, m4inverse, m4ProjectionMatrix, m4Translation, m4Transpose, m4Xrotation, m4Yrotation, vec3Add, vec3Scale } from './matrix';\r\nimport { GLResource } from './glresource';\r\nimport { buffer_to_array } from './arraybuffer';\r\n\r\n\r\nexport class GLModel extends DOMWidgetModel {\r\n  defaults() {\r\n    return {\r\n      ...super.defaults(),\r\n      _model_name: 'GLModel',\r\n      _model_module: MODULE_NAME,\r\n      _model_module_version: MODULE_VERSION,\r\n      _view_name: 'GLViewer',\r\n      _view_module: MODULE_NAME,\r\n      _view_module_version: MODULE_VERSION,\r\n      shader_matrix_major:'row_major',\r\n      width:700,\r\n      height:500,\r\n      camera_pos:[0,50,200],\r\n      camera_yaw:0,\r\n      camera_pitch:0,\r\n      mouse_speed:1,\r\n      move_speed:1,\r\n      move_keys:'wasd',\r\n    };\r\n  }\r\n\r\n  static serializers: ISerializers = {\r\n    ...DOMWidgetModel.serializers,\r\n  };\r\n\r\n  initialize(attributes: any, options: any) {\r\n    super.initialize(attributes, options);\r\n\r\n    this.canvas = document.createElement('canvas');\r\n    this.ctx = this.canvas.getContext(\"webgl2\", {preserveDrawingBuffer: true});\r\n    if (this.ctx == null){\r\n      console.error('could not create a webgl2 context, this is not supported in your browser');\r\n    }\r\n    else{\r\n      const gl:WebGL2RenderingContext = this.ctx;\r\n      this.view_block = gl.createBuffer();\r\n      gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n      gl.bufferData(gl.UNIFORM_BUFFER, 256, gl.DYNAMIC_DRAW);\r\n      gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n      gl.bindBufferBase(gl.UNIFORM_BUFFER, 0, this.view_block);\r\n\r\n      //extensions to activate\r\n      gl.getExtension(\"EXT_color_buffer_float\")\r\n    }\r\n\r\n    this.resizeCanvas();\r\n    this.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n    this.on_some_change(['camera_pos', 'camera_yaw', 'camera_pitch'], this.run_commands, this);\r\n\r\n    this.on('msg:custom', this.handle_custom_messages, this);\r\n\r\n    this.camera_matrix = m4Translation(0,50,200);\r\n    this.view_matrix = m4inverse(this.camera_matrix);\r\n  }\r\n\r\n  resizeCanvas() {\r\n    this.canvas.setAttribute('width', this.get('width'));\r\n    this.canvas.setAttribute('height', this.get('height'));\r\n    if (this.ctx != null){\r\n      this.ctx.viewport(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n    }\r\n    this.projection_matrix = m4ProjectionMatrix(50.0, this.get('width')/this.get('height'), 1.0, 5000.0);\r\n  }\r\n\r\n  handle_custom_messages(command: any, buffers:any) {\r\n    if(command.clear == true){\r\n      this.commands = [];\r\n      this.buffers = [];\r\n    }\r\n    let commands = command.commands;\r\n    let converted_buffers:any[] = [];\r\n    commands.forEach((element:any)=>{\r\n      if (element.hasOwnProperty('buffer_metadata')) {\r\n        const converted = buffer_to_array(element.buffer_metadata.dtype, buffers[element.buffer_metadata.index].buffer);\r\n        converted_buffers.push(converted);\r\n      }\r\n    });\r\n\r\n    if(command.only_once == true){\r\n      this.execute_commands(commands, converted_buffers);\r\n    }\r\n    else{\r\n      let buffer_id_offset = this.buffers.length;\r\n      this.buffers = this.buffers.concat(converted_buffers);\r\n      commands.forEach((element:any)=>{\r\n        if (element.hasOwnProperty('buffer_metadata')) {\r\n          element.buffer_metadata.index += buffer_id_offset;\r\n        }\r\n      });\r\n      this.commands = this.commands.concat(commands);\r\n    }\r\n\r\n    this.run_commands();\r\n  }\r\n\r\n  private update_camera(){\r\n    let pos = this.get('camera_pos');\r\n    let yaw = this.get('camera_yaw') * Math.PI / 180.0;\r\n    let pitch = this.get('camera_pitch') * Math.PI / 180.0;\r\n    this.camera_matrix = m4Translation(pos[0], pos[1], pos[2]);\r\n    this.camera_matrix = m4dot(this.camera_matrix, m4Yrotation(yaw));\r\n    this.camera_matrix = m4dot(this.camera_matrix, m4Xrotation(pitch));\r\n    this.view_matrix = m4inverse(this.camera_matrix);\r\n    this.view_proj_matrix = m4dot(this.projection_matrix, this.view_matrix);\r\n  }\r\n\r\n  run_commands(){\r\n    this.execute_commands(this.commands, this.buffers);\r\n  }\r\n\r\n  execute_commands(commands:any[], converted_buffers:any[]){\r\n    if (this.ctx == null) return;\r\n    const gl:WebGL2RenderingContext = this.ctx;\r\n\r\n    this.update_camera();\r\n\r\n    // update the uniform Block\r\n    let cm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.camera_matrix): this.camera_matrix;\r\n    const cm_f32 = new Float32Array(cm);\r\n    let vm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.view_matrix): this.view_matrix;\r\n    const vm_f32 = new Float32Array(vm);\r\n    let pm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.projection_matrix): this.projection_matrix;\r\n    const pm_f32 = new Float32Array(pm);\r\n    let vpm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.view_proj_matrix): this.view_proj_matrix;\r\n    const vpm_f32 = new Float32Array(vpm);\r\n\r\n    gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 0, cm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 64, vm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 128, pm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 192, vpm_f32, 0);\r\n    gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n\r\n    commands.forEach((command:any)=>{\r\n      this.execute_command(gl, command, converted_buffers);\r\n    });\r\n  }\r\n\r\n  glEnumToString(gl:WebGL2RenderingContext, value:any) {\r\n    const keys = [];\r\n    for (const key in gl) {\r\n      if ((gl as any)[key] === value) {\r\n        keys.push(key);\r\n      }\r\n    }\r\n    return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;\r\n  }\r\n\r\n  execute_command(gl:WebGL2RenderingContext, command:any, converted_buffers:any[]){\r\n    //console.log(command);\r\n    //console.log(this.bound_buffers);\r\n    switch(command.cmd){\r\n      case 'viewport':\r\n          gl.viewport(command.x, command.y, command.width, command.height);\r\n        break;\r\n      case 'enable':\r\n      case 'disable':\r\n        {\r\n          let cap = 0;\r\n          if (command.blend) cap |= gl.BLEND;\r\n          if (command.depth_test) cap |= gl.DEPTH_TEST;\r\n          if (command.dither) cap |= gl.DITHER;\r\n          if (command.polygon_offset_fill) cap |= gl.POLYGON_OFFSET_FILL;\r\n          if (command.sample_alpha_to_coverage) cap |= gl.SAMPLE_ALPHA_TO_COVERAGE;\r\n          if (command.sample_coverage) cap |= gl.SAMPLE_COVERAGE;\r\n          if (command.scissor_test) cap |= gl.SCISSOR_TEST;\r\n          if (command.stencil_test) cap |= gl.STENCIL_TEST;\r\n          if (command.rasterizer_discard) cap |= gl.RASTERIZER_DISCARD;\r\n          if (command.cull_face) cap |= gl.CULL_FACE;\r\n          if (command.cmd == 'enable'){\r\n            gl.enable(cap);\r\n          } else{\r\n            gl.disable(cap);\r\n          }\r\n        }\r\n        break;\r\n      case 'clearColor':\r\n          gl.clearColor(command.r, command.g, command.b, command.a);\r\n        break;\r\n      case 'clear':{\r\n        let bits = 0;\r\n        if (command.depth) bits |= gl.DEPTH_BUFFER_BIT;\r\n        if (command.color) bits |= gl.COLOR_BUFFER_BIT;\r\n        if (command.stencil) bits |= gl.STENCIL_BUFFER_BIT;\r\n        gl.clear(bits);\r\n      }\r\n      break;\r\n      case 'frontFace':{\r\n        gl.frontFace((gl as any)[command.mode]);\r\n      }\r\n      break;\r\n      case 'cullFace':{\r\n        gl.cullFace((gl as any)[command.mode]);\r\n      }\r\n      break;\r\n\r\n      // ------------------------------- DEPTH --------------------------------------\r\n      case 'depthFunc':{\r\n        gl.depthFunc((gl as any)[command.func]);\r\n      }\r\n      break;\r\n      case 'depthMask':{\r\n        gl.depthMask(command.flag);\r\n      }\r\n      break;\r\n      case 'depthRange':{\r\n        gl.depthRange(command.z_near, command.z_far);\r\n      }\r\n      break;\r\n\r\n      // ------------------------------- COLOR --------------------------------------\r\n      case 'blendColor':\r\n          gl.blendColor(command.r, command.g, command.b, command.a);\r\n        break;\r\n      case 'blendEquation':\r\n        gl.blendEquation((gl as any)[command.mode]);\r\n        break;\r\n      case 'blendEquationSeparate':\r\n          gl.blendEquationSeparate((gl as any)[command.mode_rgb], (gl as any)[command.mode_alpha]);\r\n          break;\r\n      case 'blendFunc':\r\n          gl.blendFunc((gl as any)[command.s_factor], (gl as any)[command.d_factor])\r\n      break;\r\n      case 'blend_func_separate':\r\n         gl.blendFuncSeparate((gl as any)[command.src_rgb], (gl as any)[command.dst_rgb], (gl as any)[command.src_alpha], (gl as any)[command.dst_alpha])\r\n        break;\r\n        \r\n      // ------------------------------- TEXTURE --------------------------------------\r\n      case 'createTexture':{\r\n        let res = this.get_resource(command.resource);\r\n        const ptr = gl.createTexture();\r\n        res.set('_gl_ptr', ptr);\r\n        res.set('_info', {type:'texture'});\r\n        res.save_changes();\r\n      }\r\n      break;\r\n      case 'bindTexture':{\r\n        if (command.texture > -1){\r\n          const texture = this.get_resource(command.texture).get('_gl_ptr');\r\n          gl.bindTexture((gl as any)[command.target], texture);\r\n        }\r\n        else{\r\n          gl.bindTexture((gl as any)[command.target], null);\r\n        }\r\n      }\r\n      break;\r\n      case 'activeTexture':\r\n        gl.activeTexture(gl.TEXTURE0 + command.texture);\r\n      break;\r\n      case 'generateMipmap':\r\n        gl.generateMipmap((gl as any)[command.target]);\r\n      break;\r\n      case 'texImage2D':\r\n        if (command.hasOwnProperty('buffer_metadata')){\r\n          gl.texImage2D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            converted_buffers[command.buffer_metadata.index]\r\n          )\r\n        }\r\n        else{\r\n          gl.texImage2D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            null\r\n          )\r\n        }\r\n      break;\r\n      case 'texStorage2D':{\r\n        gl.texStorage2D(\r\n          (gl as any)[command.target],\r\n          command.levels,\r\n          (gl as any)[command.internal_format],\r\n          command.width,\r\n          command.height\r\n        );\r\n      }\r\n      break;\r\n      case 'texImage3D':\r\n        if (command.hasOwnProperty('buffer_metadata')){\r\n          gl.texImage3D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.depth,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            converted_buffers[command.buffer_metadata.index]\r\n          )\r\n        }else{\r\n          gl.texImage3D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.depth,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            null\r\n          )\r\n        }\r\n      break;\r\n      case 'texStorage3D':{\r\n        gl.texStorage3D(\r\n          (gl as any)[command.target],\r\n          command.levels,\r\n          (gl as any)[command.internal_format],\r\n          command.width,\r\n          command.height,\r\n          command.depth\r\n        );\r\n      }\r\n      break;\r\n      case 'texParameteri':\r\n        gl.texParameteri((gl as any)[command.target], (gl as any)[command.pname], command.param);\r\n      break;\r\n      case 'texParameterf':\r\n        gl.texParameterf((gl as any)[command.target], (gl as any)[command.pname], command.param);\r\n      break;\r\n      case 'texParameter_str':\r\n        gl.texParameteri((gl as any)[command.target], (gl as any)[command.pname], (gl as any)[command.param]);\r\n      break;\r\n      case 'pixelStorei':{\r\n        if (command.pname == 'UNPACK_COLORSPACE_CONVERSION_WEBGL'){\r\n          gl.pixelStorei((gl as any)[command.pname], (gl as any)[command.param]);\r\n        }\r\n        else{\r\n          gl.pixelStorei((gl as any)[command.pname], command.param);\r\n        }\r\n      }\r\n      break;\r\n      // ------------------------------- SHADERS --------------------------------------\r\n      case 'createShader':{\r\n        let res = this.get_resource(command.resource);\r\n        const ptr = gl.createShader((gl as any)[command.type]);\r\n        res.set('_gl_ptr', ptr);\r\n        res.set('_info', {type:command.type});\r\n        res.save_changes();\r\n      }\r\n      break;\r\n      case 'shaderSource':{\r\n        const res = this.get_resource(command.shader);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.shaderSource(ptr, command.source);\r\n        }\r\n        break;\r\n      case 'compileShader':{\r\n          const res = this.get_resource(command.shader);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.compileShader(ptr);\r\n          let resinfo = res.get('_info');\r\n\r\n          if ( !gl.getShaderParameter(ptr, gl.COMPILE_STATUS) ) {\r\n            let info = gl.getShaderInfoLog( ptr );\r\n            resinfo.message = info;\r\n          }\r\n          else{\r\n            resinfo.message = 'compiled';\r\n          }\r\n          res.set('_info', resinfo);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      // ------------------------------- PROGRAMS --------------------------------------\r\n      case 'createProgram':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createProgram();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Program'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'attachShader':{\r\n          const prog = this.get_resource(command.program).get('_gl_ptr');\r\n          const shader = this.get_resource(command.shader).get('_gl_ptr');\r\n          gl.attachShader(prog, shader);\r\n        }\r\n        break;\r\n      case 'bindAttribLocation':{\r\n          let res = this.get_resource(command.program);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.bindAttribLocation(ptr, command.index, command.name);\r\n        }\r\n        break;\r\n      case 'linkProgram':{\r\n          let res = this.get_resource(command.program);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.linkProgram(ptr);\r\n          gl.validateProgram(ptr);\r\n          let resinfo = res.get('_info');\r\n\r\n          if ( !gl.getProgramParameter( ptr, gl.LINK_STATUS) ) {\r\n            let info = gl.getShaderInfoLog( ptr );\r\n            resinfo.message = info;\r\n          }\r\n          else{\r\n            //bind our viewBlock\r\n            let viewBlockIndex = gl.getUniformBlockIndex(ptr, 'ViewBlock');\r\n            if (viewBlockIndex < 4294967295){\r\n              gl.uniformBlockBinding(ptr, viewBlockIndex, 0);\r\n            }\r\n            resinfo.message = 'linked';\r\n            resinfo.uniforms_blocks = [];\r\n            resinfo.uniforms = [];\r\n            const numUniforms = gl.getProgramParameter(ptr, gl.ACTIVE_UNIFORMS);\r\n            const indices = [...Array(numUniforms).keys()];\r\n            const blockIndices = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_BLOCK_INDEX);\r\n            const offsets = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_OFFSET);\r\n            for (let i = 0; i < numUniforms; ++i) {\r\n              const info = gl.getActiveUniform(ptr, i);\r\n              if (info){\r\n                // regroup the blocks\r\n                if (blockIndices[i]>-1){\r\n                  let uniform_block = resinfo.uniforms_blocks.find((element:any)=>{return element.index == blockIndices[i]});\r\n                  if (uniform_block == undefined){\r\n                    uniform_block = {\r\n                      index:blockIndices[i], \r\n                      name:gl.getActiveUniformBlockName(ptr, blockIndices[i]), \r\n                      size:gl.getActiveUniformBlockParameter(ptr, blockIndices[i], gl.UNIFORM_BLOCK_DATA_SIZE),\r\n                      uniforms:[]};\r\n                    resinfo.uniforms_blocks.push(uniform_block);\r\n                  }\r\n                  uniform_block.uniforms.push(\r\n                    {name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, offset:offsets[i]}\r\n                  )\r\n                }\r\n                else{\r\n                  resinfo.uniforms.push({name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, location:gl.getUniformLocation(ptr, info.name)});\r\n                }\r\n              }\r\n            }\r\n            resinfo.attributes = [];\r\n            const numAttribute = gl.getProgramParameter(ptr, gl.ACTIVE_ATTRIBUTES);\r\n            for (let i = 0; i < numAttribute; ++i) {\r\n              const info = gl.getActiveAttrib(ptr, i);\r\n              if (info)\r\n                resinfo.attributes.push({name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, location:gl.getAttribLocation(ptr, info.name)});\r\n            }\r\n          }\r\n          res.set('_info', resinfo);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'useProgram':{\r\n          if(command.program >= 0){\r\n            const res = this.get_resource(command.program);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.useProgram(ptr);\r\n            this.bound_program = res;\r\n          } else {\r\n            gl.useProgram(null);\r\n            this.bound_program = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'uniform':\r\n      case 'uniformMatrix':\r\n        {\r\n          if(this.bound_program != null){\r\n            let resinfo = this.bound_program.get('_info');\r\n            const uniform = resinfo.uniforms.find((element:any)=>{return element.name == command.name});\r\n            if (uniform != undefined){\r\n              const location = uniform.location;\r\n\r\n              if (command.cmd == 'uniform'){\r\n                let shape = command.buffer_metadata.shape[command.buffer_metadata.shape.length-1];\r\n                if (command.buffer_metadata.dtype == 'int32'){\r\n                  let bufarray:Int32Array = converted_buffers[command.buffer_metadata.index] as Int32Array;\r\n                  if (shape == 1) gl.uniform1iv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2iv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3iv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4iv(location, bufarray);\r\n                }\r\n                else if (command.buffer_metadata.dtype == 'uint32'){\r\n                  let bufarray:Uint32Array = converted_buffers[command.buffer_metadata.index] as Uint32Array;\r\n                  if (shape == 1) gl.uniform1uiv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2uiv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3uiv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4uiv(location, bufarray);\r\n                }\r\n                else if (command.buffer_metadata.dtype == 'float32'){\r\n                  let bufarray:Float32Array = converted_buffers[command.buffer_metadata.index] as Float32Array;\r\n                  if (shape == 1) gl.uniform1fv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2fv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3fv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4fv(location, bufarray);\r\n                }\r\n              }\r\n\r\n              else {\r\n                let a = command.buffer_metadata.shape[command.buffer_metadata.shape.length-2];\r\n                let b = command.buffer_metadata.shape[command.buffer_metadata.shape.length-1];\r\n                let bufarray:Float32Array = converted_buffers[command.buffer_metadata.index] as Float32Array;\r\n                if (a==2)\r\n                {\r\n                  if (b==2) gl.uniformMatrix2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix2x3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix2x4fv(location, false, bufarray);\r\n                }\r\n                else if (a==3)\r\n                {\r\n                  if (b==2) gl.uniformMatrix3x2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix3x4fv(location, false, bufarray);\r\n                }\r\n                else if (a==4)\r\n                {\r\n                  if (b==2) gl.uniformMatrix4x2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix4x3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix4fv(location, false, bufarray);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      break;\r\n      case 'uniformBlockBinding':{\r\n        let res = this.get_resource(command.program);\r\n        const ptr = res.get('_gl_ptr');\r\n        const uniformblock = res.get('_info').uniforms_blocks.find((element:any)=>{return element.name == command.uniform_block_name});\r\n        if (uniformblock != undefined){\r\n          gl.uniformBlockBinding(ptr, uniformblock.index, command.uniform_block_binding);\r\n        }\r\n      }\r\n      break;\r\n      // ------------------------------- BUFFERS --------------------------------------\r\n      case 'createBuffer':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createBuffer();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Buffer'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bindBuffer':{\r\n          const target:string = command.target;\r\n          if(command.buffer >= 0){\r\n            const res = this.get_resource(command.buffer);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindBuffer((gl as any)[target], ptr);\r\n            (this.bound_buffers as any)[target] = res;\r\n          } else {\r\n            gl.bindBuffer((gl as any)[target], null);\r\n            (this.bound_buffers as any)[target]  = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'bindBufferBase':{\r\n          const target:string = command.target;\r\n          if(command.buffer >= 0){\r\n            const res = this.get_resource(command.buffer);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindBufferBase((gl as any)[target], command.index, ptr);\r\n          } else {\r\n            gl.bindBufferBase((gl as any)[target], command.index, null);\r\n          }\r\n        }\r\n        break;\r\n      case 'bufferData':{\r\n          const target:string = command.target;\r\n          const usage:string = command.usage;\r\n\r\n          if (command.hasOwnProperty('buffer_metadata')){\r\n            gl.bufferData((gl as any)[target], converted_buffers[command.buffer_metadata.index], (gl as any)[usage]);\r\n\r\n            let buf = (this.bound_buffers as any)[target];\r\n            if (command.update_info && buf != null){\r\n              const size = gl.getBufferParameter((gl as any)[target], gl.BUFFER_SIZE);\r\n              buf.set('_info', {type:\"Buffer\", size:size, target:target});\r\n              buf.save_changes();\r\n            }\r\n          }\r\n          else{\r\n            let buf = (this.bound_buffers as any)[target];\r\n            gl.bufferData((gl as any)[target], null, (gl as any)[usage]);\r\n            if (command.update_info && buf != null){\r\n              buf.set('_info', {type:\"Buffer\", size:'Undefined', target:target});\r\n              buf.save_changes();\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      case 'createUniformBuffer':{\r\n          let res = this.get_resource(command.buffer);\r\n          const ptr = gl.createBuffer();\r\n\r\n          let info = {type:'Buffer'};\r\n          const prog = this.get_resource(command.program);\r\n          const uniformblock = prog.get('_info').uniforms_blocks.find((element:any)=>{return element.name == command.block_name});\r\n          if (uniformblock != undefined){\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, ptr);\r\n            gl.bufferData(gl.UNIFORM_BUFFER, uniformblock.size, (gl as any)[command.usage]);\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n            (this.bound_buffers as any)[\"UNIFORM_BUFFER\"] = null;\r\n            (info as any)[\"size\"] = uniformblock.size;\r\n            (info as any)[\"target\"] = \"UNIFORM_BUFFER\";\r\n            (info as any)[\"uniformblock\"] = uniformblock;\r\n          }\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', info);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bufferSubData':\r\n      case 'bufferSubDataStr':{\r\n          const target:string = command.target;\r\n          let offset = command.dst_byte_offset;\r\n          if (command.cmd == 'bufferSubDataStr'){\r\n            offset = 0;\r\n            let buf = (this.bound_buffers as any)[target];\r\n            if (buf != null){\r\n              const uniformblock = buf.get('_info').uniformblock;\r\n              const uniform = uniformblock.uniforms.find((element:any)=>{return element.name == command.dst_byte_offset});\r\n              if (uniform != undefined){\r\n                offset = uniform.offset;\r\n              }\r\n            }\r\n          }\r\n          if (command.hasOwnProperty('buffer_metadata')){\r\n            gl.bufferSubData((gl as any)[target], offset, converted_buffers[command.buffer_metadata.index], command.src_offset);\r\n\r\n          }\r\n          else{\r\n            gl.bufferSubData((gl as any)[target], offset, command.src_offset);\r\n          }\r\n        }\r\n        break;\r\n      // ------------------------------- VERTEX ARRAYS --------------------------------------\r\n      case 'createVertexArray':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createVertexArray();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Vertex Array Object', bindings:[]});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bindVertexArray':{\r\n          if(command.vertex_array >= 0){\r\n            const res = this.get_resource(command.vertex_array);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindVertexArray(ptr);\r\n            this.bound_vao = res;\r\n          } else {\r\n            gl.bindVertexArray(null);\r\n            this.bound_vao = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'vertexAttribPointer':\r\n      case 'vertexAttribIPointer':\r\n      case 'enableVertexAttribArray':\r\n      case 'disableVertexAttribArray':\r\n      case 'vertexAttrib[1234]fv':\r\n      case 'vertexAttribI4[u]iv':\r\n        {\r\n          let index = -1;\r\n          if (typeof command.index === 'number'){\r\n            index = command.index;\r\n          }\r\n          else{\r\n            if (this.bound_program != null){\r\n              const attr = this.bound_program.get('_info').attributes.find((element:any)=>{return element.name == command.index});\r\n              if (attr != undefined){\r\n                index = attr.location;\r\n              }\r\n            }else{\r\n              console.error(\"a program must be bound to find the attribute\");\r\n            }\r\n          }\r\n          let buf = (this.bound_buffers as any)['ARRAY_BUFFER'];\r\n          if (index >= 0){\r\n            if (command.cmd == \"vertexAttribIPointer\"){\r\n              gl.vertexAttribIPointer(index, command.size, (gl as any)[command.type], command.stride, command.offset);\r\n              if (this.bound_vao != null && buf != null){\r\n                let vao_info = this.bound_vao.get('_info');\r\n                const buffer_uid = buf.get('uid');\r\n                let binding_info = vao_info.bindings.find((element:any)=>{return element.buffer_uid == buffer_uid});\r\n                if (binding_info == undefined){\r\n                  binding_info = {buffer_uid : buffer_uid, attributes : []};\r\n                  vao_info.bindings.push(binding_info);\r\n                }\r\n                binding_info.attributes.push({pointer:\"vertexAttribIPointer\", index:index, size:command.size, type:command.type, stride:command.stride, offset:command.offset})\r\n                this.bound_vao.set('_info', vao_info);\r\n                this.bound_vao.save_changes();\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribPointer\"){\r\n              gl.vertexAttribPointer(index, command.size, (gl as any)[command.type], command.normalized, command.stride, command.offset);\r\n              if (this.bound_vao != null && buf != null){\r\n                let vao_info = this.bound_vao.get('_info');\r\n                const buffer_uid = buf.get('uid');\r\n                let binding_info = vao_info.bindings.find((element:any)=>{return element.buffer_uid == buffer_uid});\r\n                if (binding_info == undefined){\r\n                  binding_info = {buffer_uid : buffer_uid, attributes : []};\r\n                  vao_info.bindings.push(binding_info);\r\n                }\r\n                binding_info.attributes.push({pointer:\"vertexAttribPointer\", index:index, size:command.size, type:command.type, normalized:command.normalized, stride:command.stride, offset:command.offset})\r\n                this.bound_vao.set('_info', vao_info);\r\n                this.bound_vao.save_changes();\r\n              }\r\n            }\r\n            else if (command.cmd == \"enableVertexAttribArray\"){\r\n              gl.enableVertexAttribArray(index);\r\n            }\r\n            else if (command.cmd == \"disableVertexAttribArray\"){\r\n              gl.disableVertexAttribArray(index);\r\n            }\r\n            else if (command.cmd == \"vertexAttrib[1234]fv\"){\r\n              if (command.buffer_metadata.shape[0] == 1){\r\n                gl.vertexAttrib1fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } else if (command.buffer_metadata.shape[0] == 2){\r\n                gl.vertexAttrib2fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } if (command.buffer_metadata.shape[0] == 3){\r\n                gl.vertexAttrib3fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }if (command.buffer_metadata.shape[0] == 4){\r\n                gl.vertexAttrib4fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribI4[u]iv\"){\r\n              if(command.buffer_metadata.dtype == \"uint32\"){\r\n                gl.vertexAttribI4uiv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } else if(command.buffer_metadata.dtype == \"int32\"){\r\n                gl.vertexAttribI4iv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }\r\n            }\r\n          }\r\n          else{\r\n            console.error(`attribute ${command.index} location not found`);\r\n          }\r\n        }\r\n        break;\r\n\r\n        // ------------------------------- RENDER --------------------------------------\r\n        case 'drawArrays':{\r\n          gl.drawArrays((gl as any)[command.mode], command.first, command.count);\r\n        }\r\n        break;\r\n        case 'drawArraysInstanced':{\r\n          gl.drawArraysInstanced((gl as any)[command.mode], command.first, command.count, command.instance_count);\r\n        }\r\n        break;\r\n        case 'drawElements':{\r\n          gl.drawElements((gl as any)[command.mode], command.count, (gl as any)[command.type], command.offset);\r\n        }\r\n        break;\r\n        case 'drawElementsInstanced':{\r\n          gl.drawElementsInstanced((gl as any)[command.mode], command.count, (gl as any)[command.type], command.offset, command.instance_count);\r\n        }\r\n        break;\r\n\r\n        // ------------------------------- FRAMEBUFFER --------------------------------------\r\n        case 'createFramebuffer':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createFramebuffer();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Framebuffer'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n        case 'bindFramebuffer':{\r\n          if (command.framebuffer >= 0){\r\n            let res = this.get_resource(command.framebuffer);\r\n            gl.bindFramebuffer((gl as any)[command.target], res.get('_gl_ptr'));\r\n          }\r\n          else{\r\n            gl.bindFramebuffer((gl as any)[command.target], null);\r\n          }\r\n        }\r\n        break;\r\n        case 'framebufferTexture2D':{\r\n          let res = this.get_resource(command.texture);\r\n          gl.framebufferTexture2D((gl as any)[command.target], (gl as any)[command.attachement], (gl as any)[command.textarget], res.get('_gl_ptr'), command.level);\r\n        }\r\n        break;\r\n        case 'drawBuffers' :{\r\n          const buffers = command.buffers.map((element:any)=>{return (gl as any)[element]; });\r\n          gl.drawBuffers(buffers);\r\n        }\r\n        break;\r\n        \r\n    }\r\n  }\r\n\r\n  register_resource(resource:GLResource){\r\n    if(resource.get('uid') != this.resources.length){\r\n      console.error('uid not matching what we have internally');\r\n    }\r\n    this.resources.push(resource);\r\n  }\r\n\r\n  get_resource(index:number){\r\n    return this.resources[index];\r\n  }\r\n\r\n  canvas: HTMLCanvasElement;\r\n  ctx: WebGL2RenderingContext | null;\r\n  view_block: WebGLBuffer | null;\r\n\r\n  resources : GLResource[] = [];\r\n  bound_program: GLResource | null;\r\n  bound_buffers = {};\r\n  bound_vao: GLResource | null;\r\n  commands : any[] = [];\r\n  buffers : any[] = [];\r\n\r\n  projection_matrix:number[];\r\n  camera_matrix:number[];\r\n  view_matrix:number[];\r\n  view_proj_matrix:number[];\r\n}\r\n\r\nexport class GLViewer extends DOMWidgetView {\r\n\r\n  render() {\r\n    this.el.appendChild(this.model.canvas);\r\n\r\n    this.resizeCanvas();\r\n    this.model.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n\r\n    this.el.addEventListener('mousemove', {\r\n      handleEvent: this.onMouseMove.bind(this)\r\n    });\r\n    this.el.addEventListener('mousedown', {\r\n      handleEvent: this.onMouseDown.bind(this)\r\n    });\r\n    this.el.addEventListener('mouseup', {\r\n      handleEvent: this.onMouseUp.bind(this)\r\n    });\r\n    this.el.addEventListener('mouseout', {\r\n      handleEvent: this.onMouseOut.bind(this)\r\n    });\r\n    this.el.addEventListener('keydown', {\r\n      handleEvent: this.onKeyDown.bind(this)\r\n    });\r\n    this.el.addEventListener('keyup', {\r\n      handleEvent: this.onKeyUp.bind(this)\r\n    });\r\n    this.el.setAttribute('tabindex', '0');\r\n  }\r\n \r\n  private resizeCanvas() {\r\n    this.el.setAttribute('width', this.model.get('width'));\r\n    this.el.setAttribute('height', this.model.get('height'));\r\n    this.model.resizeCanvas();\r\n  }\r\n\r\n  private redraw(){\r\n    this.will_redraw = false;\r\n\r\n    // update movement if needed\r\n    if (this.move_direction[0] || this.move_direction[1] || this.move_direction[2] || this.move_direction[3])\r\n    {\r\n      let speed = this.model.get('move_speed');\r\n      let forward_axis = m4getColumnK(this.model.camera_matrix);\r\n      let side_axis = m4getColumnI(this.model.camera_matrix);\r\n      let camera_pos = this.model.get('camera_pos');\r\n      if (this.move_direction[0]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(forward_axis, -speed));\r\n      }\r\n      if (this.move_direction[2]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(forward_axis, speed));\r\n      }\r\n      if (this.move_direction[1]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(side_axis, -speed));\r\n      }\r\n      if (this.move_direction[3]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(side_axis, speed));\r\n      }\r\n      this.model.set('camera_pos', camera_pos);\r\n      this.touch();\r\n      // request a new frame if we are moving\r\n      this.requestRedraw();\r\n    }\r\n\r\n    // re draw\r\n    this.model.run_commands();\r\n  }\r\n\r\n  private requestRedraw(){\r\n    if (this.will_redraw == false){\r\n      this.will_redraw = true;\r\n      requestAnimationFrame(this.redraw.bind(this));\r\n    }\r\n  }\r\n\r\n  private onMouseMove(event: MouseEvent) {\r\n    //this.model.send({ event: 'mouse_move', ...this.getCoordinates(event) }, {});\r\n    if(this.is_mouse_down){\r\n      let speed = this.model.get('mouse_speed');\r\n      this.model.set('camera_yaw', this.model.get('camera_yaw')-(event.movementX)*0.2*speed);\r\n      this.model.set('camera_pitch', this.model.get('camera_pitch')-(event.movementY)*0.2*speed);\r\n      this.touch();\r\n      this.requestRedraw();\r\n    }\r\n  }\r\n\r\n  private onMouseDown(event: MouseEvent) {\r\n    this.is_mouse_down = true;\r\n    this.model.canvas.focus();\r\n  }\r\n\r\n  private onMouseUp(event: MouseEvent) {\r\n    this.is_mouse_down = false;\r\n  }\r\n\r\n  private onMouseOut(event: MouseEvent) {\r\n    this.is_mouse_down = false;\r\n    this.move_direction = [false, false, false, false];\r\n  }\r\n\r\n  private onKeyDown(event: KeyboardEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    let keys = this.model.get('move_keys');\r\n\r\n    if(event.repeat == false){\r\n      if(event.key == keys[0]){\r\n        this.move_direction[0] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[1]){\r\n        this.move_direction[1] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[2]){\r\n        this.move_direction[2] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[3]){\r\n        this.move_direction[3] = true;\r\n        this.requestRedraw();\r\n      }\r\n    }\r\n  }\r\n\r\n  private onKeyUp(event: KeyboardEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    let keys = this.model.get('move_keys');\r\n\r\n    if(event.key == keys[0]){\r\n      this.move_direction[0] = false;\r\n    }\r\n    else if(event.key == keys[1]){\r\n      this.move_direction[1] = false;\r\n    }\r\n    else if(event.key == keys[2]){\r\n      this.move_direction[2] = false;\r\n    }\r\n    else if(event.key == keys[3]){\r\n      this.move_direction[3] = false;\r\n    }\r\n  }\r\n\r\n  protected getCoordinates(event: MouseEvent | Touch) {\r\n    const rect = this.el.getBoundingClientRect();\r\n\r\n    const x = (this.model.get('width') * (event.clientX - rect.left)) / rect.width;\r\n    const y = (this.model.get('height') * (event.clientY - rect.top)) / rect.height;\r\n\r\n    return { x, y };\r\n  }\r\n\r\n  model : GLModel;\r\n  is_mouse_down : boolean = false;\r\n  move_direction : boolean[] = [false, false, false, false];\r\n  will_redraw = false;\r\n}\r\n",
+        "import {\r\n  DOMWidgetModel,\r\n  DOMWidgetView,\r\n  ISerializers,\r\n} from '@jupyter-widgets/base';\r\n\r\nimport { MODULE_NAME, MODULE_VERSION } from './version';\r\n\r\nimport { m4dot, m4getColumnI, m4getColumnK, m4inverse, m4ProjectionMatrix, m4Translation, m4Transpose, m4Xrotation, m4Yrotation, vec3Add, vec3Scale } from './matrix';\r\nimport { GLResource } from './glresource';\r\nimport { buffer_to_array } from './arraybuffer';\r\n\r\n\r\nexport class GLModel extends DOMWidgetModel {\r\n  defaults() {\r\n    return {\r\n      ...super.defaults(),\r\n      _model_name: 'GLModel',\r\n      _model_module: MODULE_NAME,\r\n      _model_module_version: MODULE_VERSION,\r\n      _view_name: 'GLViewer',\r\n      _view_module: MODULE_NAME,\r\n      _view_module_version: MODULE_VERSION,\r\n      shader_matrix_major:'row_major',\r\n      width:700,\r\n      height:500,\r\n      camera_pos:[0,50,200],\r\n      camera_yaw:0,\r\n      camera_pitch:0,\r\n      mouse_speed:1,\r\n      move_speed:1,\r\n      move_keys:'wasd',\r\n    };\r\n  }\r\n\r\n  static serializers: ISerializers = {\r\n    ...DOMWidgetModel.serializers,\r\n  };\r\n\r\n  initialize(attributes: any, options: any) {\r\n    super.initialize(attributes, options);\r\n\r\n    this.canvas = document.createElement('canvas');\r\n    this.ctx = this.canvas.getContext(\"webgl2\", {preserveDrawingBuffer: true});\r\n    if (this.ctx == null){\r\n      console.error('could not create a webgl2 context, this is not supported in your browser');\r\n    }\r\n    else{\r\n      const gl:WebGL2RenderingContext = this.ctx;\r\n      this.view_block = gl.createBuffer();\r\n      gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n      gl.bufferData(gl.UNIFORM_BUFFER, 256, gl.DYNAMIC_DRAW);\r\n      gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n      gl.bindBufferBase(gl.UNIFORM_BUFFER, 0, this.view_block);\r\n\r\n      //extensions to activate\r\n      gl.getExtension(\"EXT_color_buffer_float\")\r\n    }\r\n\r\n    this.resizeCanvas();\r\n    this.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n    this.on_some_change(['camera_pos', 'camera_yaw', 'camera_pitch'], this.run_commands, this);\r\n\r\n    this.on('msg:custom', this.handle_custom_messages, this);\r\n\r\n    this.camera_matrix = m4Translation(0,50,200);\r\n    this.view_matrix = m4inverse(this.camera_matrix);\r\n  }\r\n\r\n  resizeCanvas() {\r\n    this.canvas.setAttribute('width', this.get('width'));\r\n    this.canvas.setAttribute('height', this.get('height'));\r\n    if (this.ctx != null){\r\n      this.ctx.viewport(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n    }\r\n    this.projection_matrix = m4ProjectionMatrix(50.0, this.get('width')/this.get('height'), 1.0, 5000.0);\r\n  }\r\n\r\n  handle_custom_messages(command: any, buffers:any) {\r\n    if(command.clear == true){\r\n      this.commands = [];\r\n      this.buffers = [];\r\n    }\r\n    let commands = command.commands;\r\n    let converted_buffers:any[] = [];\r\n    commands.forEach((element:any)=>{\r\n      if (element.hasOwnProperty('buffer_metadata')) {\r\n        const converted = buffer_to_array(element.buffer_metadata.dtype, buffers[element.buffer_metadata.index].buffer);\r\n        converted_buffers.push(converted);\r\n      }\r\n    });\r\n\r\n    if(command.only_once == true){\r\n      this.execute_commands(commands, converted_buffers);\r\n    }\r\n    else{\r\n      let buffer_id_offset = this.buffers.length;\r\n      this.buffers = this.buffers.concat(converted_buffers);\r\n      commands.forEach((element:any)=>{\r\n        if (element.hasOwnProperty('buffer_metadata')) {\r\n          element.buffer_metadata.index += buffer_id_offset;\r\n        }\r\n      });\r\n      this.commands = this.commands.concat(commands);\r\n    }\r\n\r\n    this.run_commands();\r\n  }\r\n\r\n  private update_camera(){\r\n    let pos = this.get('camera_pos');\r\n    let yaw = this.get('camera_yaw') * Math.PI / 180.0;\r\n    let pitch = this.get('camera_pitch') * Math.PI / 180.0;\r\n    this.camera_matrix = m4Translation(pos[0], pos[1], pos[2]);\r\n    this.camera_matrix = m4dot(this.camera_matrix, m4Yrotation(yaw));\r\n    this.camera_matrix = m4dot(this.camera_matrix, m4Xrotation(pitch));\r\n    this.view_matrix = m4inverse(this.camera_matrix);\r\n    this.view_proj_matrix = m4dot(this.projection_matrix, this.view_matrix);\r\n  }\r\n\r\n  run_commands(){\r\n    this.execute_commands(this.commands, this.buffers);\r\n  }\r\n\r\n  execute_commands(commands:any[], converted_buffers:any[]){\r\n    if (this.ctx == null) return;\r\n    const gl:WebGL2RenderingContext = this.ctx;\r\n\r\n    this.update_camera();\r\n\r\n    // update the uniform Block\r\n    let cm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.camera_matrix): this.camera_matrix;\r\n    const cm_f32 = new Float32Array(cm);\r\n    let vm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.view_matrix): this.view_matrix;\r\n    const vm_f32 = new Float32Array(vm);\r\n    let pm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.projection_matrix): this.projection_matrix;\r\n    const pm_f32 = new Float32Array(pm);\r\n    let vpm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.view_proj_matrix): this.view_proj_matrix;\r\n    const vpm_f32 = new Float32Array(vpm);\r\n\r\n    gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 0, cm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 64, vm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 128, pm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 192, vpm_f32, 0);\r\n    gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n\r\n    commands.forEach((command:any)=>{\r\n      this.execute_command(gl, command, converted_buffers);\r\n    });\r\n  }\r\n\r\n  glEnumToString(gl:WebGL2RenderingContext, value:any) {\r\n    const keys = [];\r\n    for (const key in gl) {\r\n      if ((gl as any)[key] === value) {\r\n        keys.push(key);\r\n      }\r\n    }\r\n    return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;\r\n  }\r\n\r\n  execute_command(gl:WebGL2RenderingContext, command:any, converted_buffers:any[]){\r\n    console.log(command);\r\n    //console.log(this.bound_buffers);\r\n    switch(command.cmd){\r\n      case 'viewport':\r\n          gl.viewport(command.x, command.y, command.width, command.height);\r\n        break;\r\n      case 'enable':\r\n      case 'disable':\r\n        {\r\n          let cap = 0;\r\n          if (command.blend) cap |= gl.BLEND;\r\n          if (command.depth_test) cap |= gl.DEPTH_TEST;\r\n          if (command.dither) cap |= gl.DITHER;\r\n          if (command.polygon_offset_fill) cap |= gl.POLYGON_OFFSET_FILL;\r\n          if (command.sample_alpha_to_coverage) cap |= gl.SAMPLE_ALPHA_TO_COVERAGE;\r\n          if (command.sample_coverage) cap |= gl.SAMPLE_COVERAGE;\r\n          if (command.scissor_test) cap |= gl.SCISSOR_TEST;\r\n          if (command.stencil_test) cap |= gl.STENCIL_TEST;\r\n          if (command.rasterizer_discard) cap |= gl.RASTERIZER_DISCARD;\r\n          if (command.cull_face) cap |= gl.CULL_FACE;\r\n          if (command.cmd == 'enable'){\r\n            gl.enable(cap);\r\n          } else{\r\n            gl.disable(cap);\r\n          }\r\n        }\r\n        break;\r\n      case 'clearColor':\r\n          gl.clearColor(command.r, command.g, command.b, command.a);\r\n        break;\r\n      case 'clear':{\r\n        let bits = 0;\r\n        if (command.depth) bits |= gl.DEPTH_BUFFER_BIT;\r\n        if (command.color) bits |= gl.COLOR_BUFFER_BIT;\r\n        if (command.stencil) bits |= gl.STENCIL_BUFFER_BIT;\r\n        gl.clear(bits);\r\n      }\r\n      break;\r\n      case 'frontFace':{\r\n        gl.frontFace((gl as any)[command.mode]);\r\n      }\r\n      break;\r\n      case 'cullFace':{\r\n        gl.cullFace((gl as any)[command.mode]);\r\n      }\r\n      break;\r\n\r\n      // ------------------------------- DEPTH --------------------------------------\r\n      case 'depthFunc':{\r\n        gl.depthFunc((gl as any)[command.func]);\r\n      }\r\n      break;\r\n      case 'depthMask':{\r\n        gl.depthMask(command.flag);\r\n      }\r\n      break;\r\n      case 'depthRange':{\r\n        gl.depthRange(command.z_near, command.z_far);\r\n      }\r\n      break;\r\n\r\n      // ------------------------------- COLOR --------------------------------------\r\n      case 'blendColor':\r\n          gl.blendColor(command.r, command.g, command.b, command.a);\r\n        break;\r\n      case 'blendEquation':\r\n        gl.blendEquation((gl as any)[command.mode]);\r\n        break;\r\n      case 'blendEquationSeparate':\r\n          gl.blendEquationSeparate((gl as any)[command.mode_rgb], (gl as any)[command.mode_alpha]);\r\n          break;\r\n      case 'blendFunc':\r\n          gl.blendFunc((gl as any)[command.s_factor], (gl as any)[command.d_factor])\r\n      break;\r\n      case 'blend_func_separate':\r\n         gl.blendFuncSeparate((gl as any)[command.src_rgb], (gl as any)[command.dst_rgb], (gl as any)[command.src_alpha], (gl as any)[command.dst_alpha])\r\n        break;\r\n        \r\n      // ------------------------------- TEXTURE --------------------------------------\r\n      case 'createTexture':{\r\n        let res = this.get_resource(command.resource);\r\n        const ptr = gl.createTexture();\r\n        res.set('_gl_ptr', ptr);\r\n        res.set('_info', {type:'texture'});\r\n        res.save_changes();\r\n      }\r\n      break;\r\n      case 'bindTexture':{\r\n        if (command.texture > -1){\r\n          const texture = this.get_resource(command.texture).get('_gl_ptr');\r\n          gl.bindTexture((gl as any)[command.target], texture);\r\n        }\r\n        else{\r\n          gl.bindTexture((gl as any)[command.target], null);\r\n        }\r\n      }\r\n      break;\r\n      case 'activeTexture':\r\n        gl.activeTexture(gl.TEXTURE0 + command.texture);\r\n      break;\r\n      case 'generateMipmap':\r\n        gl.generateMipmap((gl as any)[command.target]);\r\n      break;\r\n      case 'texImage2D':\r\n        if (command.hasOwnProperty('buffer_metadata')){\r\n          gl.texImage2D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            converted_buffers[command.buffer_metadata.index]\r\n          )\r\n        }\r\n        else{\r\n          gl.texImage2D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            null\r\n          )\r\n        }\r\n      break;\r\n      case 'texStorage2D':{\r\n        gl.texStorage2D(\r\n          (gl as any)[command.target],\r\n          command.levels,\r\n          (gl as any)[command.internal_format],\r\n          command.width,\r\n          command.height\r\n        );\r\n      }\r\n      break;\r\n      case 'texImage3D':\r\n        if (command.hasOwnProperty('buffer_metadata')){\r\n          gl.texImage3D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.depth,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            converted_buffers[command.buffer_metadata.index]\r\n          )\r\n        }else{\r\n          gl.texImage3D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.depth,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            null\r\n          )\r\n        }\r\n      break;\r\n      case 'texStorage3D':{\r\n        gl.texStorage3D(\r\n          (gl as any)[command.target],\r\n          command.levels,\r\n          (gl as any)[command.internal_format],\r\n          command.width,\r\n          command.height,\r\n          command.depth\r\n        );\r\n      }\r\n      break;\r\n      case 'texParameteri':\r\n        gl.texParameteri((gl as any)[command.target], (gl as any)[command.pname], command.param);\r\n      break;\r\n      case 'texParameterf':\r\n        gl.texParameterf((gl as any)[command.target], (gl as any)[command.pname], command.param);\r\n      break;\r\n      case 'texParameter_str':\r\n        gl.texParameteri((gl as any)[command.target], (gl as any)[command.pname], (gl as any)[command.param]);\r\n      break;\r\n      case 'pixelStorei':{\r\n        if (command.pname == 'UNPACK_COLORSPACE_CONVERSION_WEBGL'){\r\n          gl.pixelStorei((gl as any)[command.pname], (gl as any)[command.param]);\r\n        }\r\n        else{\r\n          gl.pixelStorei((gl as any)[command.pname], command.param);\r\n        }\r\n      }\r\n      break;\r\n      // ------------------------------- SHADERS --------------------------------------\r\n      case 'createShader':{\r\n        let res = this.get_resource(command.resource);\r\n        const ptr = gl.createShader((gl as any)[command.type]);\r\n        res.set('_gl_ptr', ptr);\r\n        res.set('_info', {type:command.type});\r\n        res.save_changes();\r\n      }\r\n      break;\r\n      case 'shaderSource':{\r\n        const res = this.get_resource(command.shader);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.shaderSource(ptr, command.source);\r\n        }\r\n        break;\r\n      case 'compileShader':{\r\n          const res = this.get_resource(command.shader);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.compileShader(ptr);\r\n          let resinfo = res.get('_info');\r\n\r\n          if ( !gl.getShaderParameter(ptr, gl.COMPILE_STATUS) ) {\r\n            let info = gl.getShaderInfoLog( ptr );\r\n            resinfo.message = info;\r\n          }\r\n          else{\r\n            resinfo.message = 'compiled';\r\n          }\r\n          res.set('_info', resinfo);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      // ------------------------------- PROGRAMS --------------------------------------\r\n      case 'createProgram':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createProgram();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Program'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'attachShader':{\r\n          const prog = this.get_resource(command.program).get('_gl_ptr');\r\n          const shader = this.get_resource(command.shader).get('_gl_ptr');\r\n          gl.attachShader(prog, shader);\r\n        }\r\n        break;\r\n      case 'bindAttribLocation':{\r\n          let res = this.get_resource(command.program);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.bindAttribLocation(ptr, command.index, command.name);\r\n        }\r\n        break;\r\n      case 'linkProgram':{\r\n          let res = this.get_resource(command.program);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.linkProgram(ptr);\r\n          gl.validateProgram(ptr);\r\n          let resinfo = res.get('_info');\r\n\r\n          if ( !gl.getProgramParameter( ptr, gl.LINK_STATUS) ) {\r\n            let info = gl.getShaderInfoLog( ptr );\r\n            resinfo.message = info;\r\n          }\r\n          else{\r\n            //bind our viewBlock\r\n            let viewBlockIndex = gl.getUniformBlockIndex(ptr, 'ViewBlock');\r\n            if (viewBlockIndex < 4294967295){\r\n              gl.uniformBlockBinding(ptr, viewBlockIndex, 0);\r\n            }\r\n            resinfo.message = 'linked';\r\n            resinfo.uniforms_blocks = [];\r\n            resinfo.uniforms = [];\r\n            const numUniforms = gl.getProgramParameter(ptr, gl.ACTIVE_UNIFORMS);\r\n            const indices = [...Array(numUniforms).keys()];\r\n            const blockIndices = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_BLOCK_INDEX);\r\n            const offsets = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_OFFSET);\r\n            for (let i = 0; i < numUniforms; ++i) {\r\n              const info = gl.getActiveUniform(ptr, i);\r\n              if (info){\r\n                // regroup the blocks\r\n                if (blockIndices[i]>-1){\r\n                  let uniform_block = resinfo.uniforms_blocks.find((element:any)=>{return element.index == blockIndices[i]});\r\n                  if (uniform_block == undefined){\r\n                    uniform_block = {\r\n                      index:blockIndices[i], \r\n                      name:gl.getActiveUniformBlockName(ptr, blockIndices[i]), \r\n                      size:gl.getActiveUniformBlockParameter(ptr, blockIndices[i], gl.UNIFORM_BLOCK_DATA_SIZE),\r\n                      uniforms:[]};\r\n                    resinfo.uniforms_blocks.push(uniform_block);\r\n                  }\r\n                  uniform_block.uniforms.push(\r\n                    {name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, offset:offsets[i]}\r\n                  )\r\n                }\r\n                else{\r\n                  resinfo.uniforms.push({name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, location:gl.getUniformLocation(ptr, info.name)});\r\n                }\r\n              }\r\n            }\r\n            resinfo.attributes = [];\r\n            const numAttribute = gl.getProgramParameter(ptr, gl.ACTIVE_ATTRIBUTES);\r\n            for (let i = 0; i < numAttribute; ++i) {\r\n              const info = gl.getActiveAttrib(ptr, i);\r\n              if (info)\r\n                resinfo.attributes.push({name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, location:gl.getAttribLocation(ptr, info.name)});\r\n            }\r\n          }\r\n          res.set('_info', resinfo);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'useProgram':{\r\n          if(command.program >= 0){\r\n            const res = this.get_resource(command.program);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.useProgram(ptr);\r\n            this.bound_program = res;\r\n          } else {\r\n            gl.useProgram(null);\r\n            this.bound_program = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'uniform':\r\n      case 'uniformMatrix':\r\n        {\r\n          if(this.bound_program != null){\r\n            let resinfo = this.bound_program.get('_info');\r\n            const uniform = resinfo.uniforms.find((element:any)=>{return element.name == command.name});\r\n            if (uniform != undefined){\r\n              const location = uniform.location;\r\n\r\n              if (command.cmd == 'uniform'){\r\n                let shape = command.buffer_metadata.shape[command.buffer_metadata.shape.length-1];\r\n                if (command.buffer_metadata.dtype == 'int32'){\r\n                  let bufarray:Int32Array = converted_buffers[command.buffer_metadata.index] as Int32Array;\r\n                  if (shape == 1) gl.uniform1iv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2iv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3iv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4iv(location, bufarray);\r\n                }\r\n                else if (command.buffer_metadata.dtype == 'uint32'){\r\n                  let bufarray:Uint32Array = converted_buffers[command.buffer_metadata.index] as Uint32Array;\r\n                  if (shape == 1) gl.uniform1uiv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2uiv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3uiv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4uiv(location, bufarray);\r\n                }\r\n                else if (command.buffer_metadata.dtype == 'float32'){\r\n                  let bufarray:Float32Array = converted_buffers[command.buffer_metadata.index] as Float32Array;\r\n                  if (shape == 1) gl.uniform1fv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2fv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3fv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4fv(location, bufarray);\r\n                }\r\n              }\r\n\r\n              else {\r\n                let a = command.buffer_metadata.shape[command.buffer_metadata.shape.length-2];\r\n                let b = command.buffer_metadata.shape[command.buffer_metadata.shape.length-1];\r\n                let bufarray:Float32Array = converted_buffers[command.buffer_metadata.index] as Float32Array;\r\n                if (a==2)\r\n                {\r\n                  if (b==2) gl.uniformMatrix2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix2x3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix2x4fv(location, false, bufarray);\r\n                }\r\n                else if (a==3)\r\n                {\r\n                  if (b==2) gl.uniformMatrix3x2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix3x4fv(location, false, bufarray);\r\n                }\r\n                else if (a==4)\r\n                {\r\n                  if (b==2) gl.uniformMatrix4x2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix4x3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix4fv(location, false, bufarray);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      break;\r\n      case 'uniformBlockBinding':{\r\n        let res = this.get_resource(command.program);\r\n        const ptr = res.get('_gl_ptr');\r\n        const uniformblock = res.get('_info').uniforms_blocks.find((element:any)=>{return element.name == command.uniform_block_name});\r\n        if (uniformblock != undefined){\r\n          gl.uniformBlockBinding(ptr, uniformblock.index, command.uniform_block_binding);\r\n        }\r\n      }\r\n      break;\r\n      // ------------------------------- BUFFERS --------------------------------------\r\n      case 'createBuffer':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createBuffer();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Buffer'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bindBuffer':{\r\n          const target:string = command.target;\r\n          if(command.buffer >= 0){\r\n            const res = this.get_resource(command.buffer);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindBuffer((gl as any)[target], ptr);\r\n            (this.bound_buffers as any)[target] = res;\r\n          } else {\r\n            gl.bindBuffer((gl as any)[target], null);\r\n            (this.bound_buffers as any)[target]  = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'bindBufferBase':{\r\n          const target:string = command.target;\r\n          if(command.buffer >= 0){\r\n            const res = this.get_resource(command.buffer);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindBufferBase((gl as any)[target], command.index, ptr);\r\n          } else {\r\n            gl.bindBufferBase((gl as any)[target], command.index, null);\r\n          }\r\n        }\r\n        break;\r\n      case 'bufferData':{\r\n          const target:string = command.target;\r\n          const usage:string = command.usage;\r\n\r\n          if (command.hasOwnProperty('buffer_metadata')){\r\n            gl.bufferData((gl as any)[target], converted_buffers[command.buffer_metadata.index], (gl as any)[usage]);\r\n\r\n            let buf = (this.bound_buffers as any)[target];\r\n            if (command.update_info && buf != null){\r\n              const size = gl.getBufferParameter((gl as any)[target], gl.BUFFER_SIZE);\r\n              buf.set('_info', {type:\"Buffer\", size:size, target:target});\r\n              buf.save_changes();\r\n            }\r\n          }\r\n          else{\r\n            let buf = (this.bound_buffers as any)[target];\r\n            gl.bufferData((gl as any)[target], null, (gl as any)[usage]);\r\n            if (command.update_info && buf != null){\r\n              buf.set('_info', {type:\"Buffer\", size:'Undefined', target:target});\r\n              buf.save_changes();\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      case 'createUniformBuffer':{\r\n          let res = this.get_resource(command.buffer);\r\n          const ptr = gl.createBuffer();\r\n\r\n          let info = {type:'Buffer'};\r\n          const prog = this.get_resource(command.program);\r\n          const uniformblock = prog.get('_info').uniforms_blocks.find((element:any)=>{return element.name == command.block_name});\r\n          if (uniformblock != undefined){\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, ptr);\r\n            gl.bufferData(gl.UNIFORM_BUFFER, uniformblock.size, (gl as any)[command.usage]);\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n            (this.bound_buffers as any)[\"UNIFORM_BUFFER\"] = null;\r\n            (info as any)[\"size\"] = uniformblock.size;\r\n            (info as any)[\"target\"] = \"UNIFORM_BUFFER\";\r\n            (info as any)[\"uniformblock\"] = uniformblock;\r\n          }\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', info);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bufferSubData':\r\n      case 'bufferSubDataStr':{\r\n          const target:string = command.target;\r\n          let offset = command.dst_byte_offset;\r\n          if (command.cmd == 'bufferSubDataStr'){\r\n            offset = 0;\r\n            let buf = (this.bound_buffers as any)[target];\r\n            if (buf != null){\r\n              const uniformblock = buf.get('_info').uniformblock;\r\n              const uniform = uniformblock.uniforms.find((element:any)=>{return element.name == command.dst_byte_offset});\r\n              if (uniform != undefined){\r\n                offset = uniform.offset;\r\n              }\r\n            }\r\n          }\r\n          if (command.hasOwnProperty('buffer_metadata')){\r\n            gl.bufferSubData((gl as any)[target], offset, converted_buffers[command.buffer_metadata.index], command.src_offset);\r\n\r\n          }\r\n          else{\r\n            gl.bufferSubData((gl as any)[target], offset, command.src_offset);\r\n          }\r\n        }\r\n        break;\r\n      // ------------------------------- VERTEX ARRAYS --------------------------------------\r\n      case 'createVertexArray':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createVertexArray();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Vertex Array Object', bindings:[]});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bindVertexArray':{\r\n          if(command.vertex_array >= 0){\r\n            const res = this.get_resource(command.vertex_array);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindVertexArray(ptr);\r\n            this.bound_vao = res;\r\n          } else {\r\n            gl.bindVertexArray(null);\r\n            this.bound_vao = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'vertexAttribPointer':\r\n      case 'vertexAttribIPointer':\r\n      case 'enableVertexAttribArray':\r\n      case 'disableVertexAttribArray':\r\n      case 'vertexAttrib[1234]fv':\r\n      case 'vertexAttribI4[u]iv':\r\n      case 'vertexAttribDivisor':\r\n        {\r\n          let index = -1;\r\n          if (typeof command.index === 'number'){\r\n            index = command.index;\r\n          }\r\n          else{\r\n            if (this.bound_program != null){\r\n              const attr = this.bound_program.get('_info').attributes.find((element:any)=>{return element.name == command.index});\r\n              if (attr != undefined){\r\n                index = attr.location;\r\n              }\r\n            }else{\r\n              console.error(\"a program must be bound to find the attribute\");\r\n            }\r\n          }\r\n          let buf = (this.bound_buffers as any)['ARRAY_BUFFER'];\r\n          if (index >= 0){\r\n            index += command.index_offset\r\n            if (command.cmd == \"vertexAttribIPointer\"){\r\n              gl.vertexAttribIPointer(index, command.size, (gl as any)[command.type], command.stride, command.offset);\r\n              if (this.bound_vao != null && buf != null){\r\n                let vao_info = this.bound_vao.get('_info');\r\n                const buffer_uid = buf.get('uid');\r\n                let binding_info = vao_info.bindings.find((element:any)=>{return element.buffer_uid == buffer_uid});\r\n                if (binding_info == undefined){\r\n                  binding_info = {buffer_uid : buffer_uid, attributes : []};\r\n                  vao_info.bindings.push(binding_info);\r\n                }\r\n                binding_info.attributes.push({pointer:\"vertexAttribIPointer\", index:index, size:command.size, type:command.type, stride:command.stride, offset:command.offset})\r\n                this.bound_vao.set('_info', vao_info);\r\n                this.bound_vao.save_changes();\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribPointer\"){\r\n              gl.vertexAttribPointer(index, command.size, (gl as any)[command.type], command.normalized, command.stride, command.offset);\r\n              if (this.bound_vao != null && buf != null){\r\n                let vao_info = this.bound_vao.get('_info');\r\n                const buffer_uid = buf.get('uid');\r\n                let binding_info = vao_info.bindings.find((element:any)=>{return element.buffer_uid == buffer_uid});\r\n                if (binding_info == undefined){\r\n                  binding_info = {buffer_uid : buffer_uid, attributes : []};\r\n                  vao_info.bindings.push(binding_info);\r\n                }\r\n                binding_info.attributes.push({pointer:\"vertexAttribPointer\", index:index, size:command.size, type:command.type, normalized:command.normalized, stride:command.stride, offset:command.offset})\r\n                this.bound_vao.set('_info', vao_info);\r\n                this.bound_vao.save_changes();\r\n              }\r\n            }\r\n            else if (command.cmd == \"enableVertexAttribArray\"){\r\n              gl.enableVertexAttribArray(index);\r\n            }\r\n            else if (command.cmd == \"disableVertexAttribArray\"){\r\n              gl.disableVertexAttribArray(index);\r\n            }\r\n            else if (command.cmd == \"vertexAttrib[1234]fv\"){\r\n              if (command.buffer_metadata.shape[0] == 1){\r\n                gl.vertexAttrib1fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } else if (command.buffer_metadata.shape[0] == 2){\r\n                gl.vertexAttrib2fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } if (command.buffer_metadata.shape[0] == 3){\r\n                gl.vertexAttrib3fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }if (command.buffer_metadata.shape[0] == 4){\r\n                gl.vertexAttrib4fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribI4[u]iv\"){\r\n              if(command.buffer_metadata.dtype == \"uint32\"){\r\n                gl.vertexAttribI4uiv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } else if(command.buffer_metadata.dtype == \"int32\"){\r\n                gl.vertexAttribI4iv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribDivisor\"){\r\n              gl.vertexAttribDivisor(index, command.divisor);\r\n            }\r\n          }\r\n          else{\r\n            console.error(`attribute ${command.index} location not found`);\r\n          }\r\n        }\r\n        break;\r\n\r\n        // ------------------------------- RENDER --------------------------------------\r\n        case 'drawArrays':{\r\n          gl.drawArrays((gl as any)[command.mode], command.first, command.count);\r\n        }\r\n        break;\r\n        case 'drawArraysInstanced':{\r\n          gl.drawArraysInstanced((gl as any)[command.mode], command.first, command.count, command.instance_count);\r\n        }\r\n        break;\r\n        case 'drawElements':{\r\n          gl.drawElements((gl as any)[command.mode], command.count, (gl as any)[command.type], command.offset);\r\n        }\r\n        break;\r\n        case 'drawElementsInstanced':{\r\n          gl.drawElementsInstanced((gl as any)[command.mode], command.count, (gl as any)[command.type], command.offset, command.instance_count);\r\n        }\r\n        break;\r\n\r\n        // ------------------------------- FRAMEBUFFER --------------------------------------\r\n        case 'createFramebuffer':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createFramebuffer();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Framebuffer'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n        case 'bindFramebuffer':{\r\n          if (command.framebuffer >= 0){\r\n            let res = this.get_resource(command.framebuffer);\r\n            gl.bindFramebuffer((gl as any)[command.target], res.get('_gl_ptr'));\r\n          }\r\n          else{\r\n            gl.bindFramebuffer((gl as any)[command.target], null);\r\n          }\r\n        }\r\n        break;\r\n        case 'framebufferTexture2D':{\r\n          let res = this.get_resource(command.texture);\r\n          gl.framebufferTexture2D((gl as any)[command.target], (gl as any)[command.attachement], (gl as any)[command.textarget], res.get('_gl_ptr'), command.level);\r\n        }\r\n        break;\r\n        case 'drawBuffers' :{\r\n          const buffers = command.buffers.map((element:any)=>{return (gl as any)[element]; });\r\n          gl.drawBuffers(buffers);\r\n        }\r\n        break;\r\n        \r\n    }\r\n  }\r\n\r\n  register_resource(resource:GLResource){\r\n    if(resource.get('uid') != this.resources.length){\r\n      console.error('uid not matching what we have internally');\r\n    }\r\n    this.resources.push(resource);\r\n  }\r\n\r\n  get_resource(index:number){\r\n    return this.resources[index];\r\n  }\r\n\r\n  canvas: HTMLCanvasElement;\r\n  ctx: WebGL2RenderingContext | null;\r\n  view_block: WebGLBuffer | null;\r\n\r\n  resources : GLResource[] = [];\r\n  bound_program: GLResource | null;\r\n  bound_buffers = {};\r\n  bound_vao: GLResource | null;\r\n  commands : any[] = [];\r\n  buffers : any[] = [];\r\n\r\n  projection_matrix:number[];\r\n  camera_matrix:number[];\r\n  view_matrix:number[];\r\n  view_proj_matrix:number[];\r\n}\r\n\r\nexport class GLViewer extends DOMWidgetView {\r\n\r\n  render() {\r\n    this.el.appendChild(this.model.canvas);\r\n\r\n    this.resizeCanvas();\r\n    this.model.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n\r\n    this.el.addEventListener('mousemove', {\r\n      handleEvent: this.onMouseMove.bind(this)\r\n    });\r\n    this.el.addEventListener('mousedown', {\r\n      handleEvent: this.onMouseDown.bind(this)\r\n    });\r\n    this.el.addEventListener('mouseup', {\r\n      handleEvent: this.onMouseUp.bind(this)\r\n    });\r\n    this.el.addEventListener('mouseout', {\r\n      handleEvent: this.onMouseOut.bind(this)\r\n    });\r\n    this.el.addEventListener('keydown', {\r\n      handleEvent: this.onKeyDown.bind(this)\r\n    });\r\n    this.el.addEventListener('keyup', {\r\n      handleEvent: this.onKeyUp.bind(this)\r\n    });\r\n    this.el.setAttribute('tabindex', '0');\r\n  }\r\n \r\n  private resizeCanvas() {\r\n    this.el.setAttribute('width', this.model.get('width'));\r\n    this.el.setAttribute('height', this.model.get('height'));\r\n    this.model.resizeCanvas();\r\n  }\r\n\r\n  private redraw(){\r\n    this.will_redraw = false;\r\n\r\n    // update movement if needed\r\n    if (this.move_direction[0] || this.move_direction[1] || this.move_direction[2] || this.move_direction[3])\r\n    {\r\n      let speed = this.model.get('move_speed');\r\n      let forward_axis = m4getColumnK(this.model.camera_matrix);\r\n      let side_axis = m4getColumnI(this.model.camera_matrix);\r\n      let camera_pos = this.model.get('camera_pos');\r\n      if (this.move_direction[0]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(forward_axis, -speed));\r\n      }\r\n      if (this.move_direction[2]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(forward_axis, speed));\r\n      }\r\n      if (this.move_direction[1]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(side_axis, -speed));\r\n      }\r\n      if (this.move_direction[3]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(side_axis, speed));\r\n      }\r\n      this.model.set('camera_pos', camera_pos);\r\n      this.touch();\r\n      // request a new frame if we are moving\r\n      this.requestRedraw();\r\n    }\r\n\r\n    // re draw\r\n    this.model.run_commands();\r\n  }\r\n\r\n  private requestRedraw(){\r\n    if (this.will_redraw == false){\r\n      this.will_redraw = true;\r\n      requestAnimationFrame(this.redraw.bind(this));\r\n    }\r\n  }\r\n\r\n  private onMouseMove(event: MouseEvent) {\r\n    //this.model.send({ event: 'mouse_move', ...this.getCoordinates(event) }, {});\r\n    if(this.is_mouse_down){\r\n      let speed = this.model.get('mouse_speed');\r\n      this.model.set('camera_yaw', this.model.get('camera_yaw')-(event.movementX)*0.2*speed);\r\n      this.model.set('camera_pitch', this.model.get('camera_pitch')-(event.movementY)*0.2*speed);\r\n      this.touch();\r\n      this.requestRedraw();\r\n    }\r\n  }\r\n\r\n  private onMouseDown(event: MouseEvent) {\r\n    this.is_mouse_down = true;\r\n    this.model.canvas.focus();\r\n  }\r\n\r\n  private onMouseUp(event: MouseEvent) {\r\n    this.is_mouse_down = false;\r\n  }\r\n\r\n  private onMouseOut(event: MouseEvent) {\r\n    this.is_mouse_down = false;\r\n    this.move_direction = [false, false, false, false];\r\n  }\r\n\r\n  private onKeyDown(event: KeyboardEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    let keys = this.model.get('move_keys');\r\n\r\n    if(event.repeat == false){\r\n      if(event.key == keys[0]){\r\n        this.move_direction[0] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[1]){\r\n        this.move_direction[1] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[2]){\r\n        this.move_direction[2] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[3]){\r\n        this.move_direction[3] = true;\r\n        this.requestRedraw();\r\n      }\r\n    }\r\n  }\r\n\r\n  private onKeyUp(event: KeyboardEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    let keys = this.model.get('move_keys');\r\n\r\n    if(event.key == keys[0]){\r\n      this.move_direction[0] = false;\r\n    }\r\n    else if(event.key == keys[1]){\r\n      this.move_direction[1] = false;\r\n    }\r\n    else if(event.key == keys[2]){\r\n      this.move_direction[2] = false;\r\n    }\r\n    else if(event.key == keys[3]){\r\n      this.move_direction[3] = false;\r\n    }\r\n  }\r\n\r\n  protected getCoordinates(event: MouseEvent | Touch) {\r\n    const rect = this.el.getBoundingClientRect();\r\n\r\n    const x = (this.model.get('width') * (event.clientX - rect.left)) / rect.width;\r\n    const y = (this.model.get('height') * (event.clientY - rect.top)) / rect.height;\r\n\r\n    return { x, y };\r\n  }\r\n\r\n  model : GLModel;\r\n  is_mouse_down : boolean = false;\r\n  move_direction : boolean[] = [false, false, false, false];\r\n  will_redraw = false;\r\n}\r\n",
         "// Copyright (c) Jerome Eippers\r\n// Distributed under the terms of the Modified BSD License.\r\n\r\nexport * from './version';\r\nexport * from './widgets';\r\n",
         "export function m4ProjectionMatrix(fov_y: number, aspect_ratio: number, near: number, far: number){\r\n    const ymax = near * Math.tan(fov_y * Math.PI / 360.0)\r\n    const xmax = ymax * aspect_ratio\r\n\r\n    return frustrum(-xmax, xmax, -ymax, ymax, near, far)\r\n}\r\n\r\nfunction frustrum(left: number, right: number, bottom: number, top: number, near: number, far: number) {\r\n    const A = (right + left) / (right - left)\r\n    const B = (top + bottom) / (top - bottom)\r\n    const C = -(far + near) / (far - near)\r\n    const D = -2. * far * near / (far - near)\r\n    const E = 2. * near / (right - left)\r\n    const F = 2. * near / (top - bottom)\r\n\r\n    return [\r\n        E, 0, A, 0,\r\n        0, F, B, 0,\r\n        0, 0, C, D,\r\n        0, 0, -1, 0\r\n    ]\r\n}\r\n\r\nexport function m4OrthographicProjectionMatrix(width: number, height: number, near: number, far: number) {\r\n    const A = 1. / width;\r\n    const B = 1. / height;\r\n    const C = -(far + near) / (far - near)\r\n    const D = -2. / (far - near)\r\n\r\n    return [\r\n        A, 0, 0, 0,\r\n        0, B, 0, 0,\r\n        0, 0, D, C,\r\n        0, 0, 0, 1\r\n    ]\r\n}\r\n\r\nexport function m4Transpose(m:number[]){\r\n    return [\r\n        m[0], m[4], m[8], m[12],\r\n        m[1], m[5], m[9], m[13],\r\n        m[2], m[6], m[10], m[14],\r\n        m[3], m[7], m[11], m[15],\r\n    ];\r\n}\r\n\r\nexport function m4getTranslation(m:number[]){\r\n    return [\r\n        m[3], m[7], m[11]\r\n    ];\r\n}\r\n\r\nexport function m4getColumnI(m:number[]){\r\n    return [\r\n        m[0], m[4], m[8]\r\n    ];\r\n}\r\n\r\nexport function m4getColumnJ(m:number[]){\r\n    return [\r\n        m[1], m[5], m[9]\r\n    ];\r\n}\r\n\r\nexport function m4getColumnK(m:number[]){\r\n    return [\r\n        m[2], m[6], m[10]\r\n    ];\r\n}\r\n\r\nexport function vec3Add(a:number[], b:number[]){\r\n    return[\r\n        a[0] + b[0],\r\n        a[1] + b[1],\r\n        a[2] + b[2]\r\n    ]\r\n}\r\n\r\nexport function vec3Scale(a:number[], scale:number){\r\n    return[\r\n        a[0] * scale,\r\n        a[1] * scale,\r\n        a[2] * scale\r\n    ]\r\n}\r\n\r\nexport function m4Translation(tx:number, ty:number, tz:number) {\r\n    return [\r\n        1, 0, 0, tx,\r\n        0, 1, 0, ty,\r\n        0, 0, 1, tz,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\n\r\nexport function m4Xrotation(angleInRadians:number) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [\r\n        1, 0, 0, 0,\r\n        0, c, -s, 0,\r\n        0, s, c, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\n\r\nexport function m4Yrotation(angleInRadians:number) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [\r\n        c, 0, s, 0,\r\n        0, 1, 0, 0,\r\n        -s, 0, c, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\n\r\nexport function m4Zrotation(angleInRadians:number) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [\r\n        c, -s, 0, 0,\r\n        s, c, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\n\r\nexport function m4Scale(sx:number, sy:number, sz:number) {\r\n    return [\r\n        sx, 0,  0,  0,\r\n        0, sy,  0,  0,\r\n        0,  0, sz,  0,\r\n        0,  0,  0,  1,\r\n    ];\r\n}\r\n\r\nexport function m4dot(b:number[], a:number[]) {\r\n    return [\r\n        b[0] * a[0] + b[1] * a[4] + b[2] * a[8] + b[3] * a[12],\r\n        b[0] * a[1] + b[1] * a[5] + b[2] * a[9] + b[3] * a[13],\r\n        b[0] * a[2] + b[1] * a[6] + b[2] * a[10] + b[3] * a[14],\r\n        b[0] * a[3] + b[1] * a[7] + b[2] * a[11] + b[3] * a[15],\r\n        b[4] * a[0] + b[5] * a[4] + b[6] * a[8] + b[7] * a[12],\r\n        b[4] * a[1] + b[5] * a[5] + b[6] * a[9] + b[7] * a[13],\r\n        b[4] * a[2] + b[5] * a[6] + b[6] * a[10] + b[7] * a[14],\r\n        b[4] * a[3] + b[5] * a[7] + b[6] * a[11] + b[7] * a[15],\r\n        b[8] * a[0] + b[9] * a[4] + b[10] * a[8] + b[11] * a[12],\r\n        b[8] * a[1] + b[9] * a[5] + b[10] * a[9] + b[11] * a[13],\r\n        b[8] * a[2] + b[9] * a[6] + b[10] * a[10] + b[11] * a[14],\r\n        b[8] * a[3] + b[9] * a[7] + b[10] * a[11] + b[11] * a[15],\r\n        b[12] * a[0] + b[13] * a[4] + b[14] * a[8] + b[15] * a[12],\r\n        b[12] * a[1] + b[13] * a[5] + b[14] * a[9] + b[15] * a[13],\r\n        b[12] * a[2] + b[13] * a[6] + b[14] * a[10] + b[15] * a[14],\r\n        b[12] * a[3] + b[13] * a[7] + b[14] * a[11] + b[15] * a[15],\r\n    ];\r\n}\r\n\r\nexport function m4inverse(m:number[]) {\r\n    var tmp_0  = m[10] * m[15];\r\n    var tmp_1  = m[14] * m[11];\r\n    var tmp_2  = m[6] * m[15];\r\n    var tmp_3  = m[14] * m[7];\r\n    var tmp_4  = m[6] * m[11];\r\n    var tmp_5  = m[10] * m[7];\r\n    var tmp_6  = m[2] * m[15];\r\n    var tmp_7  = m[14] * m[3];\r\n    var tmp_8  = m[2] * m[11];\r\n    var tmp_9  = m[10] * m[3];\r\n    var tmp_10 = m[2] * m[7];\r\n    var tmp_11 = m[6] * m[3];\r\n    var tmp_12 = m[8] * m[13];\r\n    var tmp_13 = m[12] * m[9];\r\n    var tmp_14 = m[4] * m[13];\r\n    var tmp_15 = m[12] * m[5];\r\n    var tmp_16 = m[4] * m[9];\r\n    var tmp_17 = m[8] * m[5];\r\n    var tmp_18 = m[0] * m[13];\r\n    var tmp_19 = m[12] * m[1];\r\n    var tmp_20 = m[0] * m[9];\r\n    var tmp_21 = m[8] * m[1];\r\n    var tmp_22 = m[0] * m[5];\r\n    var tmp_23 = m[4] * m[1];\r\n\r\n    var t0 = (tmp_0 * m[5] + tmp_3 * m[9] + tmp_4 * m[13]) -\r\n             (tmp_1 * m[5] + tmp_2 * m[9] + tmp_5 * m[13]);\r\n    var t1 = (tmp_1 * m[1] + tmp_6 * m[9] + tmp_9 * m[13]) -\r\n             (tmp_0 * m[1] + tmp_7 * m[9] + tmp_8 * m[13]);\r\n    var t2 = (tmp_2 * m[1] + tmp_7 * m[5] + tmp_10 * m[13]) -\r\n             (tmp_3 * m[1] + tmp_6 * m[5] + tmp_11 * m[13]);\r\n    var t3 = (tmp_5 * m[1] + tmp_8 * m[5] + tmp_11 * m[9]) -\r\n             (tmp_4 * m[1] + tmp_9 * m[5] + tmp_10 * m[9]);\r\n\r\n    var d = 1.0 / (m[0] * t0 + m[4] * t1 + m[8] * t2 + m[12] * t3);\r\n\r\n    return [\r\n      d * t0,\r\n      d * t1,\r\n      d * t2,\r\n      d * t3,\r\n      d * ((tmp_1 * m[4] + tmp_2 * m[8] + tmp_5 * m[12]) -\r\n           (tmp_0 * m[4] + tmp_3 * m[8] + tmp_4 * m[12])),\r\n      d * ((tmp_0 * m[0] + tmp_7 * m[8] + tmp_8 * m[12]) -\r\n           (tmp_1 * m[0] + tmp_6 * m[8] + tmp_9 * m[12])),\r\n      d * ((tmp_3 * m[0] + tmp_6 * m[4] + tmp_11 * m[12]) -\r\n           (tmp_2 * m[0] + tmp_7 * m[4] + tmp_10 * m[12])),\r\n      d * ((tmp_4 * m[0] + tmp_9 * m[4] + tmp_10 * m[8]) -\r\n           (tmp_5 * m[0] + tmp_8 * m[4] + tmp_11 * m[8])),\r\n      d * ((tmp_12 * m[7] + tmp_15 * m[11] + tmp_16 * m[15]) -\r\n           (tmp_13 * m[7] + tmp_14 * m[11] + tmp_17 * m[15])),\r\n      d * ((tmp_13 * m[3] + tmp_18 * m[11] + tmp_21 * m[15]) -\r\n           (tmp_12 * m[3] + tmp_19 * m[11] + tmp_20 * m[15])),\r\n      d * ((tmp_14 * m[3] + tmp_19 * m[7] + tmp_22 * m[15]) -\r\n           (tmp_15 * m[3] + tmp_18 * m[7] + tmp_23 * m[15])),\r\n      d * ((tmp_17 * m[3] + tmp_20 * m[7] + tmp_23 * m[11]) -\r\n           (tmp_16 * m[3] + tmp_21 * m[7] + tmp_22 * m[11])),\r\n      d * ((tmp_14 * m[10] + tmp_17 * m[14] + tmp_13 * m[6]) -\r\n           (tmp_16 * m[14] + tmp_12 * m[6] + tmp_15 * m[10])),\r\n      d * ((tmp_20 * m[14] + tmp_12 * m[2] + tmp_19 * m[10]) -\r\n           (tmp_18 * m[10] + tmp_21 * m[14] + tmp_13 * m[2])),\r\n      d * ((tmp_18 * m[6] + tmp_23 * m[14] + tmp_15 * m[2]) -\r\n           (tmp_22 * m[14] + tmp_14 * m[2] + tmp_19 * m[6])),\r\n      d * ((tmp_22 * m[10] + tmp_16 * m[2] + tmp_21 * m[6]) -\r\n           (tmp_20 * m[6] + tmp_23 * m[10] + tmp_17 * m[2])),\r\n    ];\r\n  }\r\n",
         "// Copyright (c) Jerome Eippers\r\n// Distributed under the terms of the Modified BSD License.\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-ignore\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst data = require('../package.json');\r\n\r\n/**\r\n * The _model_module_version/_view_module_version this package implements.\r\n *\r\n * The html widget manager assumes that this is the same as the npm package\r\n * version number.\r\n */\r\nexport const MODULE_VERSION = data.version;\r\n\r\n/*\r\n * The current package name.\r\n */\r\nexport const MODULE_NAME = data.name;\r\n",
         "export * from './glviewer';\r\nexport * from './glresource';\r\n\r\n",
         "module.exports = __WEBPACK_EXTERNAL_MODULE__146__;",
         "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n",
         "__webpack_require__.nc = undefined;",
```

### Comparing `ipywebgl-0.1.1/src/arraybuffer.ts` & `ipywebgl-0.1.2/src/arraybuffer.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/src/extension.ts` & `ipywebgl-0.1.2/src/extension.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/src/glresource.ts` & `ipywebgl-0.1.2/src/glresource.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/src/glviewer.ts` & `ipywebgl-0.1.2/src/glviewer.ts`

 * *Files 2% similar despite different names*

```diff
@@ -157,15 +157,15 @@
         keys.push(key);
       }
     }
     return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;
   }
 
   execute_command(gl:WebGL2RenderingContext, command:any, converted_buffers:any[]){
-    //console.log(command);
+    console.log(command);
     //console.log(this.bound_buffers);
     switch(command.cmd){
       case 'viewport':
           gl.viewport(command.x, command.y, command.width, command.height);
         break;
       case 'enable':
       case 'disable':
@@ -679,14 +679,15 @@
         break;
       case 'vertexAttribPointer':
       case 'vertexAttribIPointer':
       case 'enableVertexAttribArray':
       case 'disableVertexAttribArray':
       case 'vertexAttrib[1234]fv':
       case 'vertexAttribI4[u]iv':
+      case 'vertexAttribDivisor':
         {
           let index = -1;
           if (typeof command.index === 'number'){
             index = command.index;
           }
           else{
             if (this.bound_program != null){
@@ -696,14 +697,15 @@
               }
             }else{
               console.error("a program must be bound to find the attribute");
             }
           }
           let buf = (this.bound_buffers as any)['ARRAY_BUFFER'];
           if (index >= 0){
+            index += command.index_offset
             if (command.cmd == "vertexAttribIPointer"){
               gl.vertexAttribIPointer(index, command.size, (gl as any)[command.type], command.stride, command.offset);
               if (this.bound_vao != null && buf != null){
                 let vao_info = this.bound_vao.get('_info');
                 const buffer_uid = buf.get('uid');
                 let binding_info = vao_info.bindings.find((element:any)=>{return element.buffer_uid == buffer_uid});
                 if (binding_info == undefined){
@@ -750,14 +752,17 @@
             else if (command.cmd == "vertexAttribI4[u]iv"){
               if(command.buffer_metadata.dtype == "uint32"){
                 gl.vertexAttribI4uiv(index, converted_buffers[command.buffer_metadata.index]);
               } else if(command.buffer_metadata.dtype == "int32"){
                 gl.vertexAttribI4iv(index, converted_buffers[command.buffer_metadata.index]);
               }
             }
+            else if (command.cmd == "vertexAttribDivisor"){
+              gl.vertexAttribDivisor(index, command.divisor);
+            }
           }
           else{
             console.error(`attribute ${command.index} location not found`);
           }
         }
         break;
```

### Comparing `ipywebgl-0.1.1/src/matrix.ts` & `ipywebgl-0.1.2/src/matrix.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/src/plugin.ts` & `ipywebgl-0.1.2/src/plugin.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/src/version.ts` & `ipywebgl-0.1.2/src/version.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/.gitignore` & `ipywebgl-0.1.2/.gitignore`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/LICENSE.txt` & `ipywebgl-0.1.2/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.1.1/pyproject.toml` & `ipywebgl-0.1.2/pyproject.toml`

 * *Files 0% similar despite different names*

```diff
@@ -31,15 +31,15 @@
     "Programming Language :: Python :: 3.9",
     "Programming Language :: Python :: 3.10",
 ]
 dependencies = [
     "ipywidgets>=7.0.0",
     "numpy",
 ]
-version = "0.1.1"
+version = "0.1.2"
 
 [project.optional-dependencies]
 docs = [
     "jupyter_sphinx",
     "nbsphinx",
     "nbsphinx-link",
     "pypandoc",
```

