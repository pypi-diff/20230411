# Comparing `tmp/lofar-h5plot-2.6.1.tar.gz` & `tmp/lofar-h5plot-2.6.2.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "/home/frits/software/lofar-h5plot/dist/.tmp-fbulfl1a/lofar-h5plot-2.6.1.tar", last modified: Tue Mar  7 19:58:04 2023, max compression
+gzip compressed data, was "/home/frits/software/lofar-h5plot/dist/.tmp-l3kq72pu/lofar-h5plot-2.6.2.tar", last modified: Tue Apr 11 14:55:23 2023, max compression
```

## Comparing `lofar-h5plot-2.6.1.tar` & `lofar-h5plot-2.6.2.tar`

### file list

```diff
@@ -1,15 +1,15 @@
-drwxr-xr-x   0 frits     (1000) frits     (1000)        0 2023-03-07 19:58:04.305416 lofar-h5plot-2.6.1/
--rw-rw-r--   0 frits     (1000) frits     (1000)    35149 2019-03-06 15:44:49.000000 lofar-h5plot-2.6.1/LICENSE
--rw-r--r--   0 frits     (1000) frits     (1000)     1857 2023-03-07 19:58:04.304416 lofar-h5plot-2.6.1/PKG-INFO
--rw-rw-r--   0 frits     (1000) frits     (1000)     1329 2022-11-09 14:32:41.000000 lofar-h5plot-2.6.1/README.md
--rwxrwxr-x   0 frits     (1000) frits     (1000)    53536 2023-03-07 19:57:44.000000 lofar-h5plot-2.6.1/h5plot
-drwxr-xr-x   0 frits     (1000) frits     (1000)        0 2023-03-07 19:58:04.303416 lofar-h5plot-2.6.1/lofar-h5plot/
--rw-rw-r--   0 frits     (1000) frits     (1000)        0 2020-01-07 14:53:28.000000 lofar-h5plot-2.6.1/lofar-h5plot/__init__.py
-drwxr-xr-x   0 frits     (1000) frits     (1000)        0 2023-03-07 19:58:04.304416 lofar-h5plot-2.6.1/lofar_h5plot.egg-info/
--rw-r--r--   0 frits     (1000) frits     (1000)     1857 2023-03-07 19:58:04.000000 lofar-h5plot-2.6.1/lofar_h5plot.egg-info/PKG-INFO
--rw-r--r--   0 frits     (1000) frits     (1000)      237 2023-03-07 19:58:04.000000 lofar-h5plot-2.6.1/lofar_h5plot.egg-info/SOURCES.txt
--rw-r--r--   0 frits     (1000) frits     (1000)        1 2023-03-07 19:58:04.000000 lofar-h5plot-2.6.1/lofar_h5plot.egg-info/dependency_links.txt
--rw-r--r--   0 frits     (1000) frits     (1000)       23 2023-03-07 19:58:04.000000 lofar-h5plot-2.6.1/lofar_h5plot.egg-info/requires.txt
--rw-r--r--   0 frits     (1000) frits     (1000)       13 2023-03-07 19:58:04.000000 lofar-h5plot-2.6.1/lofar_h5plot.egg-info/top_level.txt
--rw-r--r--   0 frits     (1000) frits     (1000)       38 2023-03-07 19:58:04.305416 lofar-h5plot-2.6.1/setup.cfg
--rw-rw-r--   0 frits     (1000) frits     (1000)      838 2023-03-07 19:57:46.000000 lofar-h5plot-2.6.1/setup.py
+drwxr-xr-x   0 frits     (1000) frits     (1000)        0 2023-04-11 14:55:23.901579 lofar-h5plot-2.6.2/
+-rw-rw-r--   0 frits     (1000) frits     (1000)    35149 2019-03-06 15:44:49.000000 lofar-h5plot-2.6.2/LICENSE
+-rw-r--r--   0 frits     (1000) frits     (1000)     1857 2023-04-11 14:55:23.901579 lofar-h5plot-2.6.2/PKG-INFO
+-rw-rw-r--   0 frits     (1000) frits     (1000)     1329 2022-11-09 14:32:41.000000 lofar-h5plot-2.6.2/README.md
+-rwxrwxr-x   0 frits     (1000) frits     (1000)    55648 2023-04-11 14:52:49.000000 lofar-h5plot-2.6.2/h5plot
+drwxr-xr-x   0 frits     (1000) frits     (1000)        0 2023-04-11 14:55:23.899579 lofar-h5plot-2.6.2/lofar-h5plot/
+-rw-rw-r--   0 frits     (1000) frits     (1000)        0 2020-01-07 14:53:28.000000 lofar-h5plot-2.6.2/lofar-h5plot/__init__.py
+drwxr-xr-x   0 frits     (1000) frits     (1000)        0 2023-04-11 14:55:23.901579 lofar-h5plot-2.6.2/lofar_h5plot.egg-info/
+-rw-r--r--   0 frits     (1000) frits     (1000)     1857 2023-04-11 14:55:23.000000 lofar-h5plot-2.6.2/lofar_h5plot.egg-info/PKG-INFO
+-rw-r--r--   0 frits     (1000) frits     (1000)      237 2023-04-11 14:55:23.000000 lofar-h5plot-2.6.2/lofar_h5plot.egg-info/SOURCES.txt
+-rw-r--r--   0 frits     (1000) frits     (1000)        1 2023-04-11 14:55:23.000000 lofar-h5plot-2.6.2/lofar_h5plot.egg-info/dependency_links.txt
+-rw-r--r--   0 frits     (1000) frits     (1000)       23 2023-04-11 14:55:23.000000 lofar-h5plot-2.6.2/lofar_h5plot.egg-info/requires.txt
+-rw-r--r--   0 frits     (1000) frits     (1000)       13 2023-04-11 14:55:23.000000 lofar-h5plot-2.6.2/lofar_h5plot.egg-info/top_level.txt
+-rw-r--r--   0 frits     (1000) frits     (1000)       38 2023-04-11 14:55:23.901579 lofar-h5plot-2.6.2/setup.cfg
+-rw-rw-r--   0 frits     (1000) frits     (1000)      838 2023-04-11 14:52:39.000000 lofar-h5plot-2.6.2/setup.py
```

### Comparing `lofar-h5plot-2.6.1/LICENSE` & `lofar-h5plot-2.6.2/LICENSE`

 * *Files identical despite different names*

### Comparing `lofar-h5plot-2.6.1/PKG-INFO` & `lofar-h5plot-2.6.2/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: lofar-h5plot
-Version: 2.6.1
+Version: 2.6.2
 Summary: The spiritual successor to ParmDBplot for quickly reviewing gain solutions generated by NDPPP.
 Home-page: https://github.com/tikk3r/lofar-h5plot
 Author: Frits Sweijen
 Author-email: frits.sweijen@gmail.com
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: GNU General Public License v3 (GPLv3)
 Classifier: Operating System :: OS Independent
```

#### html2text {}

```diff
@@ -1,8 +1,8 @@
-Metadata-Version: 2.1 Name: lofar-h5plot Version: 2.6.1 Summary: The spiritual
+Metadata-Version: 2.1 Name: lofar-h5plot Version: 2.6.2 Summary: The spiritual
 successor to ParmDBplot for quickly reviewing gain solutions generated by
 NDPPP. Home-page: https://github.com/tikk3r/lofar-h5plot Author: Frits Sweijen
 Author-email: frits.sweijen@gmail.com Classifier: Programming Language ::
 Python :: 3 Classifier: License :: OSI Approved :: GNU General Public License
 v3 (GPLv3) Classifier: Operating System :: OS Independent Requires-Python:
 >=3.6 Description-Content-Type: text/markdown License-File: LICENSE
                           ****** LOFAR H5plot ******
```

### Comparing `lofar-h5plot-2.6.1/README.md` & `lofar-h5plot-2.6.2/README.md`

 * *Files identical despite different names*

### Comparing `lofar-h5plot-2.6.1/h5plot` & `lofar-h5plot-2.6.2/h5plot`

 * *Files 6% similar despite different names*

```diff
@@ -430,32 +430,33 @@
         if (self.antindex - 1) > 0:
             self.antindex -= 1
         else:
             self.antindex = len(self.parent.stations) - 1
         diridx = self.parent.directions.index(self.direction)
         x, y, yw, l, p = load_axes(self.values, self.st, self.axis, self.antindex, self.refantindex, freqslot=self.freqslot, direction=diridx)
         self.frametitle = self.parent.stations[self.antindex]
-        self.frametitle = self.parent.stations[self.antindex]
         self.plot(x, y, yw, self.frametitle, ax_labels=[self.xlabel, self.ylabel], plot_labels=l, isphase=p)
         self.setWindowTitle(self.frametitle)
 
     def _forward_button_event(self):
         """ An event triggered by pressing the "Forward" button of a GraphWindow.
 
         When pressed, the abscissa is advanced one position, showing the next time or frequency slot.
         """
+        import time
         if 'time' in self.xlabel.lower():
             self.freqslot += 1
             self.select_label.setText('Frequency: {:.3f} MHz'.format(self.frequencies[self.freqslot] / 1e6))
             diridx = self.parent.directions.index(self.direction)
             x, y, yw, l, p = load_axes(self.values, self.st, self.axis, self.antindex, self.refantindex, freqslot=self.freqslot, direction=diridx)
             if (self.freqslot > 0) and (not self.button_prev.isEnabled()):
                 self.button_prev.setEnabled(True)
             if self.freqslot == (len(self.frequencies) - 1):
                 self.button_next.setEnabled(False)
+                
         elif 'freq' in self.xlabel.lower():
             self.timeslot += 1
             self.select_label.setText('Time: ' + self.format_time(self.times[self.timeslot]))
             diridx = self.parent.directions.index(self.direction)
             x, y, yw, l, p = load_axes(self.values, self.st, self.axis, self.antindex, self.refantindex, timeslot=self.timeslot, direction=diridx)
             if self.timeslot < (len(self.times) - 1) and (not self.button_prev.isEnabled()):
                 self.button_prev.setEnabled(True)
@@ -706,15 +707,15 @@
         if (self.polslot > 0) and (not self.button_prev.isEnabled()):
             self.button_prev.setEnabled(True)
         if self.polslot == (len(self.polarizations) - 1):
             self.button_next.setEnabled(False)
         self.select_label.setText('Corr.: {:s}'.format(self.polarizations[self.polslot]))
         diridx = self.parent.directions.index(self.direction)
         x, y, z, zw, p = load_axes_2d(self.values, self.weights, self.st, self.antindex, self.refantindex, self.polslot, direction=diridx)
-        self.plot(x, y, z, ax_labels=('Time [s]', 'Freq. [MHz]'), isphase=p)
+        self.plot(x, y, z, self.frametitle, ax_labels=('Time [s]', 'Freq. [MHz]'), isphase=p)
 
     def _backward_button_event(self):
         """ An event triggered by pressing the "Back" button of a GraphWindow.
 
         When pressed, the abscissa is set back one position, showing the previous time or frequency slot.
         """
         if (self.polslot > 0):
@@ -722,38 +723,66 @@
         if self.polslot == 0:
             self.button_prev.setEnabled(False)
         if (self.polslot < (len(self.polarizations) - 1)) and (not self.button_next.isEnabled()):
             self.button_next.setEnabled(True)
         self.select_label.setText('Corr.: {:s}'.format(self.polarizations[self.polslot]))
         diridx = self.parent.directions.index(self.direction)
         x, y, z, zw, p = load_axes_2d(self.values, self.weights, self.st, self.antindex, self.refantindex, self.polslot, direction=diridx)
-        self.plot(x, y, z, ax_labels=('Time [s]', 'Freq. [MHz]'), isphase=p)
+        self.plot(x, y, z, self.frametitle, ax_labels=('Time [s]', 'Freq. [MHz]'), isphase=p)
 
     def plot(self, xaxis, yaxis, zaxis, frametitle='', limits=[None, None], ax_labels=['', ''], multidim=False, isphase=False):
         self.xlabel = ax_labels[0]
         self.ylabel = ax_labels[1]
         self.fig.clf()
         self.ax = self.fig.add_subplot(111)
         self.ax.clear()
         # Start counting from t=0
         xaxis = xaxis - xaxis[0]
         yaxis = yaxis * 1e-6
         if self.polarizations is not None:
             self.ax.set_title(frametitle + ':' + self.st.name + ' - {:s} - {:s}'.format(self.polarizations[self.polslot], self.direction))
         else:
             self.ax.set_title(frametitle + ':' + self.st.name + ' - {:s}'.format(self.direction))
+        tdiff = np.diff(xaxis)
+        fdiff = np.diff(yaxis)
+        solint_time = tdiff[0]
+        solint_freq = fdiff[0]
+        vals = zaxis.copy()
+        plot_x = xaxis.copy()
+        plot_y = yaxis.copy()
+        if not np.allclose(np.diff(yaxis), np.diff(yaxis)[0], rtol=0.01): # if not evenly spaced
+            self.LOGGER.warning('Found irregular frequency axis, padding gaps with NaNs...')
+            gapidx = np.nanargmax(np.abs(np.diff(plot_y)) > 2*solint_freq)  # index BEFORE the gap
+            gapsize = plot_y[gapidx+1] - plot_y[gapidx]
+            y_spacing = solint_freq
+            while (gapsize >= 2*y_spacing) and (len(plot_y) <= yaxis[-1] / solint_freq):
+                vals = np.insert(vals, gapidx + 1, np.nan * np.ones((int(gapsize / y_spacing), vals.shape[0])), axis=1)  # fill gap with NaNs
+                plot_y = np.insert(plot_y, gapidx + 1, np.arange(plot_y[gapidx], plot_y[gapidx + 1], solint_freq))  # fill gap with NaNs
+                gapidx = np.nanargmax(np.abs(np.diff(plot_y)) >= 2*solint_freq)  # index BEFORE the gap
+                gapsize = np.abs(plot_y[gapidx+1] - plot_y[gapidx])
+
+        if not np.allclose(np.diff(xaxis), np.diff(xaxis)[0], rtol=0.01): # if not evenly spaced
+            self.LOGGER.warning('Found irregular time axis, padding gaps with NaNs...')
+            gapidx = np.nanargmax(np.abs(np.diff(plot_x)) > 2*solint_time)  # index BEFORE the gap
+            gapsize = plot_x[gapidx+1] - plot_x[gapidx]
+            x_spacing = solint_time
+            while (gapsize >= 2*x_spacing) and (len(plot_x) <= xaxis[-1] / solint_time): # if gap greater 2 times y-spacing, pad NaNs
+                vals = np.insert(vals, gapidx + 1, np.nan * np.ones((int(gapsize / x_spacing), vals.shape[1])), axis=0)  # fill gap with NaNs
+                plot_x = np.insert(plot_x, gapidx + 1, np.arange(plot_x[gapidx], plot_x[gapidx + 1], solint_time))  # fill gap with NaNs
+                gapidx = np.nanargmax(np.abs(np.diff(plot_x)) >= 2*solint_time)  # index BEFORE the gap
+                gapsize = np.abs(plot_x[gapidx+1] - plot_x[gapidx])
         if isphase:
             current_cmap = matplotlib.cm.get_cmap('jet')
             current_cmap.set_bad(color='w')
-            im = self.ax.imshow(zaxis.T, interpolation='none', extent=[xaxis[0], xaxis[-1], yaxis[0], yaxis[-1]], aspect='auto', cmap=current_cmap, origin='lower')
+            im = self.ax.imshow(vals.T, interpolation='none', extent=[plot_x[0], plot_x[-1], plot_y[0], plot_y[-1]], aspect='auto', cmap=current_cmap, origin='lower')
             im.set_clim(-np.pi, np.pi)
         else:
             current_cmap = matplotlib.cm.get_cmap('viridis')
             current_cmap.set_bad(color='w')
-            im = self.ax.imshow(zaxis.T, interpolation='none', extent=[xaxis[0], xaxis[-1], yaxis[0], yaxis[-1]], aspect='auto', cmap=current_cmap, origin='lower')
+            im = self.ax.imshow(zaxis.T, interpolation='none', extent=[plot_x[0], plot_x[-1], plot_y[0], plot_y[-1]], aspect='auto', cmap=current_cmap, origin='lower')
         cb = self.fig.colorbar(im)
         self.ax.set(xlabel=ax_labels[0], ylabel=ax_labels[1], xlim=limits[0], ylim=limits[1])
         self.canvas.draw()
 
 
 class H5PlotGUI(QDialog):
     """The main GUI for H5Plot.
@@ -866,14 +895,15 @@
 
         layout = QFormLayout(self)
         layout.addRow(self.solset_label, self.solset_picker)
         layout.addRow(plot_layout)
         layout.addRow(self.plot_button)
         layout.addRow(self.station_picker)
 
+
     def _axis_picker_event(self):
         """Callback function for when the x-axis is changed.
 
         Sets the `axis` attribute to the selected axis
         """
         self.logger.debug('Axis changed to: ' + self.axis_picker.currentText())
         self.axis = self.axis_picker.currentText()
```

### Comparing `lofar-h5plot-2.6.1/lofar_h5plot.egg-info/PKG-INFO` & `lofar-h5plot-2.6.2/lofar_h5plot.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: lofar-h5plot
-Version: 2.6.1
+Version: 2.6.2
 Summary: The spiritual successor to ParmDBplot for quickly reviewing gain solutions generated by NDPPP.
 Home-page: https://github.com/tikk3r/lofar-h5plot
 Author: Frits Sweijen
 Author-email: frits.sweijen@gmail.com
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: GNU General Public License v3 (GPLv3)
 Classifier: Operating System :: OS Independent
```

#### html2text {}

```diff
@@ -1,8 +1,8 @@
-Metadata-Version: 2.1 Name: lofar-h5plot Version: 2.6.1 Summary: The spiritual
+Metadata-Version: 2.1 Name: lofar-h5plot Version: 2.6.2 Summary: The spiritual
 successor to ParmDBplot for quickly reviewing gain solutions generated by
 NDPPP. Home-page: https://github.com/tikk3r/lofar-h5plot Author: Frits Sweijen
 Author-email: frits.sweijen@gmail.com Classifier: Programming Language ::
 Python :: 3 Classifier: License :: OSI Approved :: GNU General Public License
 v3 (GPLv3) Classifier: Operating System :: OS Independent Requires-Python:
 >=3.6 Description-Content-Type: text/markdown License-File: LICENSE
                           ****** LOFAR H5plot ******
```

### Comparing `lofar-h5plot-2.6.1/setup.py` & `lofar-h5plot-2.6.2/setup.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 import setuptools
 
 with open('README.md', 'r') as f:
     long_desc = f.read()
 
 setuptools.setup(
     name='lofar-h5plot',
-    version='2.6.1',
+    version='2.6.2',
     scripts=['h5plot'],
     author='Frits Sweijen',
     author_email='frits.sweijen@gmail.com',
     description='The spiritual successor to ParmDBplot for quickly reviewing gain solutions generated by NDPPP.',
     long_description=long_desc,
     long_description_content_type='text/markdown',
     url='https://github.com/tikk3r/lofar-h5plot',
```

